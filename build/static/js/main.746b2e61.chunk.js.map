{"version":3,"sources":["common/controllers/OrbitControls.js","img/bg-act-tall.png","img/bg-tall.png","img/map.png","img/infoBG.png","img/close.png","img/back.png","utils/http.js","common/sceneConfig/BaseScene.js","common/sceneConfig/action/BaseAction.js","common/sceneConfig/action/PlatformAction.js","common/utils/globalData.js","common/sceneConfig/animations/BaseSceneAnimation.js","common/sceneConfig/animations/PlatformSceneAnimation.js","common/sceneConfig/PlatformScene.js","common/sceneConfig/DeviceScene.js","common/sceneConfig/Application.js","common/loaders/GLTFLoader.js","common/loaders/RGBELoader.js","common/utils/RoughnessMipmapper.js","common/utils/util.js","common/SceneManager.js","actions/actionTypes.js","reducers/test.js","reducers/index.js","pages/example/device.js","components/status/status.js","components/networkError/networkError.js","pages/device/device.js","components/modal/modal.js","pages/platform/Platform.js","pages/sceneManagerDemo/sceneDemo.js","pages/map/map.js","layout/layout.js","App.js","serviceWorker.js","index.js"],"names":["THREE","require","OrbitControls","object","domElement","undefined","console","warn","document","error","this","enabled","target","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TOUCH","TWO","DOLLY_PAN","target0","clone","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","max","min","makeSafe","radius","scale","addScaledVector","panOffset","add","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","type","startEvent","endEvent","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","length","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","event","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","x","y","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchMoveRotate","subVectors","handleTouchMovePan","handleTouchMoveDolly","preventDefault","focus","window","button","ctrlKey","metaKey","shiftKey","handleMouseDownDolly","addEventListener","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","stopPropagation","handleMouseWheel","needsUpdate","keyCode","handleKeyDown","handleTouchStartDollyPan","DOLLY_ROTATE","handleTouchStartDollyRotate","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","tabIndex","prototype","Object","create","EventDispatcher","constructor","MapControls","call","module","exports","default","axios","defaults","timeout","headers","post","BaseScene","config","sceneName","mixer","poseOfCamera","sceneConfig","positionOfCamera","z","upOfCamera","lookatOfCamera","lookat","poseOfModel","positionOfModel","rotationOfModel","rotation","scaleOfModel","PubSub","subscribe","animate","bind","doWhenModelIsLoaded","doWhenModelLoadedFromCache","unsubscribe","data","delta","isLoaded","animateWhenModelLoaded","animateWhenModelUnLoaded","model_list","count","log","lightMapPath","colorMapFilePath","Frame","metallicMapFilePath","roughnessMapFilePath","path","TriggerType","BaseAction","triggerName","triggerType","funcName","param","node","scene","doWhenModelPicked","doWhenAutoExecute","name","String","doWhenSingleClick","doWhenDoubleClick","PlatformAction","PlatformScene","setup","pop_video","id","src","publish","globalDate","sceneManager","Application","get","key","val","AnimatonsType","PlatformSceneAnimation","action_Half_N","action_Half_S","node_Half_N","node_Half_S","time","timeOfAnimation","timeMax","timeWillEnter","getObjectByName","visible","play","clipAndAction","action","setLoop","current","ceil","next","playActionOnce","e","delay","startAt","clipsAndActions","getGlobal","currentGltf","that","animations","Array","forEach","value","index","parser","loop","finished","updateWhenModelLoaded","updateWhenModelUnLoaded","doWhenModelLoaded","getAnimationClipAndActionBy","stop","paserWhenCustom","platformActions","actionList","triggers","actions","push","sceneAniamtion","DeviceScene","jsonObject","animateCamera","camera","controls","hideUnitWithOut","sceneModels","platform","deviceTVM","configParser","immediateExceptions","jsonData","pages","pagesJsonObject","device_tvm","GLTFLoader","manager","Loader","dracoLoader","ddsLoader","GLTFRegistry","objects","remove","removeAll","assign","load","url","onLoad","onProgress","onError","resourcePath","LoaderUtils","extractUrlBase","itemStart","_onError","itemError","itemEnd","loader","FileLoader","setPath","setResponseType","crossOrigin","setWithCredentials","parse","gltf","setDRACOLoader","setDDSLoader","content","extensions","decodeText","Uint8Array","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","json","JSON","asset","version","Error","extensionsUsed","i","extensionName","extensionsRequired","KHR_LIGHTS_PUNCTUAL","GLTFLightsExtension","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","MSFT_TEXTURE_DDS","GLTFTextureDDSExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","indexOf","GLTFParser","extension","lightDefs","lights","loadLight","lightIndex","lightNode","lightDef","color","Color","fromArray","range","DirectionalLight","PointLight","SpotLight","spot","innerConeAngle","outerConeAngle","penumbra","decay","intensity","Promise","resolve","getMaterialType","MeshBasicMaterial","extendParams","materialParams","materialDef","pending","opacity","metallicRoughness","pbrMetallicRoughness","isArray","baseColorFactor","array","baseColorTexture","assignTexture","all","BINARY_EXTENSION_CHUNK_TYPES","body","headerView","DataView","header","magic","slice","getUint32","chunkView","chunkIndex","byteLength","chunkLength","chunkType","contentArray","byteOffset","preload","GLTFMeshStandardSGMaterial","params","MeshStandardMaterial","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","join","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","uniforms","specular","setHex","glossiness","specularMap","glossinessMap","_extraUniforms","onBeforeCompile","shader","uniformName","fragmentShader","replace","defineProperties","defines","USE_GLOSSINESSMAP","USE_ROUGHNESSMAP","metalness","roughness","metalnessMap","roughnessMap","setValues","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","emissive","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossMapDef","createMaterial","material","fog","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","TangentSpaceNormalMap","normalScale","displacementMap","displacementScale","displacementBias","alphaMap","envMap","envMapIntensity","refractionRatio","GLTFCubicSplineInterpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","Interpolant","decodePrimitive","primitive","bufferViewIndex","bufferView","gltfAttributeMap","attributes","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","attributeName","threeAttributeName","ATTRIBUTES","toLowerCase","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","normalized","getDependency","then","decodeDracoFile","geometry","attribute","extendTexture","texture","transform","repeat","texCoord","source","copySampleValue_","result","values","valueSize","beforeStart_","afterEnd_","interpolate_","i1","t0","t","t1","stride","stride2","stride3","td","p","pp","ppp","offset1","offset0","s2","s3","s0","s1","p0","m0","p1","m1","WEBGL_CONSTANTS","5120","Int8Array","5121","5122","Int16Array","5123","Uint16Array","5125","Uint32Array","5126","Float32Array","WEBGL_FILTERS","9728","NearestFilter","9729","LinearFilter","9984","NearestMipmapNearestFilter","9985","LinearMipmapNearestFilter","9986","NearestMipmapLinearFilter","9987","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","33071","ClampToEdgeWrapping","33648","MirroredRepeatWrapping","10497","RepeatWrapping","WEBGL_TYPE_SIZES","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","LINEAR","InterpolateLinear","STEP","InterpolateDiscrete","ALPHA_MODES","MIME_TYPE_FORMATS","RGBAFormat","RGBFormat","resolveURL","test","addUnknownExtensionsToUserData","knownExtensions","objectDef","userData","gltfExtensions","assignExtrasToUserData","gltfDef","extras","updateMorphTargets","mesh","meshDef","il","morphTargetInfluences","targetNames","morphTargetDictionary","createPrimitiveKey","primitiveDef","dracoExtension","indices","createAttributesKey","mode","attributesKey","sort","options","cache","primitiveCache","textureLoader","TextureLoader","setCrossOrigin","fileLoader","addPrimitiveAttributes","assignAttributeAccessor","accessorIndex","accessor","setAttribute","gltfAttributeName","setIndex","box","Box3","targets","vector","setX","abs","setY","setZ","expandByVector","boundingBox","sphere","Sphere","getCenter","center","distanceTo","boundingSphere","computeBounds","hasMorphPosition","hasMorphNormal","pendingPositionAccessors","pendingNormalAccessors","pendingAccessor","normal","morphPositions","morphNormals","morphAttributes","morphTargetsRelative","addMorphTargets","toTrianglesDrawMode","drawMode","getIndex","getAttribute","numberOfTriangles","newIndices","TriangleFanDrawMode","getX","newGeometry","markDefs","getDependencies","dependencies","scenes","cameras","catch","nodeDefs","nodes","skinDefs","skins","meshDefs","meshes","meshReferences","meshUses","skinIndex","skinLength","joints","isBone","nodeIndex","nodeLength","nodeDef","skin","isSkinnedMesh","cacheKey","dependency","loadScene","loadNode","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadTexture","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","buffers","uri","reject","bufferViewDef","bufferViews","buffer","sparse","pendingBufferViews","bufferAttribute","itemSize","TypedArray","elementBytes","BYTES_PER_ELEMENT","itemBytes","byteStride","ibSlice","floor","ibCacheKey","ib","InterleavedBuffer","InterleavedBufferAttribute","BufferAttribute","itemSizeIndices","SCALAR","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setW","textureIndex","URL","webkitURL","textureDef","textures","textureExtensions","sourceURI","images","isObjectURL","blob","Blob","mimeType","createObjectURL","getHandler","revokeObjectURL","flipY","format","sampler","samplers","magFilter","minFilter","wrapS","wrapT","mapName","mapDef","isCompressedTexture","assignFinalMaterial","useVertexTangents","tangent","useVertexColors","useFlatShading","useSkinning","useMorphTargets","useMorphNormals","isPoints","uuid","pointsMaterial","PointsMaterial","Material","sizeAttenuation","isLine","lineMaterial","LineBasicMaterial","cachedMaterial","skinning","vertexTangents","vertexColors","flatShading","morphTargets","uv2","uv","materialIndex","materialType","materials","materialExtensions","sgExtension","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","doubleSided","side","DoubleSide","alphaMode","transparent","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","encoding","sRGBEncoding","loadGeometries","primitives","createDracoPrimitive","geometryPromise","cached","promise","BufferGeometry","meshIndex","depthTest","FrontSide","results","geometries","SkinnedMesh","Mesh","skinWeight","normalizeSkinWeights","TriangleStripDrawMode","LineSegments","Line","LineLoop","Points","group","Group","cameraIndex","cameraDef","PerspectiveCamera","MathUtils","radToDeg","yfov","aspectRatio","znear","zfar","OrthographicCamera","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","channel","input","parameters","output","inputAccessors","outputAccessors","tracks","inputAccessor","outputAccessor","TypedKeyframeTrack","updateMatrix","matrixAutoUpdate","NumberKeyframeTrack","QuaternionKeyframeTrack","VectorKeyframeTrack","targetName","interpolation","traverse","isMesh","outputArray","scaled","j","jl","track","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","AnimationClip","instanceNum","o","light","Bone","Object3D","PropertyBinding","sanitizeNodeName","Matrix4","applyMatrix4","buildNodeHierachy","nodeId","parentObject","pendingJoints","jointNodes","bones","boneInverses","jointNode","mat","Skeleton","matrixWorld","children","child","sceneIndex","sceneDef","nodeIds","RGBELoader","DataTextureLoader","UnsignedByteType","rgbe_error","rgbe_error_code","msg","fgets","lineLimit","consume","pos","len","s","chunk","fromCharCode","apply","subarray","RGBEByteToRGBFloat","sourceArray","sourceOffset","destArray","destOffset","RGBEByteToRGBHalf","floatView","int32View","Int32Array","toHalf","bits","m","byteArray","rgbe_header_info","line","match","gamma_re","exposure_re","format_re","dimensions_re","valid","string","comments","programtype","gamma","exposure","width","height","charAt","parseFloat","parseInt","RGBE_ReadHeader","w","h","image_rgba_data","data_rgba","byteValue","scanline_buffer","ptr","ptr_end","l","off","isEncodedRun","rgbeStart","scanline_width","num_scanlines","RGBE_ReadPixels_RLE","RGBEFormat","FloatType","numElements","floatArray","HalfFloatType","halfArray","setDataType","texData","RGBEEncoding","generateMipmaps","LinearEncoding","RoughnessMipmapper","_mipmapMaterial","shaderMaterial","RawShaderMaterial","texelSize","vertexShader","blending","NoBlending","depthWrite","_getMipmapMaterial","_scene","Scene","PlaneBufferGeometry","_flatCamera","_tempTarget","_renderer","renderer","compile","roughnessUpdated","image","isPowerOfTwo","oldTarget","getRenderTarget","autoClear","WebGLRenderTarget","depthBuffer","stencilBuffer","scissorTest","newRoughnessTarget","LinearMipMapLinearFilter","setRenderTarget","mip","viewport","scissor","render","copyFramebufferToTexture","addClipActionFolder","folderName","gui","clipAction","animationClip","actionControls","keyframe","timeScale","repetitions","warpStartTimeScale","warpEndTimeScale","warpDurationInSeconds","warp","fadeDurationInSeconds","fadeIn","fadeOut","effectiveWeight","effectiveTimeScale","actionFolder","addFolder","listen","LoopRepeat","LoopOnce","LoopPingPong","onChange","duration","TWEEN","SceneManager","loadModelWithBg","bgPath","bgFileName","modelPath","modelName","item","bufferPool","model","anamationClip","adjustControl","defaultPositionOfModel","defaultRotationOfModel","defaultScaleOfModel","setPMREM","setTextureTo","obj","pick","mouse","origin","direction","unproject","normalize","intersects","intersectObjects","ifInit","clock","getDelta","stats","animationControls","clipAndActions","getEffectiveTimeScale","getEffectiveWeight","requestAnimationFrame","oldP","oldT","newP","target2","newT","self","positionVar","tweenP","Tween","to","onComplete","easing","Easing","Cubic","InOut","onUpdate","start","onWindowResize","aspect","container","offsetWidth","offsetHeight","setSize","init","raycaster","defaultPositionOfCamera","defaultLookAtOfCamera","antialias","alpha","pmremGenerator","compileEquirectangularShader","setClearColor","setPixelRatio","devicePixelRatio","toneMapping","toneMappingExposure","outputEncoding","ambi","spotLight","Stats","dom","hidden","appendChild","div","newContainer","getElementById","removeChild","clip","findByName","mixerControls","stopAllAction","gltfs","tweenT","sceneModel","arrowHelper","setCameraPos","setModelPos","size","setFromObject","getSize","near","far","getPmremTexture","environment","fromEquirectangular","roughnessMipmapper","_this","dat","mixerFolder","control","getAnimationClipAndActionByNameWithMixerAndGltfs","animationAction","r","names","buildTypes","testDate","actionTypes","TEST","appReducer","combineReducers","testReducers","Example","handlePick","scenePath","Component","Status","list","selected","errorJudjement","status","handleClick","setState","nextProps","nextContext","className","style","background","onClick","title","tip","tipIndex","PureComponent","NetworkError","Device","statusList","showError","needRepair","handleShow","createHashHistory","getStatus","props","history","location","http","res","modelFileName","setTimeout","bgFilePath","modelFilePath","pathname","clearTimeout","Modal","show","onCancel","alt","Platform","handleOpenVideo","handleCancelModal","video","currentReport","nextReport","setVideo","newViedeo","showVideo","report","autoPlay","SceneDemo","Map","navigateBack","goBack","renderMap","BMapGL","point","Point","centerAndZoom","marker","Marker","addOverlay","infoWindow","InfoWindow","message","openInfoWindow","Content","Layout","Sider","SubMenu","Menu","OwnLayout","collapsed","onCollapse","minHeight","collapsible","theme","defaultSelectedKeys","Item","marginLeft","exact","component","loggerMiddleware","createLogger","store","initialState","enhancer","compose","applyMiddleware","Thunk","createStore","appReducers","configureStore","App","Boolean","hostname","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.746b2e61.chunk.js","sourcesContent":["/* three-orbitcontrols addendum */ var THREE = require('three');\n/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n * @author ScieCode / http://github.com/sciecode\n */\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nTHREE.OrbitControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\n\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new THREE.Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// this.target = new THREE.Vector3().addVectors(/*new line for readability*/\n\t// \tobject.position, object.getWorldDirection());\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.05;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = false; // if true, pan in screen-space\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// Set to false to disable use of the keys\n\tthis.enableKeys = true;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { LEFT: THREE.MOUSE.ROTATE, MIDDLE: THREE.MOUSE.DOLLY, RIGHT: THREE.MOUSE.PAN };\n\n\t// Touch fingers\n\tthis.touches = { ONE: THREE.TOUCH.ROTATE, TWO: THREE.TOUCH.DOLLY_PAN };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new THREE.Vector3();\n\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t} else {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t}\n\n\t\t\t// restrict theta to be between desired limits\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t}\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tscope.domElement.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = {\n\t\tNONE: - 1,\n\t\tROTATE: 0,\n\t\tDOLLY: 1,\n\t\tPAN: 2,\n\t\tTOUCH_ROTATE: 3,\n\t\tTOUCH_PAN: 4,\n\t\tTOUCH_DOLLY_PAN: 5,\n\t\tTOUCH_DOLLY_ROTATE: 6\n\t};\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new THREE.Spherical();\n\tvar sphericalDelta = new THREE.Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new THREE.Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new THREE.Vector2();\n\tvar rotateEnd = new THREE.Vector2();\n\tvar rotateDelta = new THREE.Vector2();\n\n\tvar panStart = new THREE.Vector2();\n\tvar panEnd = new THREE.Vector2();\n\tvar panDelta = new THREE.Vector2();\n\n\tvar dollyStart = new THREE.Vector2();\n\tvar dollyEnd = new THREE.Vector2();\n\tvar dollyDelta = new THREE.Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\tvar needsUpdate = false;\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.update();\n\n\t\t}\n\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\tif ( event.touches.length === 1 ) {\n\n\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartPan( event ) {\n\n\t\tif ( event.touches.length === 1 ) {\n\n\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyStart.set( 0, distance );\n\n\t}\n\n\tfunction handleTouchStartDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchStartPan( event );\n\n\t}\n\n\tfunction handleTouchStartDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\tif ( event.touches.length === 1 ) {\n\n\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateEnd.set( x, y );\n\n\t\t}\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t}\n\n\tfunction handleTouchMovePan( event ) {\n\n\t\tif ( event.touches.length === 1 ) {\n\n\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanEnd.set( x, y );\n\n\t\t}\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t}\n\n\tfunction handleTouchMoveDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyEnd.set( 0, distance );\n\n\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\tdollyIn( dollyDelta.y );\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t}\n\n\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t}\n\n\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t}\n\n\tfunction handleTouchEnd( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onMouseDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\t// Prevent the browser from scrolling.\n\n\t\tevent.preventDefault();\n\n\t\t// Manually set the focus since calling preventDefault above\n\t\t// prevents the browser from setting it automatically.\n\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase 0:\n\n\t\t\t\tswitch ( scope.mouseButtons.LEFT ) {\n\n\t\t\t\t\tcase THREE.MOUSE.ROTATE:\n\n\t\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.MOUSE.PAN:\n\n\t\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\n\t\t\tcase 1:\n\n\t\t\t\tswitch ( scope.mouseButtons.MIDDLE ) {\n\n\t\t\t\t\tcase THREE.MOUSE.DOLLY:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\t\t\tbreak;\n\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tswitch ( scope.mouseButtons.RIGHT ) {\n\n\t\t\t\t\tcase THREE.MOUSE.ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.MOUSE.PAN:\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\n\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\tcase THREE.TOUCH.ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.TOUCH.PAN:\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\tcase THREE.TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\tscope.domElement.addEventListener( 'keydown', onKeyDown, false );\n\n\t// make sure element can receive keys.\n\n\tif ( scope.domElement.tabIndex === - 1 ) {\n\n\t\tscope.domElement.tabIndex = 0;\n\n\t}\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nTHREE.OrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls;\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nTHREE.MapControls = function ( object, domElement ) {\n\n\tTHREE.OrbitControls.call( this, object, domElement );\n\n\tthis.mouseButtons.LEFT = THREE.MOUSE.PAN;\n\tthis.mouseButtons.RIGHT = THREE.MOUSE.ROTATE;\n\n\tthis.touches.ONE = THREE.TOUCH.PAN;\n\tthis.touches.TWO = THREE.TOUCH.DOLLY_ROTATE;\n\n};\n\nTHREE.MapControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.MapControls.prototype.constructor = THREE.MapControls;\n/* three-orbitcontrols addendum */ module.exports = exports.default = THREE.OrbitControls;\n","module.exports = __webpack_public_path__ + \"static/media/bg-act-tall.dba53272.png\";","module.exports = __webpack_public_path__ + \"static/media/bg-tall.f1b7c890.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAdCAYAAABIWle8AAACEklEQVRIS52WTYiOURTHf39fkyKRqVGSMkn5CM2UHbHQxGomC3asrBCy0LwbxmoGzUo27NhgRxJip8RbPkq+Qkr5SKEkH0dnep6n+77d+zzP+57dfc7//O557j333CsiZmaLgV3ANqAfWAh8Bl4CV4ELkt63hyr8YGY9wChwCJgdmyj79hM4CYxJ+pXrCpiZLchm3VACaXfdA7ZL+uKOKZiZTQduAJs7AOXS28BWSX9y2DGg0QUoD/HfbcjM+oDXFWtUNY+v4TKH7QMmq9Q1/PsddhPYkhD/BiaAO8Am4DAwM6G95bC3wJKEYFTSidxnZkeBYtwW89FhXiezErA1kh4HsNXAo4TWHPYNmJsQ7JB0KYCNAMW4Lea7wx4A6xOwN8CwpKaZrQOuAEsT2qbDTgMHKnbrKzC/QjPpsAHgfo2tr5IM5ifgGjBUpS7xX5c0lMNWAU1gRhfAv8BaSU/CrnEG2NsF7KykqbgQ1gu8AOZ1APSy6pf0qQWWtSI/LuMdwI5IKvSxTvvUO0AN4CtgZbTTBlU+DFyuARuR5EVcWEtmAdC7xMYS4F1J3kVaLAXz4+WFPC0C/AcMSnpYC5ZtxjlgdwR2XtKeWNbRzDLYIuA5MCcI/AEsl/ShI1gG9Dv0eBDYkDSWWstkZhnML+JnWSd+B6yQ5JdH1EphGXCnPwf8uSDpYlnJ1IG55hRwUJKVwf4DxeG0sU2T1x8AAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/infoBG.6ef15b48.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAvCAYAAABzJ5OsAAAHVklEQVRoQ81afYwcZRn//d7dI5DSO40ilGCMidqi0p58hJQYLXfd2fYMsLN4bWmINi2ckQBNS4pIb7dzu0dRVNA2RGgLlj9K27vrziGmdOda2mhSNFqhtdoWmhAUDZAYvVZC1d15zLvn7c3OzexX77Tz57zzPM/v+Xyf93mHOM/Hsiz1yjG0u6IWQNhOurMBXgVgBoA2AKMA3gfkbRF1SikcBYoH58/Fa5Zluecjns0Sx5PWteJyBcilAD7WBJ/3ILKbSrbnc9Zvm6BHw+Djyb6bRZgCcHMzAkNoDpKSzec2HGyEZ93gu5L9nyjA3QzBLY0IaOhb4sUo1H17c71v1UNXF/iY2ddNcBuA1hpMTxA8DsgbAM+IyN9IfhiQVoCfdiGfI/DZqjzIUbrSkx9OD9RSoCr47u6ByOi/TzwB8r4QRgLBAQF2tLS4+/YOWu/UEtjVbV1RKKguAF8D8CUgNHQ3tUXnrB0cXFIM4xkKvrvbumi0oHYA+GoAsRAcAuSRvJ0+Wgtw2HrczMwTIgXB7UHfEBxsjRbvHBy0/hW8HvB2zOKndoCiK0nlQ5xmESvzL6R/0SxoP10s0ddJxacg+NRkcRxojc5eHuSBQMsbib5NIaEyFDnnrnrpJevMVAEf57Nw4bfa1MwZOq+CPL3JsdOrJyvmexNPZJYIsdv/oYj8YGQ4vQ6gTDXwCX6WiiX4GMkHfO4W0L3DyW2owFVh+cVJ66qiqN8HVJXvOHb629MHuoIzDTOzEcBDlW85iiKvcV7o/dP4+wrwRjIz5E8enTR5u3fp9FrcbxZLxUy1k8ASnwJDTi7VPQn8okR2gUup3OGI05EP3OumI8ZrebGUA60zflOZxBQl6Ng3nDqk6cuWj5uZ/QJ0+mKt07FTL/sFLVhhXXzRGbUeghtJ7M3nUj9qzDPCeDK7WgRdJH/5z9bixkPbrXN+OYZpdQDqgPc9yf35XCpWBh+7vf96uu6vfcRDjp0uu8i7ZpiZR70xSWBb3k711KeApYxkZAtEVpV5ko86udTDAd7Q8a93Wm8F0hvjDc5w+kjJ8gGlUQh8IWwDMsyMtkaHLx6fcXK9d1dXIAD4mPsP5O30wqBQiiWsdlLprtObn6XSSd2PHz6q9LZ+2TixAIdG7HRo12iY2TWAPD5JGFlFgWDgWllS1uZz6R+G5AFjZuZlAgs86+/dNM+dxVJfLuqIj3CVY6efDU8qoZHs31rh+nIJCFIgDLi2ZzWFx5gaprUSUM948AjpXq8T5wER+b4XaDTqzqrdZNWrwPkB17jiyYdniVz854nQ0d7COhqJzA4Qyz3gTzh2unrbWv64ugI3zS32HD7mS86qHgr1tU5cvXle7fliFw0zewSQaz3xPjBipyc3ZKF8qymA04HNFtW2fG59ndWpJFjH/S7vpkXBq1ojnayXlw0CbMzb6fXh8R60ItoIuqlaWYuOjQMvgTfMvixAL66/aPC6V26ZEMoHHTv1vVogJq/XVqBJ4CVRsUTmQRLf9cg9q8FXdonCe5zh1I8bBw+Uyu4xdSq4L8fr8+e5Vzc77jBuy9wDhSe9uKbU8nEzu0WAu8IUJ7g1b/d+o76duJJLmOWnJOZrAZ/IqaYUCIv58682ocAZUm0a90BwtYmb2ecFckezdb6KxZ9ti/6uZ7RwzZagKtRgCIXW+XWAPNbMDlsNuGOn7hqLbUsZptoaqECdZTNohxWRh7jIzMx3gcMVWQxZmbc3/CS84gjDQ6Wx3qae8jm5t6HA5RepxxxnCiffEeCjnl22alcZS2RXkzK5C2yyqxTBmpFhfaAJfAK7yrbonCtLPXIsmdlMwb0eUlHKbd+3xzoWxO5/2c/HzdQ8Qcurgf18CfwFfJKKm9ndAvGe6CpPUlqBIGuS0hE0dp7f/fglrYV/9ApwgwD7RuzUE41tPMKYmV1DYBGIX52NXLrxlcG1H/i9/N8z7H6v1b2nrvLR6kKbHixebLUWL1FH/NMD0u0cN2jF3CZmZvYQSHotIMDAiJ1a1phlm+mMvDRhcxvscXLp8mG8cuh0W//HodzjF+rEzI0U5u4f7PvjRKvhM5KR7FsK4S6/7f7vs0rIcsdOV+BqaEqsQyh6zr17OiZoekIWmXnpVl9lGbMhudnJpe73GzQQ/NjGdWpnMCOcJqSn0cuvallQqipUTwedA0AOtUVmL6t7Pq8F1bgZgR7ATsnNCNAbMpMvyWj4ZmTcSnXdSQE/J+S5QjG698BP179bq8503vrI5dFIoUvAr0/bnZQXhGFmlgF4utZtoAB/AHCcxOvi4iyBvwvwISrMFMFnAHy+nttAcd1vjgxv2FnLEHVdZZZ24Fuyn5SobCbwlVpMm1/nz1DA/c6LqTfr4VE3+HFmhpntAETH6ZTegAPsDxqnV1OiYfBlJRKZ60RhBQX6FPaReizl++avQuyki+16XN0EfeP/HviFjCX1yXYhvqz/+gBlDoHxvz70jbm+OXxfgLchPKn/+hBXDrW1zHmt2gVxPcr8B7pDmGj64hc6AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAABEVBMVEUAAAAA//9Vqv9Jkv9An/8uov87nf8zmf9An/83pP81nv84n/85o/83n/82of86ov85n/83of88nf83oP84ov86of84oP87of84of87n/86oP85oP86n/85oP85of84n/85oP85n/85oP84of84oP86n/85oP84oP85oP85oP85n/84oP86of84n/86oP85oP85oP85oP84oP86n/85oP85oP85of85oP85oP85of84oP85n/85oP85oP85oP85oP85of85oP85oP85oP85oP85oP85oP86oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP8/M/OtAAAAWnRSTlMAAQMHCAsNDxAcHSAkJSYsLS4vMzc5O0FJSktZZWZnaHR4eXp7gIuMjo+QkZKVlpmcpqeou7y9wcTFx8jJzc7P2Nvc3d7f4eLj5OXo7O3u7/Dy8/T19/n6/P21GvUAAAABuElEQVRIx62WbV8BQRTFz7J6RAmVjZ4flFBRWqRCpWJLEe73/yC9UKzdmdlZdV75rfnv7+6dmXMPYFcwns7X20Ttej4dD0JCy8lHmtBjMiQmlJhODOmawmfCReKoGOYg6vGAuBqkVBYTuCWhbgN2JtoiB7WiVma9Q47qrE8yEQmGqBMxM/4mSall+i5vhSRV8Y6gFEkrNdrTvjzU/9llpUwuVByeKM32R27Rt8FtpwYAuLY+PlMAbPMgHQBCTAar3AJXABwyGcS50BGAZybjf+VCDWCJzTQEDQxi0zVDCWRdM5RGwTVDl3iwMdASdh1Ux+vqaI9+33hERjV7P1r4gfEL9sX2tjteaYL2ZKEvU3m1OcnymuZG3C38eDmjETumRtQmWl4dUp4LccsLk5tbk6Ky2CLXVMJ6YH+pc+GBxQubyomuBo6ISfkM0SVcITZVFF136Exq5l1kLAwLq0eU+bzYwlhm+ckdimVleluebgBAlR81pnEdMOSYt+BfxycQ6zoz3Zj1Zq45Vmis/U/4ANQTUcw5VXmBqsRjSmFBdNPcRzdmSHxyCom/Fpa5rBq9nlG9yiRYcfQbUICBz3KWObkAAAAASUVORK5CYII=\"","import axios from 'axios'\n\naxios.defaults.timeout = 10000;\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded;charset=UTF-8';\n\n\nexport default axios;\n","import PubSub from 'pubsub-js'\nimport {Vector3} from \"three\";\n\nclass BaseScene {\n\n    constructor(config) {\n        this.sceneName = undefined; // set in sub class\n        this.config = config;\n        this.mixer = undefined;\n        // camera\n        let poseOfCamera = config.sceneConfig.poseOfCamera;\n        // if (poseOfCamera !== undefined) {\n            this.positionOfCamera = new Vector3(poseOfCamera.position.x, poseOfCamera.position.y, poseOfCamera.position.z);\n            this.upOfCamera = new Vector3(poseOfCamera.up.x, poseOfCamera.up.y, poseOfCamera.up.z);\n            this.lookatOfCamera = new Vector3(poseOfCamera.lookat.x, poseOfCamera.lookat.y, poseOfCamera.lookat.z);\n        // }\n\n        let poseOfModel = config.sceneConfig.poseOfModel;\n        // if (poseOfModel !== undefined) {\n            this.positionOfModel = new Vector3(poseOfModel.position.x, poseOfModel.position.y, poseOfModel.position.z);\n            this.rotationOfModel = new Vector3(poseOfModel.rotation.x, poseOfModel.rotation.y, poseOfModel.rotation.z);\n            this.scaleOfModel = new Vector3(poseOfModel.scale.x, poseOfModel.scale.y, poseOfModel.scale.z);\n        // }\n\n    }\n\n    setup() {\n        PubSub.subscribe(this.sceneName + 'animate', this.animate.bind(this));\n        PubSub.subscribe(this.sceneName + 'loaded', this.doWhenModelIsLoaded.bind(this));\n        PubSub.subscribe(this.sceneName + 'loadedFromCache', this.doWhenModelLoadedFromCache.bind(this));\n    }\n\n    destory() {\n        PubSub.unsubscribe(this.sceneName + 'animate');\n        PubSub.unsubscribe(this.sceneName + 'loaded');\n    }\n\n    doWhenModelIsLoaded(event, data) {\n\n    }\n\n    doWhenModelLoadedFromCache(event, data) {\n\n    }\n\n\n    animate(event, data) {\n        // console.log('BaseScene.animate' + data.delta + ' ' + data.isLoaded);\n        if (data.delta === null || data.delta === undefined) {\n            return;\n        }\n        if (event.isLoaded) {\n            this.animateWhenModelLoaded(data.delta);\n        } else {\n            this.animateWhenModelUnLoaded(data.delta);\n        }\n    }\n\n    animateWhenModelUnLoaded(delta) {\n\n    }\n\n    animateWhenModelLoaded(delta) {\n\n    }\n\n    // ---\n    modelFilePath() {\n        if(process.env.NODE_ENV==='development'){\n            return '/source/models/glb/';\n        }else {\n            return 'plugin/source/models/glb/'\n        }\n    }\n\n    modelFileName() {\n        // return 'CesiumMan.glb';\n        if (this.config.sceneConfig.model_list.count <= 0) {\n            console.log('model file count is 0 in config.json file');\n        }\n        return this.config.sceneConfig.model_list[0];\n    }\n\n    bgFilePath() {\n        return '/source/textures/equirectangular/';\n    }\n\n    bgFileName() {\n        return 'royal_esplanade_1k.hdr';\n    }\n\n    lightMapPath(){\n        if (this.config.sceneConfig.lightMapPath.count <= 0) {\n            console.log('model file count is 0 in config.json file');\n        }\n        return this.config.sceneConfig.lightMapPath[0];\n    }\n\n    colorMapFilePath() { // return \"/source/textures/device/Frame_mat_Base_Color.jpg\";\n        if (this.config.sceneConfig.colorMapFilePath !== null) {\n            return this.config.sceneConfig.Frame.colorMapFilePath;\n        }\n        return \"\";\n    }\n\n    metallicMapFilePath() { // return \"/source/textures/device/Frame_mat_Metallic.jpg\";\n        if (this.config.sceneConfig.metallicMapFilePath !== null) {\n            return this.config.sceneConfig.Frame.metallicMapFilePath;\n        }\n        return \"\";\n    }\n\n    roughnessMapFilePath() { // return \"/source/textures/device/Frame_mat_Roughness.jpg\";\n        if (this.config.sceneConfig.roughnessMapFilePath !== null) {\n            return this.config.sceneConfig.Frame.roughnessMapFilePath;\n        }\n        return \"\";\n    }\n\n    // colorMapFilePath(){\n    //     return \"\";\n    // }\n    //\n    // metallicMapFilePath(){\n    //     return \"\";\n    // }\n    //\n    // roughnessMapFilePath(){\n    //     return \"\";\n    // }\n\n}\n\nBaseScene.path = 'baseScene';\n\nexport default BaseScene;\n\n// const sceneManager =  getGlobal('sceneManager');\n// sceneManager.addEventListener('animate', function (event) {\n//     console.log('BaseScene.animate' + event.delta + '  ' + event.isLoaded);\n// });\n\n// BaseScene.init = function () {\n//     this.addventListener('animate', this.animate);\n//  };\n// Object.assign( BaseScene.prototype, THREE.EventDispatcher.prototype );\n","import PubSub from \"pubsub-js\";\nimport Application from \"../Application\";\nimport PlatformScene from \"../PlatformScene\";\n\nexport var TriggerType = {\n    Unknow: 'Unknow',// \n    Auto: 'Auto'   // \n    , Single: 'single' // \n    , Double: 'Double' // \n};\n\n/*  */\nclass BaseAction {\n\n    constructor(config) {\n        this.sceneName = undefined;\n        // \n        this.triggerName = config.triggerName;\n        this.triggerType = config.triggerType;\n        this.funcName = config.funcName;\n        this.param = config.param;\n\n        // \n        this.node = undefined;\n        this.scene = undefined;\n\n        // o.time_from_start = 0\n        // o.cur_ani_index = 1\n        //\n        // o.ani_scene_node = nil\n        // o.enable_play_animated = false\n\n        // PubSub.subscribe(PlatformScene.path + BaseAction.path + 'action.loaded', this.doWhenModelIsLoaded.bind(this));\n        // PubSub.subscribe(PlatformScene.path + BaseAction.path + 'action.picked', this.doWhenModelPicked.bind(this));\n\n    }\n\n    setup() {\n        PubSub.subscribe(this.sceneName + 'pick', this.doWhenModelPicked.bind(this));\n        PubSub.subscribe(this.sceneName + 'loaded', this.doWhenModelIsLoaded.bind(this));\n        // PubSub.subscribe(this.sceneName + 'animate', this.animate.bind(this));\n    }\n\n    destory() {\n        PubSub.unsubscribe(this.sceneName + 'pick');\n        PubSub.unsubscribe(this.sceneName + 'loaded');\n    }\n\n    //todo:/**/\n    doWhenModelIsLoaded(event,data) {\n        //data.modelName\n        //todo:1  by this.triggerName 2tiggername\n        if (this.triggerName !== undefined) {\n            this.node = undefined;\n        }\n\n        if (this.node !== undefined && this.triggerType === TriggerType.Auto) {\n            this.doWhenAutoExecute();\n        }\n\n    }\n\n    //todo:/**/\n    doWhenModelPicked(event, data) {\n        if (data.name instanceof String) {\n            // if (param.name === null || param.name.length === 0) {\n            console.log('pick name error :: ' + data.name);\n            return;\n        }\n\n        if (data.type instanceof String) {\n            console.log('pick type error');\n            return;\n        }\n\n        if (data.name !== this.triggerName) { // name is unmatch\n            return;\n        }\n\n        if (data.type !== this.triggerType) { // type is unmatch\n            return;\n        }\n\n        switch (this.triggerType) {\n            case TriggerType.Single:\n                this.doWhenSingleClick(data);\n                break;\n            case TriggerType.Double:\n                this.doWhenDoubleClick(data);\n                break;\n            default:\n                console.log('triggerType:: ' + this.triggerType);\n        }\n\n    }\n\n    doWhenAutoExecute(param) {\n\n    }\n\n    doWhenSingleClick(param) {\n\n    }\n\n    doWhenDoubleClick(param) {\n\n    }\n\n}\n\nBaseAction.path = 'BaseAction';\nexport default BaseAction;","import BaseAction from \"./BaseAction\";\nimport PlatformScene from \"../PlatformScene\";\nimport PubSub from \"pubsub-js\";\n\n/*  */\nclass PlatformAction extends BaseAction {\n\n    constructor(config) {\n        super(config);\n        this.sceneName = PlatformScene.path;\n        this.setup();\n    }\n\n    doWhenSingleClick(param) {\n        super.doWhenSingleClick(param);\n        if (this.funcName === this.pop_video.name){\n            this.pop_video(this.param);\n        } else {\n            console.log('There is no funcation name of ' + this.funcName );\n        }\n    }\n\n    pop_video(param) {\n\n        let id = param.id;\n        let src = param.src || '';\n//        console.log('pop_video id is ' + id + ' src is ' + src );\n        PubSub.publish(PlatformScene.path + 'pop_video', {id: id, src: src});\n    }\n\n}\n\nPlatformAction.path = 'PlatformAction';\nexport default PlatformAction;","const globalDate = {\n    sceneManager: null,\n    Application: null,\n    EventDispatcher: null\n};\n\nconst get=(key)=>{\n    return globalDate[key]\n};\n\nconst set=(key,val)=>{\n    globalDate[key]=val;\n};\n\nexport {get,set}\n","import PubSub from \"pubsub-js\";\nimport {get as getGlobal} from \"../../utils/globalData\";\n\nexport var AnimatonsType = {\n    unknow: 'unknow',// \n    auto: 'auto'   // \n    , custom: 'custom' // \n};\n\nclass BaseSceneAnimation {\n\n    constructor(config) {\n        this.config = config;\n        this.sceneName = undefined;\n        this.clipsAndActions = [];\n        this.scene = undefined;\n    }\n\n    doWhenModelLoaded(event, data) {\n\n        const sceneManager = getGlobal('sceneManager');\n\n        this.scene = sceneManager.currentGltf.scene;\n\n        let that = this;\n        let animations = this.config;\n        if (animations instanceof Array) {\n            animations.forEach(function (value, index) {\n                that.parser(value);//.bind(that);\n            });\n        }\n\n        this.mixer = sceneManager.mixer;\n        this.mixer.addEventListener('loop', function (e) {\n            that.loop(e);\n        });\n\n        this.mixer.addEventListener('finished', function (e) {\n            console.log('', e);\n            that.finished(e)\n        });\n\n    }\n\n    paserWhenCustom(config, clipAndAction) {\n\n    }\n\n    animate(event, data) {\n        // console.log('BaseScene.animate' + data.delta + ' ' + data.isLoaded);\n        if (data.delta === null || data.delta === undefined) {\n            console.log('BaseAniamtion.animate delta is null or undefined');\n            return;\n        }\n        if (data.isLoaded) {\n            this.updateWhenModelLoaded(data.delta);\n        } else {\n            this.updateWhenModelUnLoaded(data.delta);\n        }\n    }\n\n    updateWhenModelLoaded(delta) {\n        //todo: animationAction\n\n    }\n\n    updateWhenModelUnLoaded(delta) {\n\n    }\n\n    // --\n\n    setup() {\n        if (this.sceneName === undefined) {\n            console.error('BaseAnimation.sceneName is undefined')\n        }\n        PubSub.subscribe(this.sceneName + 'loaded', this.doWhenModelLoaded.bind(this));\n        PubSub.subscribe(this.sceneName + 'animate', this.animate.bind(this));\n    }\n\n    parser(config) {\n        const sceneManager = getGlobal('sceneManager');\n        let clipAndAction = sceneManager.getAnimationClipAndActionBy(config.name);\n        if (clipAndAction === undefined){return;}\n        if (clipAndAction.action === undefined){return;}\n        clipAndAction.action.stop();\n        if (config.type === AnimatonsType.auto) {\n            clipAndAction.action.play();\n        } else if (config.type === AnimatonsType.custom) {\n            // let\n            this.paserWhenCustom(config, clipAndAction);\n            // this.clipsAndActions.push(clipAndAction);\n        } else {\n            console.log('unknow AnimationsType :: ' + config.type);\n        }\n    }\n\n    play() {\n\n    }\n\n    finished(e) {\n\n    }\n\n    loop(e) {\n\n    }\n\n}\n\nexport default BaseSceneAnimation;\n\n// export var AnimatonsLoopStyles = {\n//     unknow: 'unknow',// \n//     once: 'once'   // \n//     , repeat: 'repeat' // n n repeatcount \n//     , pingpong: 'pingpong' // \n// };\n// PubSub.subscribe(this.sceneName + 'loadedFromCache', this.doWhenModelLoadedFromCache.bind(this));\n// doWhenModelLoadedFromCache(event, data) {}","import BaseSceneAnimation from \"./BaseSceneAnimation\";\nimport PlatformScene from \"../PlatformScene\";\nimport * as THREE from 'three'\nimport PubSub from \"pubsub-js\";\n\nclass PlatformSceneAnimation extends BaseSceneAnimation {\n    constructor(config) {\n        super(config);\n        // (3*60 - 23.667)/2\n        this.sceneName = PlatformScene.path;\n        this.action_Half_N = undefined;\n        this.action_Half_S = undefined;\n        this.node_Half_N = undefined;\n        this.node_Half_S = undefined;\n        this.time = 60;//3*\n        this.timeOfAnimation = 23.67;\n        this.timeMax = this.time;//3*\n        this.timeWillEnter = 10;//30\n        this.setup();\n    }\n\n    doWhenModelLoaded(event, data) {\n        super.doWhenModelLoaded(event, data);\n        this.node_Half_N = this.scene.getObjectByName('North_Tr_Dummy');\n        this.node_Half_N.visible = false;\n        this.node_Half_S = this.scene.getObjectByName('South_Tr_Dummy');\n        this.node_Half_S.visible = false;\n        this.play();\n    }\n\n    paserWhenCustom(config, clipAndAction) {\n        console.log('');\n        let name = config.name;\n        let action = clipAndAction.action;\n        if (name === 'Half_N') {\n            action.setLoop(THREE.LoopOnce);\n            this.action_Half_N = action;\n        } else if (name === 'Half_S') {\n            // action.startAt(0);\n            action.setLoop(THREE.LoopOnce);\n            this.action_Half_S = action;\n        }\n    }\n\n    updateWhenModelLoaded(delta) {\n\n        if (this.time >= 0) {\n            this.time = this.time - delta;\n        } else {\n            this.play();\n            this.time = this.timeMax;\n        }\n\n\n        // let current = ' ';\n        let current = '';\n        if (this.time <= this.timeMax && this.time > this.timeMax - this.timeOfAnimation ) {// \n            current += '';\n        } else if (this.time <= this.timeWillEnter ) {//\n            current += '';\n        } else {//\n            current += '' + Math.ceil(this.time/ 60) + '';\n        }\n\n        // let next = '' + (this.timeMax - this.time)/60 + '';\n        let next = Math.ceil((this.timeMax + this.time ) / 60);\n\n        PubSub.publish(PlatformScene.path + 'report', {current: current, next: next});\n\n    }\n\n    // ---\n\n    play() {\n        // super.play();\n\n        // this.action_Half_N.setDuration(3);\n        // this.action_Half_S.setDuration(3);\n\n        this.node_Half_S.visible = true;\n        this.playActionOnce(this.action_Half_S);\n\n    }\n\n    finished(e) {\n        if (e.action === this.action_Half_S) {\n            this.node_Half_S.visible = false;\n            this.node_Half_N.visible = true;\n            this.playActionOnce(this.action_Half_N);\n        } else if (e.action === this.action_Half_N) {\n            this.node_Half_N.visible = false;\n        }\n    }\n\n    playActionOnce(action, delay = 0) {\n        if (action !== undefined) {\n            action.reset();\n            action.setLoop(THREE.LoopOnce, undefined);\n            // action.startAt(delay);\n            action.play();\n        } else {\n            console.log('action is undefined');\n        }\n    }\n\n    playActionRepeat(action, delay = 0) {\n        if (action !== undefined) {\n            // action.reset();\n            action.setLoop(THREE.LoopRepeat, Infinity);\n            action.startAt(delay);\n            action.play();\n        } else {\n            console.log('action is undefined');\n        }\n    }\n\n}\n\nexport default PlatformSceneAnimation;","import BaseScene from './BaseScene'\nimport PlatformAction from \"./action/PlatformAction\";\nimport PlatformSceneAnimation from \"./animations/PlatformSceneAnimation\";\n\n\nclass PlatformScene extends BaseScene {\n\n    constructor(config) {\n\n        super(config);\n\n        this.sceneName = PlatformScene.path;\n\n        // parse actions\n        this.platformActions = [];\n        let that = this;\n        let actionList = config.sceneConfig.triggers.actions;\n        if (actionList instanceof Array){\n            actionList.forEach(function (value,index) {\n                let action = new PlatformAction(value);\n                that.platformActions.push(action);\n            });\n        }\n\n        this.sceneAniamtion = new PlatformSceneAnimation(this.config.sceneConfig.animations);\n\n        this.setup();\n\n    }\n\n    doWhenModelIsLoaded(event, data) {\n        // data.modelName\n        super.doWhenModelIsLoaded(event, data);\n    }\n\n    animate(event,data) {\n        // console.log('PlatformScene.animate' + data.delta + '  ' + data.isLoaded);\n    }\n\n    animateWhenModelLoaded(delta) {\n    }\n\n    animateWhenModelUnLoaded(delta) {\n    }\n\n}\n\nPlatformScene.path = 'platform.';\n\nexport default PlatformScene;","import BaseScene from './BaseScene'\nimport {get as getGlobal} from \"../utils/globalData\";\n\nclass DeviceScene extends BaseScene {\n\n    constructor(jsonObject) {\n        super(jsonObject);\n        this.sceneName = DeviceScene.path;\n        this.setup();\n    }\n\n    doWhenModelIsLoaded(event, data) {\n        // data.modelName\n        super.doWhenModelIsLoaded(event, data);\n        const sceneManager = getGlobal('sceneManager');\n        sceneManager.animateCamera(sceneManager.camera.position, sceneManager.controls.position0,{x:0.12,y:0.58627,z:5.5},{x:0,y:0,z:1},{x:0,y:0,z:0});\n        sceneManager.hideUnitWithOut('frame_unit');\n\n    }\n\n    doWhenModelLoadedFromCache(event, data) {\n        const sceneManager = getGlobal('sceneManager');\n        sceneManager.animateCamera(sceneManager.camera.position, sceneManager.controls.position0,{x:0.12,y:0.58627,z:5.5},{x:0,y:0,z:1},{x:0,y:0,z:0});\n        sceneManager.hideUnitWithOut('frame_unit');\n    }\n\n    animateWhenModelLoaded(delta) {\n    }\n\n    animateWhenModelUnLoaded(delta) {\n    }\n    //\n    // colorMapFilePath() { // return \"/source/textures/device/Frame_mat_Base_Color.jpg\";\n    //     if (this.config.sceneConfig.colorMapFilePath !== null) {\n    //         return this.config.sceneConfig.colorMapFilePath;\n    //     }\n    // }\n    //\n    // metallicMapFilePath() { // return \"/source/textures/device/Frame_mat_Metallic.jpg\";\n    //     if (this.config.sceneConfig.metallicMapFilePath !== null) {\n    //         return this.config.sceneConfig.metallicMapFilePath;\n    //     }\n    // }\n    //\n    // roughnessMapFilePath() { // return \"/source/textures/device/Frame_mat_Roughness.jpg\";\n    //     if (this.config.sceneConfig.roughnessMapFilePath !== null) {\n    //         return this.config.sceneConfig.roughnessMapFilePath;\n    //     }\n    // }\n}\n\nDeviceScene.path = 'deviceTVM.';\n\nexport default DeviceScene;","import http from '../../utils/http'\nimport PlatformScene from \"./PlatformScene\";\nimport DeviceScene from \"./DeviceScene\";\nimport PubSub from 'pubsub-js';\nimport jsonData from './config'\n\nclass Application {\n\n    constructor() {\n\n        this.sceneModels = [];\n        this.config = undefined;\n        this.platform = undefined;\n        this.deviceTVM = undefined;\n        this.configParser();\n        PubSub.immediateExceptions = true;\n\n    }\n\n    configParser() {\n\n        // http.get('/source/config.json')\n        //     .then(res => {\n        //         if (res.status === 200) {\n        //             console.log('config.json \\n' + res.data.pages);\n        //             this.parser(res.data.pages);\n        //         } else {\n        //             console.assert('config.json ');\n        //         }\n        //     });\n\n\n        this.config = jsonData.pages;\n        this.parser(this.config);\n        console.log('config.json \\n' + this.config);\n\n    }\n\n    parser(pagesJsonObject) {\n\n        let platform = new PlatformScene(pagesJsonObject.platform);\n        let device_tvm = new DeviceScene(pagesJsonObject.device_tvm);\n        this.platform = platform;\n        this.deviceTVM = device_tvm;\n        this.sceneModels.push(this.platform, this.deviceTVM);\n\n    }\n\n}\n\nApplication.path = 'application';\nexport default Application;\n\n","/**\n * @author Rich Tibbett / https://github.com/richtr\n * @author mrdoob / http://mrdoob.com/\n * @author Tony Parisi / http://www.tonyparisi.com/\n * @author Takahiro / https://github.com/takahirox\n * @author Don McCurdy / https://www.donmccurdy.com\n */\n\nimport {\n\tAnimationClip,\n\tBone,\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tColor,\n\tDirectionalLight,\n\tDoubleSide,\n\tFileLoader,\n\tFrontSide,\n\tGroup,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tInterpolant,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLine,\n\tLineBasicMaterial,\n\tLineLoop,\n\tLineSegments,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLoader,\n\tLoaderUtils,\n\tMaterial,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tMeshStandardMaterial,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPoints,\n\tPointsMaterial,\n\tPropertyBinding,\n\tQuaternionKeyframeTrack,\n\tRGBAFormat,\n\tRGBFormat,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSphere,\n\tSpotLight,\n\tTangentSpaceNormalMap,\n\tTextureLoader,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tVector2,\n\tVector3,\n\tVectorKeyframeTrack,\n\tsRGBEncoding\n} from \"three\";\n\nvar GLTFLoader = ( function () {\n\n\tfunction GLTFLoader( manager ) {\n\n\t\tLoader.call( this, manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ddsLoader = null;\n\n\t}\n\n\tGLTFLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\t\tconstructor: GLTFLoader,\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar resourcePath;\n\n\t\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\t\tresourcePath = this.resourcePath;\n\n\t\t\t} else if ( this.path !== '' ) {\n\n\t\t\t\tresourcePath = this.path;\n\n\t\t\t} else {\n\n\t\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t\t}\n\n\t\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tvar _onError = function ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t};\n\n\t\t\tvar loader = new FileLoader( scope.manager );\n\n\t\t\tloader.setPath( this.path );\n\t\t\tloader.setResponseType( 'arraybuffer' );\n\n\t\t\tif ( scope.crossOrigin === 'use-credentials' ) {\n\n\t\t\t\tloader.setWithCredentials( true );\n\n\t\t\t}\n\n\t\t\tloader.load( url, function ( data ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t\t}, _onError );\n\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t_onError( e );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, _onError );\n\n\t\t},\n\n\t\tsetDRACOLoader: function ( dracoLoader ) {\n\n\t\t\tthis.dracoLoader = dracoLoader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetDDSLoader: function ( ddsLoader ) {\n\n\t\t\tthis.ddsLoader = ddsLoader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tparse: function ( data, path, onLoad, onError ) {\n\n\t\t\tvar content;\n\t\t\tvar extensions = {};\n\n\t\t\tif ( typeof data === 'string' ) {\n\n\t\t\t\tcontent = data;\n\n\t\t\t} else {\n\n\t\t\t\tvar magic = LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\n\n\t\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcontent = LoaderUtils.decodeText( new Uint8Array( data ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar json = JSON.parse( content );\n\n\t\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( json.extensionsUsed ) {\n\n\t\t\t\tfor ( var i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\t\tvar extensionName = json.extensionsUsed[ i ];\n\t\t\t\t\tvar extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_LIGHTS_PUNCTUAL:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFLightsExtension( json );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.MSFT_TEXTURE_DDS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureDDSExtension( this.ddsLoader );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 ) {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar parser = new GLTFParser( json, extensions, {\n\n\t\t\t\tpath: path || this.resourcePath || '',\n\t\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\t\tmanager: this.manager\n\n\t\t\t} );\n\n\t\t\tparser.parse( onLoad, onError );\n\n\t\t}\n\n\t} );\n\n\t/* GLTFREGISTRY */\n\n\tfunction GLTFRegistry() {\n\n\t\tvar objects = {};\n\n\t\treturn\t{\n\n\t\t\tget: function ( key ) {\n\n\t\t\t\treturn objects[ key ];\n\n\t\t\t},\n\n\t\t\tadd: function ( key, object ) {\n\n\t\t\t\tobjects[ key ] = object;\n\n\t\t\t},\n\n\t\t\tremove: function ( key ) {\n\n\t\t\t\tdelete objects[ key ];\n\n\t\t\t},\n\n\t\t\tremoveAll: function () {\n\n\t\t\t\tobjects = {};\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t/*********************************/\n\t/********** EXTENSIONS ***********/\n\t/*********************************/\n\n\tvar EXTENSIONS = {\n\t\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\t\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\t\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\t\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n\t\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\t\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\t\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\t\tMSFT_TEXTURE_DDS: 'MSFT_texture_dds'\n\t};\n\n\t/**\n\t * DDS Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds\n\t *\n\t */\n\tfunction GLTFTextureDDSExtension( ddsLoader ) {\n\n\t\tif ( ! ddsLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.MSFT_TEXTURE_DDS;\n\t\tthis.ddsLoader = ddsLoader;\n\n\t}\n\n\t/**\n\t * Punctual Lights Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n\t */\n\tfunction GLTFLightsExtension( json ) {\n\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\tvar extension = ( json.extensions && json.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ] ) || {};\n\t\tthis.lightDefs = extension.lights || [];\n\n\t}\n\n\tGLTFLightsExtension.prototype.loadLight = function ( lightIndex ) {\n\n\t\tvar lightDef = this.lightDefs[ lightIndex ];\n\t\tvar lightNode;\n\n\t\tvar color = new Color( 0xffffff );\n\t\tif ( lightDef.color !== undefined ) color.fromArray( lightDef.color );\n\n\t\tvar range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type, \"' + lightDef.type + '\".' );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tlightNode.decay = 2;\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = lightDef.name || ( 'light_' + lightIndex );\n\n\t\treturn Promise.resolve( lightNode );\n\n\t};\n\n\t/**\n\t * Unlit Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n\t */\n\tfunction GLTFMaterialsUnlitExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tGLTFMaterialsUnlitExtension.prototype.getMaterialType = function () {\n\n\t\treturn MeshBasicMaterial;\n\n\t};\n\n\tGLTFMaterialsUnlitExtension.prototype.extendParams = function ( materialParams, materialDef, parser ) {\n\n\t\tvar pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/* BINARY EXTENSION */\n\tvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\n\tvar BINARY_EXTENSION_HEADER_LENGTH = 12;\n\tvar BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\n\tfunction GLTFBinaryExtension( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tvar headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\n\t\tthis.header = {\n\t\t\tmagic: LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tvar chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tvar chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkView.byteLength ) {\n\n\t\t\tvar chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tvar chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tvar contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = LoaderUtils.decodeText( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tvar byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * DRACO Mesh Compression Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n\t */\n\tfunction GLTFDracoMeshCompressionExtension( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tGLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function ( primitive, parser ) {\n\n\t\tvar json = this.json;\n\t\tvar dracoLoader = this.dracoLoader;\n\t\tvar bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tvar gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tvar threeAttributeMap = {};\n\t\tvar attributeNormalizedMap = {};\n\t\tvar attributeTypeMap = {};\n\n\t\tfor ( var attributeName in gltfAttributeMap ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( attributeName in primitive.attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tvar accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tvar componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( var attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tvar attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tvar normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Texture Transform Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n\t */\n\tfunction GLTFTextureTransformExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\tGLTFTextureTransformExtension.prototype.extendTexture = function ( texture, transform ) {\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.' );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t};\n\n\t/**\n\t * Specular-Glossiness Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n\t */\n\n\t/**\n\t * A sub class of StandardMaterial with some of the functionality\n\t * changed via the `onBeforeCompile` callback\n\t * @pailhead\n\t */\n\n\tfunction GLTFMeshStandardSGMaterial( params ) {\n\n\t\tMeshStandardMaterial.call( this );\n\n\t\tthis.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t//various chunks that need replacing\n\t\tvar specularMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tuniform sampler2D specularMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tuniform sampler2D glossinessMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar specularMapFragmentChunk = [\n\t\t\t'vec3 specularFactor = specular;',\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n\t\t\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\n\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapFragmentChunk = [\n\t\t\t'float glossinessFactor = glossiness;',\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar lightPhysicalFragmentChunk = [\n\t\t\t'PhysicalMaterial material;',\n\t\t\t'material.diffuseColor = diffuseColor.rgb;',\n\t\t\t'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n\t\t\t'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n\t\t\t'material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.',\n\t\t\t'material.specularRoughness += geometryRoughness;',\n\t\t\t'material.specularRoughness = min( material.specularRoughness, 1.0 );',\n\t\t\t'material.specularColor = specularFactor.rgb;',\n\t\t].join( '\\n' );\n\n\t\tvar uniforms = {\n\t\t\tspecular: { value: new Color().setHex( 0xffffff ) },\n\t\t\tglossiness: { value: 1 },\n\t\t\tspecularMap: { value: null },\n\t\t\tglossinessMap: { value: null }\n\t\t};\n\n\t\tthis._extraUniforms = uniforms;\n\n\t\t// please see #14031 or #13198 for an alternate approach\n\t\tthis.onBeforeCompile = function ( shader ) {\n\n\t\t\tfor ( var uniformName in uniforms ) {\n\n\t\t\t\tshader.uniforms[ uniformName ] = uniforms[ uniformName ];\n\n\t\t\t}\n\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( 'uniform float roughness;', 'uniform vec3 specular;' );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( 'uniform float metalness;', 'uniform float glossiness;' );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\n\n\t\t};\n\n\t\t/*eslint-disable*/\n\t\tObject.defineProperties(\n\t\t\tthis,\n\t\t\t{\n\t\t\t\tspecular: {\n\t\t\t\t\tget: function () { return uniforms.specular.value; },\n\t\t\t\t\tset: function ( v ) { uniforms.specular.value = v; }\n\t\t\t\t},\n\t\t\t\tspecularMap: {\n\t\t\t\t\tget: function () { return uniforms.specularMap.value; },\n\t\t\t\t\tset: function ( v ) { uniforms.specularMap.value = v; }\n\t\t\t\t},\n\t\t\t\tglossiness: {\n\t\t\t\t\tget: function () { return uniforms.glossiness.value; },\n\t\t\t\t\tset: function ( v ) { uniforms.glossiness.value = v; }\n\t\t\t\t},\n\t\t\t\tglossinessMap: {\n\t\t\t\t\tget: function () { return uniforms.glossinessMap.value; },\n\t\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\t\tuniforms.glossinessMap.value = v;\n\t\t\t\t\t\t//how about something like this - @pailhead\n\t\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\t\tthis.defines.USE_GLOSSINESSMAP = '';\n\t\t\t\t\t\t\t// set USE_ROUGHNESSMAP to enable vUv\n\t\t\t\t\t\t\tthis.defines.USE_ROUGHNESSMAP = '';\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tdelete this.defines.USE_ROUGHNESSMAP;\n\t\t\t\t\t\t\tdelete this.defines.USE_GLOSSINESSMAP;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\t/*eslint-enable*/\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\n\t\tthis.setValues( params );\n\n\t}\n\n\tGLTFMeshStandardSGMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\n\tGLTFMeshStandardSGMaterial.prototype.constructor = GLTFMeshStandardSGMaterial;\n\n\tGLTFMeshStandardSGMaterial.prototype.copy = function ( source ) {\n\n\t\tMeshStandardMaterial.prototype.copy.call( this, source );\n\t\tthis.specularMap = source.specularMap;\n\t\tthis.specular.copy( source.specular );\n\t\tthis.glossinessMap = source.glossinessMap;\n\t\tthis.glossiness = source.glossiness;\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\t\treturn this;\n\n\t};\n\n\tfunction GLTFMaterialsPbrSpecularGlossinessExtension() {\n\n\t\treturn {\n\n\t\t\tname: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\n\n\t\t\tspecularGlossinessParams: [\n\t\t\t\t'color',\n\t\t\t\t'map',\n\t\t\t\t'lightMap',\n\t\t\t\t'lightMapIntensity',\n\t\t\t\t'aoMap',\n\t\t\t\t'aoMapIntensity',\n\t\t\t\t'emissive',\n\t\t\t\t'emissiveIntensity',\n\t\t\t\t'emissiveMap',\n\t\t\t\t'bumpMap',\n\t\t\t\t'bumpScale',\n\t\t\t\t'normalMap',\n\t\t\t\t'normalMapType',\n\t\t\t\t'displacementMap',\n\t\t\t\t'displacementScale',\n\t\t\t\t'displacementBias',\n\t\t\t\t'specularMap',\n\t\t\t\t'specular',\n\t\t\t\t'glossinessMap',\n\t\t\t\t'glossiness',\n\t\t\t\t'alphaMap',\n\t\t\t\t'envMap',\n\t\t\t\t'envMapIntensity',\n\t\t\t\t'refractionRatio',\n\t\t\t],\n\n\t\t\tgetMaterialType: function () {\n\n\t\t\t\treturn GLTFMeshStandardSGMaterial;\n\n\t\t\t},\n\n\t\t\textendParams: function ( materialParams, materialDef, parser ) {\n\n\t\t\t\tvar pbrSpecularGlossiness = materialDef.extensions[ this.name ];\n\n\t\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\n\n\t\t\t\t\tvar array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\n\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', pbrSpecularGlossiness.diffuseTexture ) );\n\n\t\t\t\t}\n\n\t\t\t\tmaterialParams.emissive = new Color( 0.0, 0.0, 0.0 );\n\t\t\t\tmaterialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\t\t\tmaterialParams.specular = new Color( 1.0, 1.0, 1.0 );\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\n\n\t\t\t\t\tmaterialParams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\n\n\t\t\t\t\tvar specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'glossinessMap', specGlossMapDef ) );\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'specularMap', specGlossMapDef ) );\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t},\n\n\t\t\tcreateMaterial: function ( materialParams ) {\n\n\t\t\t\tvar material = new GLTFMeshStandardSGMaterial( materialParams );\n\t\t\t\tmaterial.fog = true;\n\n\t\t\t\tmaterial.color = materialParams.color;\n\n\t\t\t\tmaterial.map = materialParams.map === undefined ? null : materialParams.map;\n\n\t\t\t\tmaterial.lightMap = null;\n\t\t\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\t\t\tmaterial.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n\t\t\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\t\t\tmaterial.emissive = materialParams.emissive;\n\t\t\t\tmaterial.emissiveIntensity = 1.0;\n\t\t\t\tmaterial.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n\n\t\t\t\tmaterial.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n\t\t\t\tmaterial.bumpScale = 1;\n\n\t\t\t\tmaterial.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n\t\t\t\tmaterial.normalMapType = TangentSpaceNormalMap;\n\n\t\t\t\tif ( materialParams.normalScale ) material.normalScale = materialParams.normalScale;\n\n\t\t\t\tmaterial.displacementMap = null;\n\t\t\t\tmaterial.displacementScale = 1;\n\t\t\t\tmaterial.displacementBias = 0;\n\n\t\t\t\tmaterial.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n\t\t\t\tmaterial.specular = materialParams.specular;\n\n\t\t\t\tmaterial.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n\t\t\t\tmaterial.glossiness = materialParams.glossiness;\n\n\t\t\t\tmaterial.alphaMap = null;\n\n\t\t\t\tmaterial.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n\t\t\t\tmaterial.envMapIntensity = 1.0;\n\n\t\t\t\tmaterial.refractionRatio = 0.98;\n\n\t\t\t\treturn material;\n\n\t\t\t},\n\n\t\t};\n\n\t}\n\n\t/**\n\t * Mesh Quantization Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n\t */\n\tfunction GLTFMeshQuantizationExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n\t/*********************************/\n\t/********** INTERPOLATION ********/\n\t/*********************************/\n\n\t// Spline Interpolation\n\t// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n\tfunction GLTFCubicSplineInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tGLTFCubicSplineInterpolant.prototype = Object.create( Interpolant.prototype );\n\tGLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;\n\n\tGLTFCubicSplineInterpolant.prototype.copySampleValue_ = function ( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( var i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\tGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer;\n\t\tvar values = this.sampleValues;\n\t\tvar stride = this.valueSize;\n\n\t\tvar stride2 = stride * 2;\n\t\tvar stride3 = stride * 3;\n\n\t\tvar td = t1 - t0;\n\n\t\tvar p = ( t - t0 ) / td;\n\t\tvar pp = p * p;\n\t\tvar ppp = pp * p;\n\n\t\tvar offset1 = i1 * stride3;\n\t\tvar offset0 = offset1 - stride3;\n\n\t\tvar s2 = - 2 * ppp + 3 * pp;\n\t\tvar s3 = ppp - pp;\n\t\tvar s0 = 1 - s2;\n\t\tvar s1 = s3 - pp + p;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( var i = 0; i !== stride; i ++ ) {\n\n\t\t\tvar p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tvar m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tvar p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tvar m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\t/*********************************/\n\t/********** INTERNALS ************/\n\t/*********************************/\n\n\t/* CONSTANTS */\n\n\tvar WEBGL_CONSTANTS = {\n\t\tFLOAT: 5126,\n\t\t//FLOAT_MAT2: 35674,\n\t\tFLOAT_MAT3: 35675,\n\t\tFLOAT_MAT4: 35676,\n\t\tFLOAT_VEC2: 35664,\n\t\tFLOAT_VEC3: 35665,\n\t\tFLOAT_VEC4: 35666,\n\t\tLINEAR: 9729,\n\t\tREPEAT: 10497,\n\t\tSAMPLER_2D: 35678,\n\t\tPOINTS: 0,\n\t\tLINES: 1,\n\t\tLINE_LOOP: 2,\n\t\tLINE_STRIP: 3,\n\t\tTRIANGLES: 4,\n\t\tTRIANGLE_STRIP: 5,\n\t\tTRIANGLE_FAN: 6,\n\t\tUNSIGNED_BYTE: 5121,\n\t\tUNSIGNED_SHORT: 5123\n\t};\n\n\tvar WEBGL_COMPONENT_TYPES = {\n\t\t5120: Int8Array,\n\t\t5121: Uint8Array,\n\t\t5122: Int16Array,\n\t\t5123: Uint16Array,\n\t\t5125: Uint32Array,\n\t\t5126: Float32Array\n\t};\n\n\tvar WEBGL_FILTERS = {\n\t\t9728: NearestFilter,\n\t\t9729: LinearFilter,\n\t\t9984: NearestMipmapNearestFilter,\n\t\t9985: LinearMipmapNearestFilter,\n\t\t9986: NearestMipmapLinearFilter,\n\t\t9987: LinearMipmapLinearFilter\n\t};\n\n\tvar WEBGL_WRAPPINGS = {\n\t\t33071: ClampToEdgeWrapping,\n\t\t33648: MirroredRepeatWrapping,\n\t\t10497: RepeatWrapping\n\t};\n\n\tvar WEBGL_TYPE_SIZES = {\n\t\t'SCALAR': 1,\n\t\t'VEC2': 2,\n\t\t'VEC3': 3,\n\t\t'VEC4': 4,\n\t\t'MAT2': 4,\n\t\t'MAT3': 9,\n\t\t'MAT4': 16\n\t};\n\n\tvar ATTRIBUTES = {\n\t\tPOSITION: 'position',\n\t\tNORMAL: 'normal',\n\t\tTANGENT: 'tangent',\n\t\tTEXCOORD_0: 'uv',\n\t\tTEXCOORD_1: 'uv2',\n\t\tCOLOR_0: 'color',\n\t\tWEIGHTS_0: 'skinWeight',\n\t\tJOINTS_0: 'skinIndex',\n\t};\n\n\tvar PATH_PROPERTIES = {\n\t\tscale: 'scale',\n\t\ttranslation: 'position',\n\t\trotation: 'quaternion',\n\t\tweights: 'morphTargetInfluences'\n\t};\n\n\tvar INTERPOLATION = {\n\t\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\t\tLINEAR: InterpolateLinear,\n\t\tSTEP: InterpolateDiscrete\n\t};\n\n\tvar ALPHA_MODES = {\n\t\tOPAQUE: 'OPAQUE',\n\t\tMASK: 'MASK',\n\t\tBLEND: 'BLEND'\n\t};\n\n\tvar MIME_TYPE_FORMATS = {\n\t\t'image/png': RGBAFormat,\n\t\t'image/jpeg': RGBFormat\n\t};\n\n\t/* UTILITY FUNCTIONS */\n\n\tfunction resolveURL( url, path ) {\n\n\t\t// Invalid URL\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\n\n\t\t// Host Relative URL\n\t\tif ( /^https?:\\/\\//i.test( path ) && /^\\//.test( url ) ) {\n\n\t\t\tpath = path.replace( /(^https?:\\/\\/[^\\/]+).*/i, '$1' );\n\n\t\t}\n\n\t\t// Absolute URL http://,https://,//\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\n\n\t\t// Data URI\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\n\n\t\t// Blob URL\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\n\n\t\t// Relative URL\n\t\treturn path + url;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n\t */\n\tfunction createDefaultMaterial( cache ) {\n\n\t\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\t\tcolor: 0xFFFFFF,\n\t\t\t\temissive: 0x000000,\n\t\t\t\tmetalness: 1,\n\t\t\t\troughness: 1,\n\t\t\t\ttransparent: false,\n\t\t\t\tdepthTest: true,\n\t\t\t\tside: FrontSide\n\t\t\t} );\n\n\t\t}\n\n\t\treturn cache[ 'DefaultMaterial' ];\n\n\t}\n\n\tfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t\t// Add unknown glTF extensions to an object's userData.\n\n\t\tfor ( var name in objectDef.extensions ) {\n\n\t\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * @param {Object3D|Material|BufferGeometry} object\n\t * @param {GLTF.definition} gltfDef\n\t */\n\tfunction assignExtrasToUserData( object, gltfDef ) {\n\n\t\tif ( gltfDef.extras !== undefined ) {\n\n\t\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n\t *\n\t * @param {BufferGeometry} geometry\n\t * @param {Array<GLTF.Target>} targets\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addMorphTargets( geometry, targets, parser ) {\n\n\t\tvar hasMorphPosition = false;\n\t\tvar hasMorphNormal = false;\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\n\t\t\tif ( hasMorphPosition && hasMorphNormal ) break;\n\n\t\t}\n\n\t\tif ( ! hasMorphPosition && ! hasMorphNormal ) return Promise.resolve( geometry );\n\n\t\tvar pendingPositionAccessors = [];\n\t\tvar pendingNormalAccessors = [];\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( hasMorphPosition ) {\n\n\t\t\t\tvar pendingAccessor = target.POSITION !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t\t: geometry.attributes.position;\n\n\t\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t\tif ( hasMorphNormal ) {\n\n\t\t\t\tvar pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t\t: geometry.attributes.normal;\n\n\t\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( [\n\t\t\tPromise.all( pendingPositionAccessors ),\n\t\t\tPromise.all( pendingNormalAccessors )\n\t\t] ).then( function ( accessors ) {\n\n\t\t\tvar morphPositions = accessors[ 0 ];\n\t\t\tvar morphNormals = accessors[ 1 ];\n\n\t\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t\treturn geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {Mesh} mesh\n\t * @param {GLTF.Mesh} meshDef\n\t */\n\tfunction updateMorphTargets( mesh, meshDef ) {\n\n\t\tmesh.updateMorphTargets();\n\n\t\tif ( meshDef.weights !== undefined ) {\n\n\t\t\tfor ( var i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\t\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\t\tvar targetNames = meshDef.extras.targetNames;\n\n\t\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\t\tfor ( var i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createPrimitiveKey( primitiveDef ) {\n\n\t\tvar dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\t\tvar geometryKey;\n\n\t\tif ( dracoExtension ) {\n\n\t\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t\t} else {\n\n\t\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t\t}\n\n\t\treturn geometryKey;\n\n\t}\n\n\tfunction createAttributesKey( attributes ) {\n\n\t\tvar attributesKey = '';\n\n\t\tvar keys = Object.keys( attributes ).sort();\n\n\t\tfor ( var i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t\t}\n\n\t\treturn attributesKey;\n\n\t}\n\n\t/* GLTF PARSER */\n\n\tfunction GLTFParser( json, extensions, options ) {\n\n\t\tthis.json = json || {};\n\t\tthis.extensions = extensions || {};\n\t\tthis.options = options || {};\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tGLTFParser.prototype.parse = function ( onLoad, onError ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis.markDefs();\n\n\t\tPromise.all( [\n\n\t\t\tthis.getDependencies( 'scene' ),\n\t\t\tthis.getDependencies( 'animation' ),\n\t\t\tthis.getDependencies( 'camera' ),\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\tonLoad( result );\n\n\t\t} ).catch( onError );\n\n\t};\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\tGLTFParser.prototype.markDefs = function () {\n\n\t\tvar nodeDefs = this.json.nodes || [];\n\t\tvar skinDefs = this.json.skins || [];\n\t\tvar meshDefs = this.json.meshes || [];\n\n\t\tvar meshReferences = {};\n\t\tvar meshUses = {};\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tvar joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( var i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Meshes can (and should) be reused by multiple nodes in a glTF asset. To\n\t\t// avoid having more than one Mesh with the same name, count\n\t\t// references and rename instances below.\n\t\t//\n\t\t// Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tif ( meshReferences[ nodeDef.mesh ] === undefined ) {\n\n\t\t\t\t\tmeshReferences[ nodeDef.mesh ] = meshUses[ nodeDef.mesh ] = 0;\n\n\t\t\t\t}\n\n\t\t\t\tmeshReferences[ nodeDef.mesh ] ++;\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.json.meshReferences = meshReferences;\n\t\tthis.json.meshUses = meshUses;\n\n\t};\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tGLTFParser.prototype.getDependency = function ( type, index ) {\n\n\t\tvar cacheKey = type + ':' + index;\n\t\tvar dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this.loadNode( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this.loadMesh( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this.loadBufferView( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this.loadMaterial( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this.loadTexture( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this.loadAnimation( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'light':\n\t\t\t\t\tdependency = this.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].loadLight( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t};\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tGLTFParser.prototype.getDependencies = function ( type ) {\n\n\t\tvar dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tvar parser = this;\n\t\t\tvar defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBuffer = function ( bufferIndex ) {\n\n\t\tvar bufferDef = this.json.buffers[ bufferIndex ];\n\t\tvar loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tvar options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBufferView = function ( bufferViewIndex ) {\n\n\t\tvar bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tvar byteLength = bufferViewDef.byteLength || 0;\n\t\t\tvar byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tGLTFParser.prototype.loadAccessor = function ( accessorIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\n\t\tvar accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\n\t\t\t// information about attributes coming from another source (e.g. Draco\n\t\t\t// compression extension).\n\t\t\treturn Promise.resolve( null );\n\n\t\t}\n\n\t\tvar pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tvar bufferView = bufferViews[ 0 ];\n\n\t\t\tvar itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tvar TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tvar elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tvar itemBytes = elementBytes * itemSize;\n\t\t\tvar byteOffset = accessorDef.byteOffset || 0;\n\t\t\tvar byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tvar normalized = accessorDef.normalized === true;\n\t\t\tvar array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tvar ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tvar ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tvar ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tvar itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tvar TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tvar byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tvar byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tvar sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tvar sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture>}\n\t */\n\tGLTFParser.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar options = this.options;\n\t\tvar textureLoader = this.textureLoader;\n\n\t\tvar URL = window.URL || window.webkitURL;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tvar textureExtensions = textureDef.extensions || {};\n\n\t\tvar source;\n\n\t\tif ( textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] ) {\n\n\t\t\tsource = json.images[ textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].source ];\n\n\t\t} else {\n\n\t\t\tsource = json.images[ textureDef.source ];\n\n\t\t}\n\n\t\tvar sourceURI = source.uri;\n\t\tvar isObjectURL = false;\n\n\t\tif ( source.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tvar blob = new Blob( [ bufferView ], { type: source.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\t// Load Texture resource.\n\n\t\t\tvar loader = options.manager.getHandler( sourceURI );\n\n\t\t\tif ( ! loader ) {\n\n\t\t\t\tloader = textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ]\n\t\t\t\t\t? parser.extensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].ddsLoader\n\t\t\t\t\t: textureLoader;\n\n\t\t\t}\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tloader.load( resolveURL( sourceURI, options.path ), resolve, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\ttexture.flipY = false;\n\n\t\t\tif ( textureDef.name ) texture.name = textureDef.name;\n\n\t\t\t// Ignore unknown mime types, like DDS files.\n\t\t\tif ( source.mimeType in MIME_TYPE_FORMATS ) {\n\n\t\t\t\ttexture.format = MIME_TYPE_FORMATS[ source.mimeType ];\n\n\t\t\t}\n\n\t\t\tvar samplers = json.samplers || {};\n\t\t\tvar sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise}\n\t */\n\tGLTFParser.prototype.assignTexture = function ( materialParams, mapName, mapDef ) {\n\n\t\tvar parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\tif ( ! texture.isCompressedTexture ) {\n\n\t\t\t\tswitch ( mapName ) {\n\n\t\t\t\t\tcase 'aoMap':\n\t\t\t\t\tcase 'emissiveMap':\n\t\t\t\t\tcase 'metalnessMap':\n\t\t\t\t\tcase 'normalMap':\n\t\t\t\t\tcase 'roughnessMap':\n\t\t\t\t\t\ttexture.format = RGBFormat;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n\t\t\t// However, we will copy UV set 0 to UV set 1 on demand for aoMap\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord != 0 && ! ( mapName === 'aoMap' && mapDef.texCoord == 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.' );\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tvar transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accomodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tGLTFParser.prototype.assignFinalMaterial = function ( mesh ) {\n\n\t\tvar geometry = mesh.geometry;\n\t\tvar material = mesh.material;\n\t\tvar extensions = this.extensions;\n\n\t\tvar useVertexTangents = geometry.attributes.tangent !== undefined;\n\t\tvar useVertexColors = geometry.attributes.color !== undefined;\n\t\tvar useFlatShading = geometry.attributes.normal === undefined;\n\t\tvar useSkinning = mesh.isSkinnedMesh === true;\n\t\tvar useMorphTargets = Object.keys( geometry.morphAttributes ).length > 0;\n\t\tvar useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tvar cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tvar pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tvar cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tvar lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useVertexTangents || useVertexColors || useFlatShading || useSkinning || useMorphTargets ) {\n\n\t\t\tvar cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\n\t\t\tif ( useSkinning ) cacheKey += 'skinning:';\n\t\t\tif ( useVertexTangents ) cacheKey += 'vertex-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\t\t\tif ( useMorphTargets ) cacheKey += 'morph-targets:';\n\t\t\tif ( useMorphNormals ) cacheKey += 'morph-normals:';\n\n\t\t\tvar cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useSkinning ) cachedMaterial.skinning = true;\n\t\t\t\tif ( useVertexTangents ) cachedMaterial.vertexTangents = true;\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\t\t\t\tif ( useMorphTargets ) cachedMaterial.morphTargets = true;\n\t\t\t\tif ( useMorphNormals ) cachedMaterial.morphNormals = true;\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\t// workarounds for mesh and geometry\n\n\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\n\n\t\t\tgeometry.setAttribute( 'uv2', new BufferAttribute( geometry.attributes.uv.array, 2 ) );\n\n\t\t}\n\n\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\tif ( material.normalScale && ! useVertexTangents ) {\n\n\t\t\tmaterial.normalScale.y = - material.normalScale.y;\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tGLTFParser.prototype.loadMaterial = function ( materialIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar materialDef = json.materials[ materialIndex ];\n\n\t\tvar materialType;\n\t\tvar materialParams = {};\n\t\tvar materialExtensions = materialDef.extensions || {};\n\n\t\tvar pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\n\n\t\t\tvar sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\n\t\t\tmaterialType = sgExtension.getMaterialType();\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tvar kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tmaterialType = MeshStandardMaterial;\n\n\t\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tvar alphaMode = materialDef.alphaMode;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t} else if ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tmaterialParams.normalScale.set( materialDef.normalTexture.scale, materialDef.normalTexture.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tmaterialParams.emissive = new Color().fromArray( materialDef.emissiveFactor );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tvar material;\n\n\t\t\tif ( materialType === GLTFMeshStandardSGMaterial ) {\n\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new materialType( materialParams );\n\n\t\t\t}\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\t\t\tif ( material.map ) material.map.encoding = sRGBEncoding;\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = sRGBEncoding;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t */\n\tfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar box = new Box3();\n\n\t\tif ( attributes.POSITION !== undefined ) {\n\n\t\t\tvar accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\t\tvar min = accessor.min;\n\t\t\tvar max = accessor.max;\n\n\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\tbox.set(\n\t\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar targets = primitiveDef.targets;\n\n\t\tif ( targets !== undefined ) {\n\n\t\t\tvar vector = new Vector3();\n\n\t\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\t\tvar accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\t\tvar min = accessor.min;\n\t\t\t\t\tvar max = accessor.max;\n\n\t\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\t\t\t\t\t\tbox.expandByVector( vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.boundingBox = box;\n\n\t\tvar sphere = new Sphere();\n\n\t\tbox.getCenter( sphere.center );\n\t\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\t\tgeometry.boundingSphere = sphere;\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar pending = [];\n\n\t\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t\t.then( function ( accessor ) {\n\n\t\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tfor ( var gltfAttributeName in attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t\t}\n\n\t\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\t\tvar accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\t\tgeometry.setIndex( accessor );\n\n\t\t\t} );\n\n\t\t\tpending.push( accessor );\n\n\t\t}\n\n\t\tassignExtrasToUserData( geometry, primitiveDef );\n\n\t\tcomputeBounds( geometry, primitiveDef, parser );\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\treturn primitiveDef.targets !== undefined\n\t\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t\t: geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {Number} drawMode\n\t * @return {BufferGeometry}\n\t */\n\tfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\t\tvar index = geometry.getIndex();\n\n\t\t// generate index if not present\n\n\t\tif ( index === null ) {\n\n\t\t\tvar indices = [];\n\n\t\t\tvar position = geometry.getAttribute( 'position' );\n\n\t\t\tif ( position !== undefined ) {\n\n\t\t\t\tfor ( var i = 0; i < position.count; i ++ ) {\n\n\t\t\t\t\tindices.push( i );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setIndex( indices );\n\t\t\t\tindex = geometry.getIndex();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar numberOfTriangles = index.count - 2;\n\t\tvar newIndices = [];\n\n\t\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t\t// gl.TRIANGLE_FAN\n\n\t\t\tfor ( var i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// gl.TRIANGLE_STRIP\n\n\t\t\tfor ( var i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t\t}\n\n\t\t// build final geometry\n\n\t\tvar newGeometry = geometry.clone();\n\t\tnewGeometry.setIndex( newIndices );\n\n\t\treturn newGeometry;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tGLTFParser.prototype.loadGeometries = function ( primitives ) {\n\n\t\tvar parser = this;\n\t\tvar extensions = this.extensions;\n\t\tvar cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar primitive = primitives[ i ];\n\t\t\tvar cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tvar cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tvar geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tGLTFParser.prototype.loadMesh = function ( meshIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\n\t\tvar meshDef = json.meshes[ meshIndex ];\n\t\tvar primitives = meshDef.primitives;\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tvar materials = results.slice( 0, results.length - 1 );\n\t\t\tvar geometries = results[ results.length - 1 ];\n\n\t\t\tvar meshes = [];\n\n\t\t\tfor ( var i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tvar geometry = geometries[ i ];\n\t\t\t\tvar primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tvar mesh;\n\n\t\t\t\tvar material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See .markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true && ! mesh.geometry.attributes.skinWeight.normalized ) {\n\n\t\t\t\t\t\t// we normalize floating point skin weight array to fix malformed assets (see #15319)\n\t\t\t\t\t\t// it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = meshDef.name || ( 'mesh_' + meshIndex );\n\n\t\t\t\tif ( geometries.length > 1 ) mesh.name += '_' + i;\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tvar group = new Group();\n\n\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tGLTFParser.prototype.loadCamera = function ( cameraIndex ) {\n\n\t\tvar camera;\n\t\tvar cameraDef = this.json.cameras[ cameraIndex ];\n\t\tvar params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( params.xmag / - 2, params.xmag / 2, params.ymag / 2, params.ymag / - 2, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = cameraDef.name;\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Object>}\n\t */\n\tGLTFParser.prototype.loadSkin = function ( skinIndex ) {\n\n\t\tvar skinDef = this.json.skins[ skinIndex ];\n\n\t\tvar skinEntry = { joints: skinDef.joints };\n\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\n\n\t\t\treturn Promise.resolve( skinEntry );\n\n\t\t}\n\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\n\n\t\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\t\treturn skinEntry;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tGLTFParser.prototype.loadAnimation = function ( animationIndex ) {\n\n\t\tvar json = this.json;\n\n\t\tvar animationDef = json.animations[ animationIndex ];\n\n\t\tvar pendingNodes = [];\n\t\tvar pendingInputAccessors = [];\n\t\tvar pendingOutputAccessors = [];\n\t\tvar pendingSamplers = [];\n\t\tvar pendingTargets = [];\n\n\t\tfor ( var i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tvar channel = animationDef.channels[ i ];\n\t\t\tvar sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tvar target = channel.target;\n\t\t\tvar name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\t\t\tvar input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tvar output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar nodes = dependencies[ 0 ];\n\t\t\tvar inputAccessors = dependencies[ 1 ];\n\t\t\tvar outputAccessors = dependencies[ 2 ];\n\t\t\tvar samplers = dependencies[ 3 ];\n\t\t\tvar targets = dependencies[ 4 ];\n\n\t\t\tvar tracks = [];\n\n\t\t\tfor ( var i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tvar node = nodes[ i ];\n\t\t\t\tvar inputAccessor = inputAccessors[ i ];\n\t\t\t\tvar outputAccessor = outputAccessors[ i ];\n\t\t\t\tvar sampler = samplers[ i ];\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tnode.updateMatrix();\n\t\t\t\tnode.matrixAutoUpdate = true;\n\n\t\t\t\tvar TypedKeyframeTrack;\n\n\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tvar targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\tvar interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\t\t\t\tvar targetNames = [];\n\n\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\t\t\t// Node may be a Group (glTF mesh with several primitives) or a Mesh.\n\t\t\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\t\t\tif ( object.isMesh === true && object.morphTargetInfluences ) {\n\n\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetNames.push( targetName );\n\n\t\t\t\t}\n\n\t\t\t\tvar outputArray = outputAccessor.array;\n\n\t\t\t\tif ( outputAccessor.normalized ) {\n\n\t\t\t\t\tvar scale;\n\n\t\t\t\t\tif ( outputArray.constructor === Int8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 127;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 255;\n\n\t\t\t\t\t} else if ( outputArray.constructor == Int16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 32767;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 65535;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported output accessor component type.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar scaled = new Float32Array( outputArray.length );\n\n\t\t\t\t\tfor ( var j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t\t\t}\n\n\t\t\t\t\toutputArray = scaled;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar track = new TypedKeyframeTrack(\n\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\t\t\tinputAccessor.array,\n\t\t\t\t\t\toutputArray,\n\t\t\t\t\t\tinterpolation\n\t\t\t\t\t);\n\n\t\t\t\t\t// Override interpolation with custom factory method.\n\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\t\t\t\t\treturn new GLTFCubicSplineInterpolant( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( track );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\t\treturn new AnimationClip( name, undefined, tracks );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tGLTFParser.prototype.loadNode = function ( nodeIndex ) {\n\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar parser = this;\n\n\t\tvar meshReferences = json.meshReferences;\n\t\tvar meshUses = json.meshUses;\n\n\t\tvar nodeDef = json.nodes[ nodeIndex ];\n\n\t\treturn ( function () {\n\n\t\t\tvar pending = [];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\t\t\tvar node;\n\n\t\t\t\t\tif ( meshReferences[ nodeDef.mesh ] > 1 ) {\n\n\t\t\t\t\t\tvar instanceNum = meshUses[ nodeDef.mesh ] ++;\n\n\t\t\t\t\t\tnode = mesh.clone();\n\t\t\t\t\t\tnode.name += '_instance_' + instanceNum;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tnode = mesh;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\t\t\tfor ( var i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ) );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t&& nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ]\n\t\t\t\t&& nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].light !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'light', nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].light ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pending );\n\n\t\t}() ).then( function ( objects ) {\n\n\t\t\tvar node;\n\n\t\t\t// .isBone isn't in glTF spec. See .markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( var i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = PropertyBinding.sanitizeNodeName( nodeDef.name );\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tvar matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tGLTFParser.prototype.loadScene = function () {\n\n\t\t// scene node hierachy builder\n\n\t\tfunction buildNodeHierachy( nodeId, parentObject, json, parser ) {\n\n\t\t\tvar nodeDef = json.nodes[ nodeId ];\n\n\t\t\treturn parser.getDependency( 'node', nodeId ).then( function ( node ) {\n\n\t\t\t\tif ( nodeDef.skin === undefined ) return node;\n\n\t\t\t\t// build skeleton here as well\n\n\t\t\t\tvar skinEntry;\n\n\t\t\t\treturn parser.getDependency( 'skin', nodeDef.skin ).then( function ( skin ) {\n\n\t\t\t\t\tskinEntry = skin;\n\n\t\t\t\t\tvar pendingJoints = [];\n\n\t\t\t\t\tfor ( var i = 0, il = skinEntry.joints.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tpendingJoints.push( parser.getDependency( 'node', skinEntry.joints[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Promise.all( pendingJoints );\n\n\t\t\t\t} ).then( function ( jointNodes ) {\n\n\t\t\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\t\t\tif ( ! mesh.isMesh ) return;\n\n\t\t\t\t\t\tvar bones = [];\n\t\t\t\t\t\tvar boneInverses = [];\n\n\t\t\t\t\t\tfor ( var j = 0, jl = jointNodes.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tvar jointNode = jointNodes[ j ];\n\n\t\t\t\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\t\t\t\tvar mat = new Matrix4();\n\n\t\t\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\n\n\t\t\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[ j ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmesh.bind( new Skeleton( bones, boneInverses ), mesh.matrixWorld );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} );\n\n\t\t\t} ).then( function ( node ) {\n\n\t\t\t\t// build node hierachy\n\n\t\t\t\tparentObject.add( node );\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( nodeDef.children ) {\n\n\t\t\t\t\tvar children = nodeDef.children;\n\n\t\t\t\t\tfor ( var i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar child = children[ i ];\n\t\t\t\t\t\tpending.push( buildNodeHierachy( child, node, json, parser ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn function loadScene( sceneIndex ) {\n\n\t\t\tvar json = this.json;\n\t\t\tvar extensions = this.extensions;\n\t\t\tvar sceneDef = this.json.scenes[ sceneIndex ];\n\t\t\tvar parser = this;\n\n\t\t\t// Loader returns Group, not Scene.\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\t\tvar scene = new Group();\n\t\t\tif ( sceneDef.name ) scene.name = sceneDef.name;\n\n\t\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\t\tvar nodeIds = sceneDef.nodes || [];\n\n\t\t\tvar pending = [];\n\n\t\t\tfor ( var i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\t\tpending.push( buildNodeHierachy( nodeIds[ i ], scene, json, parser ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\t\treturn scene;\n\n\t\t\t} );\n\n\t\t};\n\n\t}();\n\n\treturn GLTFLoader;\n\n} )();\n\nexport { GLTFLoader };\n","/**\n * @author Nikos M. / https://github.com/foo123/\n */\n\nimport {\n\tDataTextureLoader,\n\tFloatType,\n\tHalfFloatType,\n\tLinearEncoding,\n\tLinearFilter,\n\tNearestFilter,\n\tRGBEEncoding,\n\tRGBEFormat,\n\tRGBFormat,\n\tUnsignedByteType\n} from \"three\";\n\n// https://github.com/mrdoob/three.js/issues/5552\n// http://en.wikipedia.org/wiki/RGBE_image_format\n\nvar RGBELoader = function ( manager ) {\n\n\tDataTextureLoader.call( this, manager );\n\n\tthis.type = UnsignedByteType;\n\n};\n\nRGBELoader.prototype = Object.assign( Object.create( DataTextureLoader.prototype ), {\n\n\tconstructor: RGBELoader,\n\n\t// adapted from http://www.graphics.cornell.edu/~bjw/rgbe.html\n\n\tparse: function ( buffer ) {\n\n\t\tlet type;\n\t\tlet format;\n\t\tlet data;\n\t\tvar\n\t\t\t/* return codes for rgbe routines */\n\t\t\t//RGBE_RETURN_SUCCESS = 0,\n\t\t\tRGBE_RETURN_FAILURE = - 1,\n\n\t\t\t/* default error routine.  change this to change error handling */\n\t\t\trgbe_read_error = 1,\n\t\t\trgbe_write_error = 2,\n\t\t\trgbe_format_error = 3,\n\t\t\trgbe_memory_error = 4,\n\t\t\trgbe_error = function ( rgbe_error_code, msg ) {\n\n\t\t\t\tswitch ( rgbe_error_code ) {\n\n\t\t\t\t\tcase rgbe_read_error: console.error( \"RGBELoader Read Error: \" + ( msg || '' ) );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase rgbe_write_error: console.error( \"RGBELoader Write Error: \" + ( msg || '' ) );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase rgbe_format_error: console.error( \"RGBELoader Bad File Format: \" + ( msg || '' ) );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\tcase rgbe_memory_error: console.error( \"RGBELoader: Error: \" + ( msg || '' ) );\n\n\t\t\t\t}\n\t\t\t\treturn RGBE_RETURN_FAILURE;\n\n\t\t\t},\n\n\t\t\t/* offsets to red, green, and blue components in a data (float) pixel */\n\t\t\t//RGBE_DATA_RED = 0,\n\t\t\t//RGBE_DATA_GREEN = 1,\n\t\t\t//RGBE_DATA_BLUE = 2,\n\n\t\t\t/* number of floats per pixel, use 4 since stored in rgba image format */\n\t\t\t//RGBE_DATA_SIZE = 4,\n\n\t\t\t/* flags indicating which fields in an rgbe_header_info are valid */\n\t\t\tRGBE_VALID_PROGRAMTYPE = 1,\n\t\t\tRGBE_VALID_FORMAT = 2,\n\t\t\tRGBE_VALID_DIMENSIONS = 4,\n\n\t\t\tNEWLINE = \"\\n\",\n\n\t\t\tfgets = function ( buffer, lineLimit, consume ) {\n\n\t\t\t\tlineLimit = ! lineLimit ? 1024 : lineLimit;\n\t\t\t\tvar p = buffer.pos,\n\t\t\t\t\ti = - 1, len = 0, s = '', chunkSize = 128,\n\t\t\t\t\tchunk = String.fromCharCode.apply( null, new Uint16Array( buffer.subarray( p, p + chunkSize ) ) )\n\t\t\t\t;\n\t\t\t\twhile ( ( 0 > ( i = chunk.indexOf( NEWLINE ) ) ) && ( len < lineLimit ) && ( p < buffer.byteLength ) ) {\n\n\t\t\t\t\ts += chunk; len += chunk.length;\n\t\t\t\t\tp += chunkSize;\n\t\t\t\t\tchunk += String.fromCharCode.apply( null, new Uint16Array( buffer.subarray( p, p + chunkSize ) ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( - 1 < i ) {\n\n\t\t\t\t\t/*for (i=l-1; i>=0; i--) {\n\t\t\t\t\t\tbyteCode = m.charCodeAt(i);\n\t\t\t\t\t\tif (byteCode > 0x7f && byteCode <= 0x7ff) byteLen++;\n\t\t\t\t\t\telse if (byteCode > 0x7ff && byteCode <= 0xffff) byteLen += 2;\n\t\t\t\t\t\tif (byteCode >= 0xDC00 && byteCode <= 0xDFFF) i--; //trail surrogate\n\t\t\t\t\t}*/\n\t\t\t\t\tif ( false !== consume ) buffer.pos += len + i + 1;\n\t\t\t\t\treturn s + chunk.slice( 0, i );\n\n\t\t\t\t}\n\t\t\t\treturn false;\n\n\t\t\t},\n\n\t\t\t/* minimal header reading.  modify if you want to parse more information */\n\t\t\tRGBE_ReadHeader = function ( buffer ) {\n\n\t\t\t\tvar line, match,\n\n\t\t\t\t\t// regexes to parse header info fields\n\t\t\t\t\tmagic_token_re = /^#\\?(\\S+)$/,\n\t\t\t\t\tgamma_re = /^\\s*GAMMA\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n\t\t\t\t\texposure_re = /^\\s*EXPOSURE\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n\t\t\t\t\tformat_re = /^\\s*FORMAT=(\\S+)\\s*$/,\n\t\t\t\t\tdimensions_re = /^\\s*\\-Y\\s+(\\d+)\\s+\\+X\\s+(\\d+)\\s*$/,\n\n\t\t\t\t\t// RGBE format header struct\n\t\t\t\t\theader = {\n\n\t\t\t\t\t\tvalid: 0, /* indicate which fields are valid */\n\n\t\t\t\t\t\tstring: '', /* the actual header string */\n\n\t\t\t\t\t\tcomments: '', /* comments found in header */\n\n\t\t\t\t\t\tprogramtype: 'RGBE', /* listed at beginning of file to identify it after \"#?\". defaults to \"RGBE\" */\n\n\t\t\t\t\t\tformat: '', /* RGBE format, default 32-bit_rle_rgbe */\n\n\t\t\t\t\t\tgamma: 1.0, /* image has already been gamma corrected with given gamma. defaults to 1.0 (no correction) */\n\n\t\t\t\t\t\texposure: 1.0, /* a value of 1.0 in an image corresponds to <exposure> watts/steradian/m^2. defaults to 1.0 */\n\n\t\t\t\t\t\twidth: 0, height: 0 /* image dimensions, width/height */\n\n\t\t\t\t\t};\n\n\t\t\t\tif ( buffer.pos >= buffer.byteLength || ! ( line = fgets( buffer ) ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_read_error, \"no header found\" );\n\n\t\t\t\t}\n\t\t\t\t/* if you want to require the magic token then uncomment the next line */\n\t\t\t\tif ( ! ( match = line.match( magic_token_re ) ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"bad initial token\" );\n\n\t\t\t\t}\n\t\t\t\theader.valid |= RGBE_VALID_PROGRAMTYPE;\n\t\t\t\theader.programtype = match[ 1 ];\n\t\t\t\theader.string += line + \"\\n\";\n\n\t\t\t\twhile ( true ) {\n\n\t\t\t\t\tline = fgets( buffer );\n\t\t\t\t\tif ( false === line ) break;\n\t\t\t\t\theader.string += line + \"\\n\";\n\n\t\t\t\t\tif ( '#' === line.charAt( 0 ) ) {\n\n\t\t\t\t\t\theader.comments += line + \"\\n\";\n\t\t\t\t\t\tcontinue; // comment line\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( gamma_re ) ) {\n\n\t\t\t\t\t\theader.gamma = parseFloat( match[ 1 ], 10 );\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( match = line.match( exposure_re ) ) {\n\n\t\t\t\t\t\theader.exposure = parseFloat( match[ 1 ], 10 );\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( match = line.match( format_re ) ) {\n\n\t\t\t\t\t\theader.valid |= RGBE_VALID_FORMAT;\n\t\t\t\t\t\theader.format = match[ 1 ];//'32-bit_rle_rgbe';\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( match = line.match( dimensions_re ) ) {\n\n\t\t\t\t\t\theader.valid |= RGBE_VALID_DIMENSIONS;\n\t\t\t\t\t\theader.height = parseInt( match[ 1 ], 10 );\n\t\t\t\t\t\theader.width = parseInt( match[ 2 ], 10 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ( header.valid & RGBE_VALID_FORMAT ) && ( header.valid & RGBE_VALID_DIMENSIONS ) ) break;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! ( header.valid & RGBE_VALID_FORMAT ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"missing format specifier\" );\n\n\t\t\t\t}\n\t\t\t\tif ( ! ( header.valid & RGBE_VALID_DIMENSIONS ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"missing image size specifier\" );\n\n\t\t\t\t}\n\n\t\t\t\treturn header;\n\n\t\t\t},\n\n\t\t\tRGBE_ReadPixels_RLE = function ( buffer, w, h ) {\n\n\t\t\t\tvar data_rgba, offset, pos, count, byteValue,\n\t\t\t\t\tscanline_buffer, ptr, ptr_end, i, l, off, isEncodedRun,\n\t\t\t\t\tscanline_width = w, num_scanlines = h, rgbeStart\n\t\t\t\t;\n\n\t\t\t\tif (\n\t\t\t\t\t// run length encoding is not allowed so read flat\n\t\t\t\t\t( ( scanline_width < 8 ) || ( scanline_width > 0x7fff ) ) ||\n\t\t\t\t\t// this file is not run length encoded\n\t\t\t\t\t( ( 2 !== buffer[ 0 ] ) || ( 2 !== buffer[ 1 ] ) || ( buffer[ 2 ] & 0x80 ) )\n\t\t\t\t) {\n\n\t\t\t\t\t// return the flat buffer\n\t\t\t\t\treturn new Uint8Array( buffer );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scanline_width !== ( ( buffer[ 2 ] << 8 ) | buffer[ 3 ] ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"wrong scanline width\" );\n\n\t\t\t\t}\n\n\t\t\t\tdata_rgba = new Uint8Array( 4 * w * h );\n\n\t\t\t\tif ( ! data_rgba || ! data_rgba.length ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_memory_error, \"unable to allocate buffer space\" );\n\n\t\t\t\t}\n\n\t\t\t\toffset = 0; pos = 0; ptr_end = 4 * scanline_width;\n\t\t\t\trgbeStart = new Uint8Array( 4 );\n\t\t\t\tscanline_buffer = new Uint8Array( ptr_end );\n\n\t\t\t\t// read in each successive scanline\n\t\t\t\twhile ( ( num_scanlines > 0 ) && ( pos < buffer.byteLength ) ) {\n\n\t\t\t\t\tif ( pos + 4 > buffer.byteLength ) {\n\n\t\t\t\t\t\treturn rgbe_error( rgbe_read_error );\n\n\t\t\t\t\t}\n\n\t\t\t\t\trgbeStart[ 0 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 1 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 2 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 3 ] = buffer[ pos ++ ];\n\n\t\t\t\t\tif ( ( 2 !== rgbeStart[ 0 ] ) || ( 2 !== rgbeStart[ 1 ] ) || ( ( ( rgbeStart[ 2 ] << 8 ) | rgbeStart[ 3 ] ) !== scanline_width ) ) {\n\n\t\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"bad rgbe scanline format\" );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// read each of the four channels for the scanline into the buffer\n\t\t\t\t\t// first red, then green, then blue, then exponent\n\t\t\t\t\tptr = 0;\n\t\t\t\t\twhile ( ( ptr < ptr_end ) && ( pos < buffer.byteLength ) ) {\n\n\t\t\t\t\t\tcount = buffer[ pos ++ ];\n\t\t\t\t\t\tisEncodedRun = count > 128;\n\t\t\t\t\t\tif ( isEncodedRun ) count -= 128;\n\n\t\t\t\t\t\tif ( ( 0 === count ) || ( ptr + count > ptr_end ) ) {\n\n\t\t\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"bad scanline data\" );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( isEncodedRun ) {\n\n\t\t\t\t\t\t\t// a (encoded) run of the same value\n\t\t\t\t\t\t\tbyteValue = buffer[ pos ++ ];\n\t\t\t\t\t\t\tfor ( i = 0; i < count; i ++ ) {\n\n\t\t\t\t\t\t\t\tscanline_buffer[ ptr ++ ] = byteValue;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//ptr += count;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// a literal-run\n\t\t\t\t\t\t\tscanline_buffer.set( buffer.subarray( pos, pos + count ), ptr );\n\t\t\t\t\t\t\tptr += count; pos += count;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\t// now convert data from buffer into rgba\n\t\t\t\t\t// first red, then green, then blue, then exponent (alpha)\n\t\t\t\t\tl = scanline_width; //scanline_buffer.byteLength;\n\t\t\t\t\tfor ( i = 0; i < l; i ++ ) {\n\n\t\t\t\t\t\toff = 0;\n\t\t\t\t\t\tdata_rgba[ offset ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 1 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 2 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 3 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toffset += 4;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tnum_scanlines --;\n\n\t\t\t\t}\n\n\t\t\t\treturn data_rgba;\n\n\t\t\t};\n\n\t\tvar RGBEByteToRGBFloat = function ( sourceArray, sourceOffset, destArray, destOffset ) {\n\n\t\t\tvar e = sourceArray[ sourceOffset + 3 ];\n\t\t\tvar scale = Math.pow( 2.0, e - 128.0 ) / 255.0;\n\n\t\t\tdestArray[ destOffset + 0 ] = sourceArray[ sourceOffset + 0 ] * scale;\n\t\t\tdestArray[ destOffset + 1 ] = sourceArray[ sourceOffset + 1 ] * scale;\n\t\t\tdestArray[ destOffset + 2 ] = sourceArray[ sourceOffset + 2 ] * scale;\n\n\t\t};\n\n\t\tvar RGBEByteToRGBHalf = ( function () {\n\n\t\t\t// Source: http://gamedev.stackexchange.com/questions/17326/conversion-of-a-number-from-single-precision-floating-point-representation-to-a/17410#17410\n\n\t\t\tvar floatView = new Float32Array( 1 );\n\t\t\tvar int32View = new Int32Array( floatView.buffer );\n\n\t\t\t/* This method is faster than the OpenEXR implementation (very often\n\t\t\t * used, eg. in Ogre), with the additional benefit of rounding, inspired\n\t\t\t * by James Tursa?s half-precision code. */\n\t\t\tfunction toHalf( val ) {\n\n\t\t\t\tfloatView[ 0 ] = val;\n\t\t\t\tvar x = int32View[ 0 ];\n\n\t\t\t\tvar bits = ( x >> 16 ) & 0x8000; /* Get the sign */\n\t\t\t\tvar m = ( x >> 12 ) & 0x07ff; /* Keep one extra bit for rounding */\n\t\t\t\tvar e = ( x >> 23 ) & 0xff; /* Using int is faster here */\n\n\t\t\t\t/* If zero, or denormal, or exponent underflows too much for a denormal\n\t\t\t\t * half, return signed zero. */\n\t\t\t\tif ( e < 103 ) return bits;\n\n\t\t\t\t/* If NaN, return NaN. If Inf or exponent overflow, return Inf. */\n\t\t\t\tif ( e > 142 ) {\n\n\t\t\t\t\tbits |= 0x7c00;\n\t\t\t\t\t/* If exponent was 0xff and one mantissa bit was set, it means NaN,\n\t\t\t\t\t\t\t * not Inf, so make sure we set one mantissa bit too. */\n\t\t\t\t\tbits |= ( ( e === 255 ) ? 0 : 1 ) && ( x & 0x007fffff );\n\t\t\t\t\treturn bits;\n\n\t\t\t\t}\n\n\t\t\t\t/* If exponent underflows but not too much, return a denormal */\n\t\t\t\tif ( e < 113 ) {\n\n\t\t\t\t\tm |= 0x0800;\n\t\t\t\t\t/* Extra rounding may overflow and set mantissa to 0 and exponent\n\t\t\t\t\t * to 1, which is OK. */\n\t\t\t\t\tbits |= ( m >> ( 114 - e ) ) + ( ( m >> ( 113 - e ) ) & 1 );\n\t\t\t\t\treturn bits;\n\n\t\t\t\t}\n\n\t\t\t\tbits |= ( ( e - 112 ) << 10 ) | ( m >> 1 );\n\t\t\t\t/* Extra rounding. An overflow will set mantissa to 0 and increment\n\t\t\t\t * the exponent, which is OK. */\n\t\t\t\tbits += m & 1;\n\t\t\t\treturn bits;\n\n\t\t\t}\n\n\t\t\treturn function ( sourceArray, sourceOffset, destArray, destOffset ) {\n\n\t\t\t\tvar e = sourceArray[ sourceOffset + 3 ];\n\t\t\t\tvar scale = Math.pow( 2.0, e - 128.0 ) / 255.0;\n\n\t\t\t\tdestArray[ destOffset + 0 ] = toHalf( sourceArray[ sourceOffset + 0 ] * scale );\n\t\t\t\tdestArray[ destOffset + 1 ] = toHalf( sourceArray[ sourceOffset + 1 ] * scale );\n\t\t\t\tdestArray[ destOffset + 2 ] = toHalf( sourceArray[ sourceOffset + 2 ] * scale );\n\n\t\t\t};\n\n\t\t} )();\n\n\t\tvar byteArray = new Uint8Array( buffer );\n\t\tbyteArray.pos = 0;\n\t\tvar rgbe_header_info = RGBE_ReadHeader( byteArray );\n\n\t\tif ( RGBE_RETURN_FAILURE !== rgbe_header_info ) {\n\n\t\t\tvar w = rgbe_header_info.width,\n\t\t\t\th = rgbe_header_info.height,\n\t\t\t\timage_rgba_data = RGBE_ReadPixels_RLE( byteArray.subarray( byteArray.pos ), w, h );\n\n\t\t\tif ( RGBE_RETURN_FAILURE !== image_rgba_data ) {\n\n\t\t\t\tswitch ( this.type ) {\n\n\t\t\t\t\tcase UnsignedByteType:\n\n\t\t\t\t\t\tdata = image_rgba_data;\n\t\t\t\t\t\tformat = RGBEFormat; // handled as THREE.RGBAFormat in shaders\n\t\t\t\t\t\ttype = UnsignedByteType;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase FloatType:\n\n\t\t\t\t\t\tvar numElements = ( image_rgba_data.length / 4 ) * 3;\n\t\t\t\t\t\tvar floatArray = new Float32Array( numElements );\n\n\t\t\t\t\t\tfor ( var j = 0; j < numElements; j ++ ) {\n\n\t\t\t\t\t\t\tRGBEByteToRGBFloat( image_rgba_data, j * 4, floatArray, j * 3 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdata = floatArray;\n\t\t\t\t\t\tformat = RGBFormat;\n\t\t\t\t\t\ttype = FloatType;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase HalfFloatType:\n\n\t\t\t\t\t\tvar numElements = ( image_rgba_data.length / 4 ) * 3;\n\t\t\t\t\t\tvar halfArray = new Uint16Array( numElements );\n\n\t\t\t\t\t\tfor ( var j = 0; j < numElements; j ++ ) {\n\n\t\t\t\t\t\t\tRGBEByteToRGBHalf( image_rgba_data, j * 4, halfArray, j * 3 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdata = halfArray;\n\t\t\t\t\t\tformat = RGBFormat;\n\t\t\t\t\t\ttype = HalfFloatType;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tconsole.error( 'THREE.RGBELoader: unsupported type: ', this.type );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\twidth: w, height: h,\n\t\t\t\t\tdata: data,\n\t\t\t\t\theader: rgbe_header_info.string,\n\t\t\t\t\tgamma: rgbe_header_info.gamma,\n\t\t\t\t\texposure: rgbe_header_info.exposure,\n\t\t\t\t\tformat: format,\n\t\t\t\t\ttype: type\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\tsetDataType: function ( value ) {\n\n\t\tthis.type = value;\n\t\treturn this;\n\n\t},\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tfunction onLoadCallback( texture, texData ) {\n\n\t\t\tswitch ( texture.type ) {\n\n\t\t\t\tcase UnsignedByteType:\n\n\t\t\t\t\ttexture.encoding = RGBEEncoding;\n\t\t\t\t\ttexture.minFilter = NearestFilter;\n\t\t\t\t\ttexture.magFilter = NearestFilter;\n\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\ttexture.flipY = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase FloatType:\n\n\t\t\t\t\ttexture.encoding = LinearEncoding;\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\t\t\t\t\ttexture.magFilter = LinearFilter;\n\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\ttexture.flipY = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase HalfFloatType:\n\n\t\t\t\t\ttexture.encoding = LinearEncoding;\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\t\t\t\t\ttexture.magFilter = LinearFilter;\n\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\ttexture.flipY = true;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}\n\n\t\treturn DataTextureLoader.prototype.load.call( this, url, onLoadCallback, onProgress, onError );\n\n\t}\n\n} );\n\nexport { RGBELoader };\n","/**\n * @author Emmett Lalish / elalish\n *\n * This class generates custom mipmaps for a roughness map by encoding the lost variation in the\n * normal map mip levels as increased roughness in the corresponding roughness mip levels. This\n * helps with rendering accuracy for MeshStandardMaterial, and also helps with anti-aliasing when\n * using PMREM. If the normal map is larger than the roughness map, the roughness map will be\n * enlarged to match the dimensions of the normal map.\n */\n\nimport {\n\tLinearMipMapLinearFilter,\n\tMathUtils,\n\tMesh,\n\tNoBlending,\n\tOrthographicCamera,\n\tPlaneBufferGeometry,\n\tRawShaderMaterial,\n\tScene,\n\tVector2,\n\tWebGLRenderTarget\n} from \"three\";\n\nvar RoughnessMipmapper = ( function () {\n\n\tvar _mipmapMaterial = _getMipmapMaterial();\n\tvar _scene = new Scene();\n\t_scene.add( new Mesh( new PlaneBufferGeometry( 2, 2 ), _mipmapMaterial ) );\n\n\tvar _flatCamera = new OrthographicCamera( 0, 1, 0, 1, 0, 1 );\n\tvar _tempTarget = null;\n\tvar _renderer = null;\n\n\t// constructor\n\tvar RoughnessMipmapper = function ( renderer ) {\n\n\t\t_renderer = renderer;\n\t\t_renderer.compile( _scene, _flatCamera );\n\n\t};\n\n\tRoughnessMipmapper.prototype = {\n\n\t\tconstructor: RoughnessMipmapper,\n\n\t\tgenerateMipmaps: function ( material ) {\n\n\t\t\tvar { roughnessMap, normalMap } = material;\n\t\t\tif ( roughnessMap == null || normalMap == null || ! roughnessMap.generateMipmaps ||\n                material.userData.roughnessUpdated ) return;\n\n\t\t\tmaterial.userData.roughnessUpdated = true;\n\n\t\t\tvar width = Math.max( roughnessMap.image.width, normalMap.image.width );\n\t\t\tvar height = Math.max( roughnessMap.image.height, normalMap.image.height );\n\t\t\tif ( ! MathUtils.isPowerOfTwo( width ) || ! MathUtils.isPowerOfTwo( height ) ) return;\n\n\t\t\tvar oldTarget = _renderer.getRenderTarget();\n\t\t\tvar autoClear = _renderer.autoClear;\n\t\t\t_renderer.autoClear = false;\n\n\t\t\tif ( _tempTarget == null || _tempTarget.width !== width || _tempTarget.height !== height ) {\n\n\t\t\t\tif ( _tempTarget != null ) _tempTarget.dispose();\n\n\t\t\t\t_tempTarget = new WebGLRenderTarget( width, height, { depthBuffer: false, stencilBuffer: false } );\n\t\t\t\t_tempTarget.scissorTest = true;\n\n\t\t\t}\n\n\t\t\tif ( width !== roughnessMap.image.width || height !== roughnessMap.image.height ) {\n\n\t\t\t\tvar newRoughnessTarget = new WebGLRenderTarget( width, height, {\n\t\t\t\t\tminFilter: LinearMipMapLinearFilter,\n\t\t\t\t\tdepthBuffer: false,\n\t\t\t\t\tstencilBuffer: false\n\t\t\t\t} );\n\t\t\t\tnewRoughnessTarget.texture.generateMipmaps = true;\n\t\t\t\t// Setting the render target causes the memory to be allocated.\n\t\t\t\t_renderer.setRenderTarget( newRoughnessTarget );\n\t\t\t\tmaterial.roughnessMap = newRoughnessTarget.texture;\n\t\t\t\tif ( material.metalnessMap == roughnessMap ) material.metalnessMap = material.roughnessMap;\n\t\t\t\tif ( material.aoMap == roughnessMap ) material.aoMap = material.roughnessMap;\n\n\t\t\t}\n\n\t\t\t_mipmapMaterial.uniforms.roughnessMap.value = roughnessMap;\n\t\t\t_mipmapMaterial.uniforms.normalMap.value = normalMap;\n\n\t\t\tvar position = new Vector2( 0, 0 );\n\t\t\tvar texelSize = _mipmapMaterial.uniforms.texelSize.value;\n\t\t\tfor ( var mip = 0; width >= 1 && height >= 1;\n\t\t\t\t++ mip, width /= 2, height /= 2 ) {\n\n\t\t\t\t// Rendering to a mip level is not allowed in webGL1. Instead we must set\n\t\t\t\t// up a secondary texture to write the result to, then copy it back to the\n\t\t\t\t// proper mipmap level.\n\t\t\t\ttexelSize.set( 1.0 / width, 1.0 / height );\n\t\t\t\tif ( mip == 0 ) texelSize.set( 0.0, 0.0 );\n\n\t\t\t\t_tempTarget.viewport.set( position.x, position.y, width, height );\n\t\t\t\t_tempTarget.scissor.set( position.x, position.y, width, height );\n\t\t\t\t_renderer.setRenderTarget( _tempTarget );\n\t\t\t\t_renderer.render( _scene, _flatCamera );\n\t\t\t\t_renderer.copyFramebufferToTexture( position, material.roughnessMap, mip );\n\t\t\t\t_mipmapMaterial.uniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t\t}\n\n\t\t\tif ( roughnessMap !== material.roughnessMap ) roughnessMap.dispose();\n\n\t\t\t_renderer.setRenderTarget( oldTarget );\n\t\t\t_renderer.autoClear = autoClear;\n\n\t\t},\n\n\t\tdispose: function ( ) {\n\n\t\t\t_mipmapMaterial.dispose();\n\t\t\t_scene.children[ 0 ].geometry.dispose();\n\t\t\tif ( _tempTarget != null ) _tempTarget.dispose();\n\n\t\t}\n\n\t};\n\n\tfunction _getMipmapMaterial() {\n\n\t\tvar shaderMaterial = new RawShaderMaterial( {\n\n\t\t\tuniforms: {\n\t\t\t\troughnessMap: { value: null },\n\t\t\t\tnormalMap: { value: null },\n\t\t\t\ttexelSize: { value: new Vector2( 1, 1 ) }\n\t\t\t},\n\n\t\t\tvertexShader: `\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nvarying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = vec4( position, 1.0 );\n}\n              `,\n\n\t\t\tfragmentShader: `\nprecision mediump float;\nprecision mediump int;\nvarying vec2 vUv;\nuniform sampler2D roughnessMap;\nuniform sampler2D normalMap;\nuniform vec2 texelSize;\n\n#define ENVMAP_TYPE_CUBE_UV\nvec4 envMapTexelToLinear(vec4 a){return a;}\n#include <cube_uv_reflection_fragment>\n\nfloat roughnessToVariance(float roughness) {\n  float variance = 0.0;\n  if (roughness >= r1) {\n    variance = (r0 - roughness) * (v1 - v0) / (r0 - r1) + v0;\n  } else if (roughness >= r4) {\n    variance = (r1 - roughness) * (v4 - v1) / (r1 - r4) + v1;\n  } else if (roughness >= r5) {\n    variance = (r4 - roughness) * (v5 - v4) / (r4 - r5) + v4;\n  } else {\n    float roughness2 = roughness * roughness;\n    variance = 1.79 * roughness2 * roughness2;\n  }\n  return variance;\n}\nfloat varianceToRoughness(float variance) {\n  float roughness = 0.0;\n  if (variance >= v1) {\n    roughness = (v0 - variance) * (r1 - r0) / (v0 - v1) + r0;\n  } else if (variance >= v4) {\n    roughness = (v1 - variance) * (r4 - r1) / (v1 - v4) + r1;\n  } else if (variance >= v5) {\n    roughness = (v4 - variance) * (r5 - r4) / (v4 - v5) + r4;\n  } else {\n    roughness = pow(0.559 * variance, 0.25);// 0.559 = 1.0 / 1.79\n  }\n  return roughness;\n}\n\nvoid main() {\n    gl_FragColor = texture2D(roughnessMap, vUv, -1.0);\n    if (texelSize.x == 0.0) return;\n    float roughness = gl_FragColor.g;\n    float variance = roughnessToVariance(roughness);\n    vec3 avgNormal;\n    for (float x = -1.0; x < 2.0; x += 2.0) {\n    for (float y = -1.0; y < 2.0; y += 2.0) {\n        vec2 uv = vUv + vec2(x, y) * 0.25 * texelSize;\n        avgNormal += normalize(texture2D(normalMap, uv, -1.0).xyz - 0.5);\n    }\n    }\n    variance += 1.0 - 0.25 * length(avgNormal);\n    gl_FragColor.g = varianceToRoughness(variance);\n}\n              `,\n\n\t\t\tblending: NoBlending,\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false\n\n\t\t} );\n\n\t\tshaderMaterial.type = 'RoughnessMipmapper';\n\n\t\treturn shaderMaterial;\n\n\t}\n\n\treturn RoughnessMipmapper;\n\n} )();\n\nexport { RoughnessMipmapper };\n","\nimport * as THREE from 'three'\nfunction setRandomColors(object, scale) {\n  var children = object.children;\n  if (children && children.length > 0) {\n      children.forEach(function (e) {\n          setRandomColors(e, scale)\n      });\n  } else {\n      // no children assume contains a mesh\n      if (object instanceof THREE.Mesh) {\n        if (object.material instanceof Array) {\n          object.material.forEach(function(m) {\n            m.color = new THREE.Color(scale(Math.random()).hex());\n            if (m.name.indexOf(\"building\") == 0) {\n                m.emissive = new THREE.Color(0x444444);\n                m.transparent = true;\n                m.opacity = 0.8;\n              }\n          });\n        } else {\n          object.material.color = new THREE.Color(scale(Math.random()).hex());\n          if (object.material.name.indexOf(\"building\") == 0) {\n              object.material.emissive = new THREE.Color(0x444444);\n              object.material.transparent = true;\n              object.material.opacity = 0.8;\n            }\n        }\n      }\n  }\n}\n\n/**\n * Adds a folder to the provided dat.gui to control an animation clip\n * \n * @param {*} folderName name of the folder to add\n * @param {*} gui dat.gui to add it to\n * @param {*} clipAction clipAction to control\n * @return the control object\n */\nexport function addClipActionFolder(folderName, gui, clipAction, animationClip) {\n  var actionControls = {\n      keyframe: 0,\n      time: 0,\n      timeScale: 1,\n      repetitions: Infinity,\n      // warp\n      warpStartTimeScale: 1,\n      warpEndTimeScale: 1,\n      warpDurationInSeconds: 2,\n      warp: function() {clipAction.warp(actionControls.warpStartTimeScale, actionControls.warpEndTimeScale, actionControls.warpDurationInSeconds)},\n      fadeDurationInSeconds: 2,\n      fadeIn: function() {clipAction.fadeIn(actionControls.fadeDurationInSeconds)},\n      fadeOut: function() {clipAction.fadeOut(actionControls.fadeDurationInSeconds)},\n      effectiveWeight: 0,\n      effectiveTimeScale: 0\n    }\n\n    var actionFolder = gui.addFolder(folderName)\n    actionFolder.add(clipAction, \"clampWhenFinished\").listen();\n    actionFolder.add(clipAction, \"enabled\").listen();\n    actionFolder.add(clipAction, \"paused\").listen();\n    actionFolder.add(clipAction, \"loop\", { LoopRepeat: THREE.LoopRepeat, LoopOnce: THREE.LoopOnce, LoopPingPong: THREE.LoopPingPong }).onChange(function(e) {\n      if (e == THREE.LoopOnce || e == THREE.LoopPingPong) {\n        clipAction.reset();\n        clipAction.repetitions = undefined\n        clipAction.setLoop(parseInt(e), undefined);\n      } else {\n        clipAction.setLoop(parseInt(e), actionControls.repetitions);\n      }\n    });\n    actionFolder.add(actionControls, \"repetitions\", 0, 100).listen().onChange(function(e) {\n      if (clipAction.loop == THREE.LoopOnce || clipAction.loop == THREE.LoopPingPong) {\n        clipAction.reset();\n        clipAction.repetitions = undefined\n        clipAction.setLoop(parseInt(clipAction.loop), undefined);\n      } else {\n        clipAction.setLoop(parseInt(e), actionControls.repetitions);\n      }\n    });\n    actionFolder.add(clipAction, \"time\", 0, animationClip.duration, 0.001).listen()\n    actionFolder.add(clipAction, \"timeScale\", 0, 5, 0.1).listen()\n    actionFolder.add(clipAction, \"weight\", 0, 1, 0.01).listen()\n    actionFolder.add(actionControls, \"effectiveWeight\", 0, 1, 0.01).listen()\n    actionFolder.add(actionControls, \"effectiveTimeScale\", 0, 5, 0.01).listen()\n    actionFolder.add(clipAction, \"zeroSlopeAtEnd\").listen()\n    actionFolder.add(clipAction, \"zeroSlopeAtStart\").listen()\n    actionFolder.add(clipAction, \"stop\")\n    actionFolder.add(clipAction, \"play\")\n    actionFolder.add(clipAction, \"reset\")\n    actionFolder.add(actionControls, \"warpStartTimeScale\", 0, 10, 0.01)\n    actionFolder.add(actionControls, \"warpEndTimeScale\", 0, 10, 0.01)\n    actionFolder.add(actionControls, \"warpDurationInSeconds\", 0, 10, 0.01)\n    actionFolder.add(actionControls, \"warp\")\n    actionFolder.add(actionControls, \"fadeDurationInSeconds\", 0, 10, 0.01)\n    actionFolder.add(actionControls, \"fadeIn\")\n    actionFolder.add(actionControls, \"fadeOut\")\n\n    return actionControls;\n}\n","import * as THREE from 'three'\nimport {GLTFLoader} from './loaders/GLTFLoader'\nimport {RGBELoader} from './loaders/RGBELoader'\nimport {RoughnessMipmapper} from './utils/RoughnessMipmapper'\nimport OrbitControls from './controllers/OrbitControls'\nimport Stats from 'stats.js'\nimport {get as getGlobal} from \"./utils/globalData\";\nimport * as dat from 'dat.gui';\nimport PubSub from 'pubsub-js'\nimport PlatformScene from './sceneConfig/PlatformScene'\nimport {addClipActionFolder} from './utils/util'\nimport {TriggerType} from \"./sceneConfig/action/BaseAction\";\nimport {Vector3} from \"three\";\nimport {Geometry} from \"three\";\nimport DeviceScene from \"./sceneConfig/DeviceScene\";\nimport {error} from \"three\";\nimport {Color} from \"three/src/math/Color\";\n\n// import TWEEN from '@tweenjs/tween.js'\n\nconst TWEEN = require('@tweenjs/tween.js');\n\nclass SceneManager {\n\n    constructor() {\n        this.container = null;\n        this.scene = null;\n        this.camera = null;\n        this.renderer = null;\n        this.stats = null;\n        this.pmremGenerator = null;\n        this.mixer = null;\n        this.controls = null;\n        this.width = 400;\n        this.height = 300;\n        this.clock = new THREE.Clock();\n        this.raycaster = null;\n        this.ifInit = false;\n        this.isLoaded = false;\n        this.bufferPool = [];\n        this.currentGltf = undefined;\n        this.group = new THREE.Group();\n        this.gltfs = [];\n        this.tweenP = null;\n        this.tweenT = null;\n        this.sceneModel = undefined;\n        this.arrowHelper = undefined;\n        // eslint-disable-next-line no-lone-blocks\n        {\n            this.defaultPositionOfCamera = new Vector3(-1, 3, 5);\n            // this.defaultUpOfCamera = new Vector3(0, 1, 0);\n            this.defaultLookAtOfCamera = new Vector3(0, 0, 0);\n\n            this.defaultPositionOfModel = new Vector3(0, 0, 0);\n            this.defaultRotationOfModel = new Vector3(0, 0, 0);\n            this.defaultScaleOfModel = new Vector3(1, 1, 1);\n        }\n    }\n\n    loadModelWithBg = (bgPath, bgFileName, modelPath, modelName) => {\n\n        // todo : loading\n\n        this.group.children.forEach(item => item.visible = false);\n\n        if (this.bufferPool.length === 0) {\n\n            let loader = new GLTFLoader().setPath(modelPath);\n            loader.load(modelName, (gltf) => {\n                this.currentGltf = gltf;\n                let model = gltf.scene;\n                model.position.set(this.defaultPositionOfModel.x, this.defaultPositionOfModel.y, this.defaultPositionOfModel.z);\n                model.rotation.setFromVector3(new Vector3(this.defaultRotationOfModel.x, this.defaultRotationOfModel.y, this.defaultRotationOfModel.z));\n                model.scale.set(this.defaultScaleOfModel.x, this.defaultScaleOfModel.y, this.defaultScaleOfModel.z);\n\n                this.setPMREM();\n                this.setTextureTo(model);\n\n                model.name = this.bufferPool.length;\n\n                //\n                let obj = {modelPath: modelPath, modelName: modelName, model: gltf};\n                this.bufferPool.push(obj);\n\n                this.mixer = new THREE.AnimationMixer(model);\n                gltf.animations.forEach(anamationClip => {\n                    this.mixer.clipAction(anamationClip).stop();\n                });\n\n                this.group.add(model);\n\n                //adjust control\n                this.adjustControl();\n\n                this.render();\n                this.isLoaded = true;\n                PubSub.publish(SceneManager.path + 'loaded', {modelName: modelName});\n                // this.enableControls();\n            });\n\n            return;\n        }\n\n        for (let i = 0; i < this.bufferPool.length; i++) {\n            if (this.bufferPool[i].modelPath === modelPath && this.bufferPool[i].modelName === modelName) {\n                this.currentGltf = this.bufferPool[i].model;\n                this.group.children[i].visible = true;\n                this.mixer = new THREE.AnimationMixer(this.bufferPool[i].model.scene);\n                this.bufferPool[i].model.animations.forEach(anamationClip => {\n                    this.mixer.clipAction(anamationClip).stop();\n                });\n                this.isLoaded = true;\n\n                //adjust control\n                this.adjustControl();\n\n                PubSub.publish(SceneManager.path + 'loaded', {modelName: modelName});\n\n                this.render();\n                PubSub.publish(SceneManager.path + 'loadedFromCache',{modelName:modelName});\n                // this.enableControls(this.mixer,this.bufferPool[i].model);\n                return;\n            }\n        }\n\n        // let roughnessMipmapper = new RoughnessMipmapper(this.renderer);\n        let loader = new GLTFLoader().setPath(modelPath);\n        loader.load(modelName, (gltf) => {\n            this.currentGltf = gltf;\n            let model = gltf.scene;\n            model.position.set(this.defaultPositionOfModel.x, this.defaultPositionOfModel.y, this.defaultPositionOfModel.z);\n            model.rotation.setFromVector3(new Vector3(this.defaultRotationOfModel.x, this.defaultRotationOfModel.y, this.defaultRotationOfModel.z));\n            model.scale.set(this.defaultScaleOfModel.x, this.defaultScaleOfModel.y, this.defaultScaleOfModel.z);\n\n            this.setPMREM();\n\n            this.setTextureTo(model);\n\n            //\n            model.name = this.bufferPool.length;\n            let obj = {modelPath: modelPath, modelName: modelName, model: gltf};\n            this.bufferPool.push(obj);\n\n            this.group.add(model);\n\n            this.mixer = new THREE.AnimationMixer(model);\n            gltf.animations.forEach(anamationClip => {\n                this.mixer.clipAction(anamationClip).stop();\n            });\n\n            //adjust control\n            this.adjustControl();\n\n            this.render();\n            this.isLoaded = true;\n            PubSub.publish(SceneManager.path + 'loaded', {modelName: modelName});\n\n        });\n\n\n    };\n\n    pick = (offset, x, y) => {\n\n        let mouse = new THREE.Vector2();\n        mouse.x = ((x - offset.x) / this.width) * 2 - 1;\n        mouse.y = -((y - offset.y) / this.height) * 2 + 1;\n        console.log(offset.x + ' ' + offset.y + ' ' + mouse.x + ' ' + mouse.y);\n        let origin = this.camera.position;\n\n        let vector = new THREE.Vector3(mouse.x, mouse.y, 0.5).unproject(this.camera);\n        let direction = vector.sub(this.camera.position).normalize();\n\n        let raycaster = new THREE.Raycaster(origin, direction);\n        // calculate objects intersecting the picking ray\n        let intersects = raycaster.intersectObjects(this.scene.children, true);\n        if (intersects.length > 0) {\n            PubSub.publish(SceneManager.path + 'pick', {name: intersects[0].object.name, type: TriggerType.Single});\n            return intersects[0];\n        } else {\n            return null;\n        }\n    };\n\n    animate = (time) =>{\n        // console.log(this.camera.position.x + ' ' + this.camera.position.y + ' ' + this.camera.position.z + ' == ' + this.controls.target.x + ' ' + this.controls.target.y + ' ' + this.controls.target.z );\n        TWEEN.default.update(time);\n        if (this.ifInit) {\n            let delta = this.clock.getDelta();\n            this.mixer.update(delta);\n            this.controls.update(delta);\n\n            this.render();\n            this.stats.update();\n\n            if (this.mixer && this.animationControls.length > 0) {\n                this.mixer.update(delta);\n                this.animationControls.forEach((value, index) => {\n                    value.time = this.mixer.time;\n                    value.effectiveTimeScale = this.clipAndActions[index].action.getEffectiveTimeScale();\n                    value.effectiveWeight = this.clipAndActions[index].action.getEffectiveWeight();\n                });\n\n            }\n\n            PubSub.publish(SceneManager.path + 'animate', {delta: delta, isLoaded: this.isLoaded});\n        }\n\n        requestAnimationFrame(this.animate.bind(this));\n\n    };\n\n    // current1 \n    // target1 controlstarget\n    // current2 \n    // target2 controlstarget\n\n    // animateCamera(oldP, oldT, newP, callBack, newT){\n    //     let tween = new TWEEN.Tween({\n    //         x1: oldP.x, // x\n    //         y1: oldP.y, // y\n    //         z1: oldP.z, // z\n    //         x2: oldT.x, // x\n    //         y2: oldT.y, // y\n    //         z2: oldT.z  // z\n    //     });\n    //     tween.to({\n    //         x1: newP.x,\n    //         y1: newP.y,\n    //         z1: newP.z,\n    //         x2: newT.x,\n    //         y2: newT.y,\n    //         z2: newT.z\n    //     },1500);\n    //     let that = this;\n    //     tween.onUpdate(function(object){\n    //         that.camera.position.x = object.x1;\n    //         that.camera.position.y = object.y1;\n    //         that.camera.position.z = object.z1;\n    //         that.controls.target.x = object.x2;\n    //         that.controls.target.y = object.y2;\n    //         that.controls.target.z = object.z2;\n    //         // that.controls.update();\n    //     });\n    //     tween.onComplete(function(){\n    //         that.controls.enabled = true;\n    //         // callBack&&callBack()\n    //     });\n    //     tween.easing(TWEEN.Easing.Cubic.InOut);\n    //     tween.start();\n    // }\n    animateCamera = (oldP, oldT, newP, target2, newT) => {\n\n        // let arrow = new THREE.ArrowHelper(oldT, oldP);\n        // arrow.setColor(new Color( 0xff0000 ));\n        // this.scene.add(arrow);\n        //\n        // arrow = new THREE.ArrowHelper(newT, newP);\n        // arrow.setColor(new Color( 0xff0000 ));\n        // this.scene.add(arrow);\n\n\n        if (this.currentGltf !== undefined){\n            this.currentGltf.scene.rotation.setFromVector3(new THREE.Vector3());\n        }\n        this.controls.enabled = false;\n\n        let self = this;\n        let positionVar = {\n            x: oldP.x,\n            y: oldP.y,\n            z: oldP.z\n        };\n        this.tweenP = new TWEEN.default.Tween(positionVar).to({\n            x: newP.x,\n            y: newP.y,\n            z: newP.z\n        }, 1500).onComplete(function () {\n            self.controls.enabled = true;\n        });\n\n        this.tweenP.easing(TWEEN.default.Easing.Cubic.InOut);\n\n        // let lookatVar = {\n        //     x: oldT.x,\n        //     y: oldT.y,\n        //     z: oldT.z\n        // };\n        // this.tweenT = new TWEEN.default.Tween(lookatVar).to({\n        //     x1: newT.x,\n        //     y1: newT.y,\n        //     z1: newT.z\n        // }, 1500);\n        // this.tweenT.easing(TWEEN.default.Easing.Linear);\n        // this.tweenP.chain(this.tweenT);\n\n        let onUpdate = function () {\n            self.camera.position.set(positionVar.x,positionVar.y,positionVar.z);\n        };\n        // self.controls.target.set(lookatVar.x,lookatVar.y,lookatVar.z);\n\n        this.tweenP.onUpdate(onUpdate);\n        // this.tweenT.onUpdate(onUpdate);\n        self.camera.lookAt(new THREE.Vector3(newT.x, newT.y, newT.z));\n        self.controls.target.set(newT.x,newT.y,newT.z);\n        this.tweenP.start();\n\n        // self.camera.lookAt(new THREE.Vector3(lookAt.x, lookAt.y, lookAt.z));\n        // self.controls.target = new THREE.Vector3(lookAt.x, lookAt.y, lookAt.z);\n        // self.controls.update();\n        // this.camera.updateProjectionMatrix();\n\n\n    };\n\n    render = () => {\n        this.renderer.render(this.scene, this.camera);\n    };\n\n    onWindowResize = () => {\n\n        this.camera.aspect = this.container.offsetWidth / this.container.offsetHeight;\n        this.camera.updateProjectionMatrix();\n        this.renderer.setSize(this.width, this.height);\n    };\n\n    init = () => {\n        this.raycaster = new THREE.Raycaster();\n        this.scene = new THREE.Scene();\n        this.scene.add(this.group);\n\n        this.camera = new THREE.PerspectiveCamera(60, this.width / this.height, 1, 2000);\n        this.camera.position.x = this.defaultPositionOfCamera.x;\n        this.camera.position.y = this.defaultPositionOfCamera.y;\n        this.camera.position.z = this.defaultPositionOfCamera.z;\n        // this.camera.lookAt( this.scene.position - new THREE.Vector3(0,0,0) );\n        // this.camera.lookAt( this.scene.position);\n        this.camera.lookAt(this.defaultLookAtOfCamera);\n\n        this.renderer = new THREE.WebGLRenderer({antialias: true, alpha: true});\n        this.pmremGenerator = new THREE.PMREMGenerator(this.renderer);\n        this.pmremGenerator.compileEquirectangularShader();\n        this.renderer.setClearColor(0xEEEEEE, 0.0);\n        this.renderer.setPixelRatio(window.devicePixelRatio);\n        this.renderer.setSize(this.width, this.height);\n        this.renderer.toneMapping = THREE.ACESFilmicToneMapping;\n        this.renderer.toneMappingExposure = 0.8;\n        this.renderer.outputEncoding = THREE.sRGBEncoding;\n\n        let ambi = new THREE.AmbientLight(0x686868); //\n        this.scene.add(ambi);\n        let spotLight = new THREE.DirectionalLight(0xffffff);  //\n        spotLight.position.set(550, 100, 550);\n        spotLight.intensity = 0.6;\n        this.scene.add(spotLight);\n\n        this.controls = new OrbitControls(this.camera, this.renderer.domElement);\n        this.controls.addEventListener('change', this.render);\n        this.controls.minDistance = 0.1;\n        this.controls.maxDistance = 13;\n        // this.controls.autoRotate = false;\n        // this.controls.autoRotateSpeed = -10;\n        this.controls.screenSpacePanning = true;\n        this.controls.target.set(0, 0, 0);\n\n        this.stats = new Stats();\n        this.stats.dom.hidden = true;\n        this.animate();\n\n    };\n\n    appendChild = (div) => {\n\n        let newContainer = document.getElementById(div);\n        if (!newContainer)\n            return;\n\n        if (newContainer !== this.container) {\n            if (this.container !== null) {\n                if (this.stats.dom in this.container.children) {\n                    this.container.removeChild(this.stats.dom);\n                }\n                if (this.renderer.domElement in this.container.children) {\n                    this.container.removeChild(this.renderer.domElement)\n                }\n                window.removeEventListener(\"resize\", this.onWindowResize, false);\n                this.ifInit = false;\n            }\n            this.container = newContainer;\n            this.width = newContainer.offsetWidth;\n            this.height = newContainer.offsetHeight;\n            console.log(this.width, this.height);\n            this.camera.aspect = this.width / this.height;\n            this.renderer.setSize(this.width, this.height);\n            this.container.appendChild(this.stats.dom);\n            this.mixer = new THREE.AnimationMixer();\n            this.container.appendChild(this.renderer.domElement);\n\n            this.ifInit = true;\n\n\n        }\n\n\n        window.addEventListener('resize', this.onWindowResize, false);\n\n    };\n\n    getAnimationClipAndActionBy = (name) => {\n        let animationClip = undefined;\n        let animationAction = undefined;\n        let clip = THREE.AnimationClip.findByName(this.currentGltf.animations, name);\n        if (clip === null) return true;\n        let action = this.mixer.clipAction(clip);\n        if (action === null) return true;\n        animationClip = clip;\n        animationAction = action;\n        return {clip: animationClip, action: animationAction};\n    };\n\n    setCameraPos(position, up, lookat) {\n\n        if (position !== null) {\n            this.camera.position.x = position.x;\n            this.camera.position.y = position.y;\n            this.camera.position.z = position.z;\n        } else {\n            console.log('position is null')\n        }\n\n        if (lookat !== null) {\n            this.camera.lookAt(lookat);\n        } else {\n            console.log('lookat is null')\n        }\n        this.camera.lookAt(new Vector3());\n\n        // if (up !== null) {\n        //     this.camera.up = up;\n        // } else {\n        //     console.log('up is null')\n        // }\n    }\n\n    setModelPos(position, rotation, scale) {\n\n        if (position !== null) {\n            this.defaultPositionOfModel.set(position.x, position.y, position.z);\n        } else {\n            console.log('position is null')\n        }\n\n        if (rotation !== null) {\n            this.defaultRotationOfModel.set(rotation.x, rotation.y, rotation.z);\n        } else {\n            console.log('rotation is null')\n        }\n\n        if (scale !== null) {\n            this.defaultScaleOfModel.set(scale.x, scale.y, scale.z);\n        } else {\n            console.log('scale is null')\n        }\n\n        if (this.currentGltf !== undefined) {\n            this.currentGltf.scene.position.set(this.defaultPositionOfModel.x, this.defaultPositionOfModel.y, this.defaultPositionOfModel.z);\n            this.currentGltf.scene.rotation.setFromVector3(new Vector3(this.defaultRotationOfModel.x, this.defaultRotationOfModel.y, this.defaultRotationOfModel.z));\n            this.currentGltf.scene.scale.set(this.defaultScaleOfModel.x, this.defaultScaleOfModel.y, this.defaultScaleOfModel.z);\n        }\n\n\n    }\n\n    // adjust control  camera near and camera far to the current model\n    adjustControl() {\n\n        this.setCameraPos(this.sceneModel.positionOfCamera,this.sceneModel.upOfCamera,this.sceneModel.lookatOfCamera);\n        this.setModelPos(this.sceneModel.positionOfModel,this.sceneModel.rotationOfModel,this.sceneModel.scaleOfModel);\n\n        let object = this.currentGltf.scene;\n        const box = new THREE.Box3().setFromObject(object);\n        const size = box.getSize(new Vector3()).length();\n        this.controls.reset();\n        // const center = box.getCenter(new Vector3());\n        // object.position.x += (object.position.x - center.x);\n        // object.position.y += (object.position.y - center.y);\n        // object.position.z += (object.position.z - center.z);\n        this.controls.maxDistance = size * 10;\n        this.camera.near = size / 100;\n        this.camera.far = size * 100;\n        this.camera.updateProjectionMatrix();\n        this.controls.saveState();\n    }\n\n    //set PMREM\n    setPMREM() {\n        if (SceneManager.path === DeviceScene.path) {\n            this.getPmremTexture().then(({envMap}) => {\n                this.scene.environment = envMap;\n            });\n        }\n    }\n\n    getPmremTexture() {\n        let path = '/source/textures/equirectangular/venice_sunset_1k.hdr';//L1024.png\n        // no envmap\n        if (!path) return Promise.resolve({envMap: null});\n        return new Promise((resolve, reject) => {\n\n            new RGBELoader()\n                .setDataType(THREE.UnsignedByteType)\n                .load(path, (texture) => {\n\n                    const envMap = this.pmremGenerator.fromEquirectangular(texture).texture;\n                    this.pmremGenerator.dispose();\n\n                    resolve({envMap});\n\n                }, undefined, reject);\n\n        });\n    }\n\n    // \n    // \n    // \n    // \n    setTextureTo(model) {\n\n        let roughnessMipmapper = new RoughnessMipmapper(this.renderer);\n        let textureLoader = new THREE.TextureLoader();\n\n        if (SceneManager.path === PlatformScene.path) {\n\n            let lightMap = null;\n            let path = this.sceneModel.lightMapPath();\n            if (typeof (path) === 'string' && path.length > 0) {\n                lightMap = textureLoader.load(path);\n            }\n\n            model.traverse((child) => {\n                    if (child instanceof THREE.Mesh && child.isMesh) {\n                        roughnessMipmapper.generateMipmaps(child.material);\n                        child.material.lightMap = lightMap;\n                        child.material.needsUpdate = true;\n                    }\n                }\n            );\n\n            roughnessMipmapper.dispose();\n\n            return;\n\n        }\n\n        // device\n        //\n        // let lightMap = null;\n        // let path = this.sceneModel.lightMapPath();\n        // if (typeof (path) === 'string' && path.length > 0) {\n        //     lightMap = textureLoader.load(path);\n        // }\n        //\n        // let colorMap = null;\n        // path = this.sceneModel.colorMapFilePath();\n        // if (typeof (path) === 'string' && path.length > 0) {\n        //     colorMap = textureLoader.load(path);\n        // }\n        //\n        // let metallicMap = null;\n        // path = this.sceneModel.metallicMapFilePath();\n        // if (typeof (path) === 'string' && path.length > 0) {\n        //     metallicMap = textureLoader.load(path);\n        // }\n        //\n        // let roughnessMap = null;\n        // path = this.sceneModel.roughnessMapFilePath();\n        // if (typeof (path) === 'string' && path.length > 0) {\n        //     roughnessMap = textureLoader.load(path);\n        // }\n\n        model.traverse((child) => {\n            if (child instanceof THREE.Mesh && child.isMesh) {\n                // set\n                roughnessMipmapper.generateMipmaps(child.material);\n                if (SceneManager.path === DeviceScene.path && (child.name === 'Render_unit' || child.name === 'Frame')) {\n                    // error\n                    // Distribution_Unit \n                    // UPS\n                    // Render_unit  0.901560476447665 1.4059265925475453 -0.08014086632699502 == -0.30142308789146893 1.066507704625208 -0.07155817732875358\n                    // coin_unit \n                    // Banknote_unit \n                    // Frame \n\n                    // child.material.map = null;\n                    // child.material.emissive = new THREE.Color(0xFF0000);\n                    // child.material.transparent = true;\n                    // child.material.opacity = 1;\n                    //\n                    // child.material.color.setHex(0xFF0000);\n\n                    // \n                    // child.material.map = colorMap;\n                    // child.material.roughnessMap = roughnessMap;\n                    // child.material.metalnessMap = metallicMap;\n                } else {\n                     // child.material.lightMap = lightMap;\n                }\n                child.material.needsUpdate = true;\n            }\n        });\n        // this.hideUnitWithOut('coin_unit');\n        roughnessMipmapper.dispose();\n    }\n\n    hideUnitWithOut(name){\n        if (SceneManager.path !== DeviceScene.path) {\n            return null ;\n        }\n        let names = ['Distribution_Unit','UPS','Render_unit','Banknote_unit','coin_unit','frame_unit'];//frame_unit coin_unit\n        names.forEach((value, index) => {\n            let mesh = this.currentGltf.scene.getObjectByName(value);\n            mesh.visible = value === name || name ==='frame_unit';\n            // mesh.material.emissive = new THREE.Color(0xFF0000);\n            // mesh.material.transparent = true;\n            // mesh.material.opacity = 0.8;\n        });\n    }\n\n\n    // animation test\n    animationControls = [];\n    clipAndActions = [];\n    mixerControls = {\n        time: 0,\n        timeScale: 1,\n        stopAllAction: function () {\n            const sceneManager = getGlobal('sceneManager');\n            sceneManager.mixer.stopAllAction()\n        },\n    };\n\n    enableControls(mixer, gltf) {\n\n        if (SceneManager.path !== PlatformScene.path) {\n            return;\n        }\n        let _this = this;\n        let gui = new dat.GUI();\n        let mixerFolder = gui.addFolder(\"AnimationMixer\");\n        mixerFolder.add(this.mixerControls, \"time\").listen();\n        mixerFolder.add(this.mixerControls, \"timeScale\", 0, 5).onChange(function (timeScale) {\n            _this.mixer.timeScale = timeScale;\n        });\n        mixerFolder.add(this.mixerControls, \"stopAllAction\").listen();\n\n        let clipAndAction = null;\n        let control = null;\n\n        clipAndAction = SceneManager.getAnimationClipAndActionByNameWithMixerAndGltfs('Half_N', [gltf], mixer);\n        control = addClipActionFolder(\"Half_N\", gui, clipAndAction.action, clipAndAction.clip);\n        this.animationControls.push(control);\n        this.clipAndActions.push(clipAndAction);\n\n        clipAndAction = SceneManager.getAnimationClipAndActionByNameWithMixerAndGltfs('Half_S', [gltf], mixer);\n        control = addClipActionFolder(\"Half_S\", gui, clipAndAction.action, clipAndAction.clip);\n        this.animationControls.push(control);\n        this.clipAndActions.push(clipAndAction);\n\n    }\n\n}\n\nSceneManager.path = PlatformScene.path;\n\nSceneManager.getAnimationClipAndActionByNameWithMixerAndGltfs = (name, gltfs, mixer) => {\n    let animationClip = undefined;\n    let animationAction = undefined;\n    gltfs.forEach((value, index) => {\n        let clip = THREE.AnimationClip.findByName(value.animations, name);\n        if (clip === null) return true;\n        let action = mixer.clipAction(clip);\n        if (action === null) return true;\n        animationClip = clip;\n        animationAction = action;\n    });\n    return {clip: animationClip, action: animationAction};\n};\n\nexport default SceneManager\n\n\n// Object.assign( SceneManager.prototype, THREE.EventDispatcher.prototype );\n// SceneManager.prototype = Object.create( THREE.EventDispatcher.prototype );\n\n\n// loadModel(path,fileName,func){\n//\n//     let roughnessMipmapper = new RoughnessMipmapper(this.renderer);\n//     let loader = new GLTFLoader().setPath(path);\n//     loader.load(fileName, function (gltf) {\n//\n//         let model = gltf.scene;\n//         console.log(gltf);\n//         // model.position.set(1,1,0);\n//\n//\n//         model.traverse(function (child) {\n//             if (child.isMesh) {\n//                 roughnessMipmapper.generateMipmaps(child.material);\n//             }\n//\n//         });\n//\n//         this.scene.add(model);\n//         this.mixer = new THREE.AnimationMixer( model );\n//         // mixer.clipAction( gltf.animations ).play();\n//         gltf.animations.forEach(anamationClip=>{\n//             this.mixer.clipAction(anamationClip).play();\n//         })\n//         roughnessMipmapper.dispose();\n//\n//         this.animate();\n//\n//         func(model);\n//\n//     });\n// }\n\n// // stop animation\n// configAnimation(){\n//\n// }\n\n// unload = ()=>{\n//\n// };\n\n\n// if (child.geometry instanceof THREE.BufferGeometry){\n// child.geometry.attributes.uv = child.geometry.attributes.uv2;\n// child.geometry.attributes.uv2 = child.geometry.attributes.uv;\n// } else {\n// child.geometry.faceVertexUvs.push(model.geometry.faceVertexUvs[0]);\n// child.geometry.faceVertexUvs[1] = model.geometry.faceVertexUvs[0];\n// }\n// geometry.computeFaceNormals();\n// geometry.computeVertexNormals(false);\n// geometry.normalsNeedUpdate = true;\n\n\n// Distribution_Unit  2.376620357977175 -0.09920244780879667 -0.004236099526651743 == -0.0349794605003186 -0.4282042984837279 -0.07555937145275725\n// UPS\n// Render_unit  0.8931672573320442 1.396145436359538 -0.08890383748009252 == 0.15497381567892415 1.2365884815192894 -0.08348527499470576\n// Banknote_unit \n// coin_unit \n// frame_unit ","function buildTypes(names) {\n    let result = {};\n    names.forEach(v => {\n        result[v] = v;\n    });\n    return result;\n}\n\nconst r = buildTypes([\n    \"TEST\"\n]);\n\nexport default r;","import actionTypes from'../actions/actionTypes'\n\n\nexport function test(state={\n    testDate:1,\n    test:2,\n    t:3\n},action) {\n    switch (action.type) {\n        case actionTypes.TEST:\n            return{...state,t:4}\n        default:\n            return state\n    }\n}","import {combineReducers} from 'redux';\nimport * as testReducers from './test'\n\nconst appReducer = combineReducers(Object.assign(\n    {},\n    testReducers\n));\n\nexport default appReducer;","import React,{Component} from 'react'\nimport { get as getGlobal } from '../../common/utils/globalData'\nimport './device.css'\nimport PlatformScene from \"../../common/sceneConfig/PlatformScene\";\nimport {Vector2} from \"three\";\n\n\nclass Example extends Component{\n\n    handlePick=(e)=>{\n        const sceneManager = getGlobal('sceneManager');\n        const node = sceneManager.pick(new Vector2(200, 0), e.clientX, e.clientY);\n        if(node!==null){\n            sceneManager.animateCamera(sceneManager.camera.position, sceneManager.controls.position0,node.object.position,node.object.position)\n        }\n    };\n\n    componentDidMount() {\n        const _this = this;\n        const sceneManager = getGlobal('sceneManager');\n        sceneManager.scenePath = PlatformScene.path;\n        sceneManager.appendChild('device');\n        sceneManager.loadModelWithBg('/source/textures/equirectangular/','royal_esplanade_1k.hdr','/source/models/test/','Station.glb');\n        sceneManager.container.addEventListener('click',_this.handlePick,false);\n    }\n\n    componentWillUnmount() {\n        const sceneManager = getGlobal('sceneManager');\n        const _this = this;\n        if(sceneManager.container!==null){\n            sceneManager.container.removeEventListener('click',_this.handlePick,false);\n        }\n    }\n\n    render() {\n        return(\n            <div id='device'></div>\n        )\n    }\n}\n\nexport default Example;\n","import React, {PureComponent} from 'react'\nimport {get as getGlobal} from \"../../common/utils/globalData\";\nimport './status.less'\n\n\nclass Status extends PureComponent {\n\n    state = {\n        list: [],\n        selected: -1\n    };\n\n    errorJudjement = (list) => {\n        for (let i = 0; i < list.length; i++) {\n            if (list[i].status === \"error\")\n                return false\n        }\n        return true;\n    };\n\n    handleClick = (index) => {\n\n\n// Distribution_Unit  2.376620357977175 -0.09920244780879667 -0.004236099526651743 == -0.0349794605003186 -0.4282042984837279 -0.07555937145275725\n// UPS 1.1525563776335424 -1.5962918241672834 -0.2946352996746073 == -0.37367151436281076 -1.7364980079953276 -0.21646172177968243\n// Render_unit  0.8931672573320442 1.396145436359538 -0.08890383748009252 == 0.15497381567892415 1.2365884815192894 -0.08348527499470576\n// Banknote_unit  -1.9524789679123824 -0.17753405117771476 2.9963349371220436 == 0.5108138866892379 -0.3429119959990824 0.5340557086551816\n// coin_unit  -2.1019016186189075 -0.6410775169220737 2.922886865182427 == 0.0630504553140941 -0.7882444661038277 -0.03731093237479279\n\n\n        const sceneManager = getGlobal('sceneManager');\n        let newP = {x: 0.7, y: 0.35, z: 1.6};\n        let newT = {x: 0, y: 0, z: 0};\n        let name = '';\n        switch (index) {\n            case 0:\n                name = 'frame_unit';\n                newP = {x: 0.12, y: 0.58627, z: 5.5};\n                newT = {x: 0, y: 0, z: 0};\n                break;\n            case 1:\n                name = 'Banknote_unit';\n                newP = {x: -1.9524789679123824, y: -0.17753405117771476, z: 2.9963349371220436};\n                newT = {x: 0.5108138866892379, y: -0.3429119959990824, z: 0.5340557086551816};\n                break;\n            case 2:\n                name = 'coin_unit';\n                newP = {x: -2.1019016186189075, y: -0.6410775169220737, z: 2.922886865182427};\n                newT = {x: 0.0630504553140941, y: -0.7882444661038277, z: -0.03731093237479279};\n                break;\n            case 3:\n                name = 'Distribution_Unit';\n                newP = {x: 2.376620357977175, y: -0.09920244780879667, z: -0.004236099526651743};\n                newT = {x: -0.0349794605003186, y: -0.4282042984837279, z: -0.07555937145275725};\n                break;\n            case 4:\n                name = 'UPS';\n                newP = {x: 1.1525563776335424, y: -1.5962918241672834, z: -0.2946352996746073};\n                newT = {x: -0.37367151436281076, y: -1.7364980079953276, z: -0.21646172177968243};\n                break;\n            case 5:\n                name = 'Render_unit';\n                newP = {x: 0.8931672573320442, y: 1.396145436359538, z: -0.08890383748009252};\n                newT = {x: 0.15497381567892415, y: 1.2365884815192894, z: -0.08348527499470576};\n                break;\n            default:\n                break;\n        }\n        sceneManager.hideUnitWithOut(name);\n        sceneManager.animateCamera(sceneManager.camera.position, sceneManager.controls.position0, newP, {\n            x: 0,\n            y: 0,\n            z: 0\n        }, newT);\n        this.setState({selected: index})\n    };\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        this.setState({list: nextProps.list || []})\n    }\n\n    render() {\n        const {list, selected} = this.state;\n        return (\n            <div className='status'>\n                {\n                    list.map((item, index) => {\n                        return (\n                            <div\n                                className={selected === index ? \"item-selected\" : \"item\"}\n                                style={{background: selected === index ? `url(${require('../../img/bg-act-tall.png')})` : `url(${require('../../img/bg-tall.png')})`}}\n                                key={index}\n                                onClick={() => this.handleClick(index)}>\n                                <div className={this.errorJudjement(item.list) ? \"left\" : \"left-err\"}>{item.title}</div>\n                                <div className='line'></div>\n                                <div className='right'>\n                                    {\n                                        item.list.map((tip, tipIndex) => {\n                                            return (\n                                                <div className={tip.status === \"error\" ? \"tip-err\" : \"tip\"}\n                                                     key={tipIndex}>\n                                                    <div className='key'>{tip.key}</div>\n                                                    <div className='value'>{tip.value}</div>\n                                                </div>\n                                            )\n                                        })\n                                    }\n                                </div>\n                            </div>\n                        )\n                    })\n                }\n            </div>\n        )\n    }\n}\n\nexport default Status;\n\n\n// switch (index) {\n//     case 0:\n//         newP =  {x:0.12,y:0.58627,z:5.5};\n//         newT = {x:0,y:0,z:0};\n//         sceneManager.animateCamera(sceneManager.camera.position, sceneManager.controls.position0,newP,{x:0,y:0,z:0},newT);\n//         break;\n//     case 1:\n//         newP = {x:0.7,y:0.65,z:1.7};\n//         sceneManager.animateCamera(sceneManager.camera.position, sceneManager.controls.position0,newP,{x:0,y:0,z:0},{x:newP.x,y:newP.y,z:newP.z-0.3});\n//         break;\n//     case 2:\n//         newP = {x:0.15,y:0.58,z:1.7};\n//         sceneManager.animateCamera(sceneManager.camera.position, sceneManager.controls.position0,newP,{x:0,y:0,z:0},{x:newP.x,y:newP.y,z:newP.z-0.3});\n//         break;\n//     case 3:\n//         newP = {x:0.0,y:0.0,z:0};\n//         sceneManager.animateCamera(sceneManager.camera.position, sceneManager.controls.position0,newP,{x:0,y:0,z:0},{x:newP.x,y:newP.y,z:newP.z-0.3});\n//         break;\n//     case 4:\n//         newP = {x:0.7,y:0.35,z:1.6};\n//         sceneManager.animateCamera(sceneManager.camera.position, sceneManager.controls.position0,newP,{x:0,y:0,z:0},{x:newP.x,y:newP.y,z:newP.z-0.3});\n//         break;\n//     case 5:\n//         newP = {x:0.7,y:1.175,z:1.6};\n//         sceneManager.animateCamera(sceneManager.camera.position, sceneManager.controls.position0,newP,{x:0,y:0,z:0},{x:newP.x,y:newP.y,z:newP.z-0.4});\n//         break;\n//     default:\n//         newP = {x:0.12,y:0.58627,z:5.5};\n//         sceneManager.animateCamera(sceneManager.camera.position, sceneManager.controls.position0,newP,{x:0,y:0,z:0},{x:0,y:0,z:0});\n//         break;\n// }","import React, {PureComponent} from 'react'\nimport './networkError.less'\n\n\nclass NetworkError extends PureComponent{\n\n    render() {\n\n        return(\n            <div className='networkError'>\n                ...\n            </div>\n        )\n    }\n}\n\nexport default NetworkError;\n","import React,{PureComponent} from 'react'\nimport Status from '../../components/status/status'\nimport NetworkError from '../../components/networkError/networkError'\nimport { createHashHistory } from 'history'\nimport './device.less'\nimport '../../img/map.png'\nimport http from '../../utils/http'\nimport {get as getGlobal} from \"../../common/utils/globalData\";\nimport {Vector2} from \"three\";\nimport SceneManager from \"../../common/SceneManager\";\nimport DeviceScene from \"../../common/sceneConfig/DeviceScene\";\n\n\n\nclass Device extends PureComponent{\n\n    state={\n        statusList:[],\n        showError:false,\n        needRepair: false\n    }\n\n    handleShow=()=>{\n        createHashHistory().push('/map')\n    }\n\n\n    getStatus=()=>{\n\n        let url='';\n        if(this.props.history.location.state && this.props.history.location.state.id===1){\n            url='/virtualData/status.json';\n            this.setState({needRepair: false});\n        }else {\n            url= '/virtualData/status-east.json';\n            this.setState({needRepair: true});\n        }\n        if(process.env.NODE_ENV!=='development'){\n            url = 'plugin'+url\n        }\n        http.get(url)\n            .then(res=>{\n                this.setState({statusList:res.data.data || []})\n            })\n    };\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        let url='';\n        console.log(nextProps)\n        let modelFileName = 'Tvm_third_bad_GLB.glb';\n        if(nextProps.history.location.state && nextProps.history.location.state.id===1){\n            url='/virtualData/status.json';\n            modelFileName = 'Tvm_third_normal_GLB.glb';\n            this.setState({needRepair: false});\n        }else {\n            url= '/virtualData/status-east.json';\n            modelFileName = 'Tvm_third_bad_GLB.glb';\n            this.setState({needRepair: true});\n        }\n\n        if(process.env.NODE_ENV!=='development'){\n            url = 'plugin'+url\n        }\n\n        http.get(url)\n            .then(res=>{\n                this.setState({statusList:res.data.data || []});\n                console.log(res.data.data)\n            });\n\n        const _this = this;\n        setTimeout(()=>{\n            const sceneManager = getGlobal('sceneManager');\n            const application = getGlobal('Application');\n            let scene = application.deviceTVM;\n            SceneManager.path = DeviceScene.path;\n            sceneManager.sceneModel = scene;\n            sceneManager.appendChild('model');\n            sceneManager.loadModelWithBg(scene.bgFilePath(), scene.bgFileName(), scene.modelFilePath(), modelFileName);\n\n        },10)\n\n    }\n\n    componentWillMount() {\n\n        this.getStatus();\n    }\n\n    componentDidMount() {\n        let modelFileName = '';\n        if(this.props.location.pathname==='/device/east'){\n            modelFileName = 'Tvm_third_bad_GLB.glb'\n        }else {\n            modelFileName = 'Tvm_third_normal_GLB.glb'\n        }\n        console.log(this.props);\n        setTimeout(()=>{\n            const sceneManager = getGlobal('sceneManager');\n            const application = getGlobal('Application');\n            let scene = application.deviceTVM;\n            SceneManager.path = DeviceScene.path;\n            sceneManager.sceneModel = scene;\n            sceneManager.appendChild('model');\n            sceneManager.loadModelWithBg(scene.bgFilePath(), scene.bgFileName(), scene.modelFilePath(), modelFileName);\n        },10);\n    }\n\n    componentWillUnmount() {\n        clearTimeout();\n    }\n\n    render() {\n        const { statusList,showError,needRepair } = this.state;\n        return(\n            <div className='device'>\n                <div className='left'>\n                    <div id='model'>\n                        {\n                            showError?<NetworkError/>:\"\"\n                        }\n                    </div>\n                    {\n                        needRepair?\n                            <div className='repair-btn' onClick={this.handleShow}>\n                                <div className='icon'></div>\n                                <div className='text'></div>\n                            </div>:''\n                    }\n                </div>\n                <div className='right'>\n                    <div className='position' style={{background:`url(${require('../../img/infoBG.png')})`}}>\n                        <div className='title'>: A3</div>\n                        <div className='title'>ID: 030B0603   IP172.3.62.103</div>\n                    </div>\n                    <Status list={statusList}/>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Device;\n","import React, {PureComponent} from 'react'\nimport './modal.less'\n\n\nclass Modal extends PureComponent{\n\n    state={\n        show: false,\n        width: 859,\n        height:608,\n        title: \"\"\n    }\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        this.setState({show:nextProps.show})\n    }\n\n    componentWillMount() {\n        const { show, width, height,title } = this.props;\n        this.setState({\n            show: show || false,\n            width: width || 859,\n            height: height || 608,\n            title: title || \"\"\n        })\n    }\n\n    render() {\n        const { show,width,height,title } = this.state;\n        const {children} = this.props;\n        if(show)\n            return(\n                <div className='modal'>\n                    <div className='body' style={{width:width,height:height}}>\n                        <div className='header'>\n                            <div className='title'>{title}</div>\n                            <img\n                                className='icon'\n                                src={[require('../../img/close.png')]}\n                                onClick={this.props.onCancel || null}\n                                alt=''\n                            />\n                        </div>\n                        <div className='content'>{children}</div>\n                    </div>\n                </div>\n            )\n        else\n            return null;\n\n    }\n}\n\nexport default Modal;\n","import React, {Component} from 'react'\nimport Modal from '../../components/modal/modal'\nimport './platform.less'\nimport {get as getGlobal} from \"../../common/utils/globalData\";\nimport {Vector2} from \"three\";\nimport SceneManager from \"../../common/SceneManager\";\nimport PlatformScene from \"../../common/sceneConfig/PlatformScene\";\nimport PubSub from \"pubsub-js\";\n\n\nclass Platform extends Component {\n\n    // -- 3D\n\n    handlePick = (e) => {\n        const sceneManager = getGlobal('sceneManager');\n        const node = sceneManager.pick(new Vector2(224, 44), e.clientX, e.clientY);\n    };\n\n    // -- video\n\n    handleOpenVideo = () => {\n        this.setState({\n            show: true\n        })\n    };\n\n    handleCancelModal = () => {\n        this.setState({\n            show: false,\n\n        })\n    };\n\n\n    state = {\n        show: false,\n        video: '/source/video/bg_video.mp4',\n        currentReport:'',\n        nextReport:'2',\n        sceneManager: null\n    };\n\n    componentWillMount() {\n        PubSub.subscribe(PlatformScene.path + 'pop_video', this.showVideo.bind(this));\n        PubSub.subscribe(PlatformScene.path + 'report', this.report.bind(this));\n        // PubSub.publish(PlatformScene.path + 'report', {current: current, next: next});\n\n    };\n\n    componentDidMount() {\n\n        const _this = this;\n        setTimeout(()=>{\n            const sceneManager = getGlobal('sceneManager');\n            const application = getGlobal('Application');\n            let scene = application.platform;\n            SceneManager.path = PlatformScene.path;\n            sceneManager.sceneModel = scene;\n            sceneManager.appendChild('platform-demo');\n            sceneManager.loadModelWithBg(scene.bgFilePath(), scene.bgFileName(), scene.modelFilePath(), scene.modelFileName());\n            sceneManager.container.addEventListener('click', _this.handlePick, false);\n            // sceneManager.setCameraPos(scene.positionOfCamera,scene.upOfCamera,scene.lookatOfCamera);\n            // sceneManager.setModelPos(scene.positionOfModel,scene.rotationOfModel,scene.scaleOfModel);\n\n        },10)\n    };\n\n\n    componentWillUnmount() {\n        const sceneManager = getGlobal('sceneManager');\n        const _this = this;\n        if (sceneManager.container !== null) {\n            sceneManager.container.removeEventListener('click', _this.handlePick, false);\n        }\n    };\n\n    showVideo(event ,data){\n        this.setVideo(data.src);\n        this.handleOpenVideo();\n    }\n\n    setVideo = (newViedeo) => {\n        this.setState({\n            video: newViedeo\n        })\n    };\n\n    render() {\n        const {show, video,currentReport,nextReport} = this.state;\n        return (\n            <div className='platform'>\n                <Modal\n                    show={show}\n                    onCancel={this.handleCancelModal}\n                    title=\"XXXj \"\n                >\n                    <video className='video' controls={false} autoPlay loop src={video}>video\n                    </video>\n                </Modal>\n                <div id='model'>\n                    <div id = 'platform-demo' className='platform-demo' >\n\n                    </div>\n                    <div className='info-card'>\n                        <div className='info-container'>\n                            <span className='title'></span>\n                            <span className='info'></span>\n                            <span className='status'>{currentReport}</span>\n                        </div>\n                        <div className='info-container'>\n                            <span className='title'></span>\n                            <span className='info'>{nextReport}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    };\n\n    //{this.props.location.state.id}\n    report(event,data){\n        this.setState({\n            currentReport: data.current,\n            nextReport: data.next\n        })\n    }\n}\n\nexport default Platform;\n","import React, { PureComponent } from 'react'\nimport './sceneDemo.less'\nimport {get as getGlobal} from '../../common/utils/globalData'\nimport {Vector2} from \"three\";\n\n\nclass SceneDemo extends PureComponent{\n\n    state={\n        sceneManager: null\n    }\n\n    handlePick=(e)=>{\n        const sceneManager = getGlobal('sceneManager');\n        const node = sceneManager.pick(new Vector2(200, 0), e.clientX, e.clientY);\n        if(node!==null){\n             sceneManager.animateCamera(sceneManager.camera.position, sceneManager.controls.position0,node.object.position,node.object.position)\n        }\n        console.log(node);\n    }\n\n    componentDidMount() {\n        const _this = this;\n        const sceneManager = getGlobal('sceneManager');\n        sceneManager.appendChild('sceneDemo');\n        sceneManager.loadModelWithBg('/source/textures/equirectangular/','royal_esplanade_1k.hdr','/source/models/glb/','CesiumMan.glb');\n        sceneManager.container.addEventListener('click',_this.handlePick,false);\n    }\n\n    componentWillUnmount() {\n        const sceneManager = getGlobal('sceneManager');\n        const _this = this;\n        if(sceneManager.container!==null){\n            sceneManager.container.removeEventListener('click',_this.handlePick,false);\n        }\n    }\n\n    render() {\n\n        return(\n            <div id='sceneDemo'></div>\n        )\n    }\n\n}\n\n\n\nexport default SceneDemo\n","import React, {Component} from 'react'\nimport { createHashHistory } from 'history'\nimport './map.less';\n\n\n\nclass Map extends Component{\n\n    navigateBack=()=>{\n        createHashHistory().goBack();\n    }\n\n    componentDidMount() {\n        this.renderMap();\n    }\n\n    renderMap=()=>{\n        let BMapGL =  window.BMapGL;\n        let map = new BMapGL.Map('myMap');\n        var point = new BMapGL.Point(116.404, 39.915);\n        map.centerAndZoom(point, 15);\n        var marker = new BMapGL.Marker(point);\n        map.addOverlay(marker);\n        var opts = {\n            width : 300,     // \n            height: 100,     // \n            title : \"\" , // \n            message:\"\"\n        }\n        var infoWindow = new BMapGL.InfoWindow(\n            `\n                \n                1730000111\n                \n                0035\n            `\n            , opts);\n        marker.addEventListener(\"click\", function(){\n            map.openInfoWindow(infoWindow, point); //\n        });\n    }\n\n\n\n    render() {\n\n        return(\n            <div className='map'>\n                <div className='bar'>\n                    <img className='back' onClick={this.navigateBack} src={[require('../../img/back.png')]} />\n                    <div className='title'></div>\n                    <div className='status forRepair'></div>\n                </div>\n                <div className='container'>\n                    <div id='myMap'></div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Map;\n","import React,{Component} from 'react'\nimport Example from '../pages/example/device'\nimport Device from '../pages/device/device'\nimport Platform from '../pages/platform/Platform'\nimport SceneDemo from '../pages/sceneManagerDemo/sceneDemo'\nimport Map from '../pages/map/map';\nimport {Layout, Menu, Badge} from 'antd'\nimport {Link,HashRouter, Route} from 'react-router-dom'\nconst {  Content, Sider } = Layout;\nconst { SubMenu } = Menu;\n\nclass OwnLayout extends Component{\n\n\n    state = {\n        collapsed: false,\n    };\n\n    onCollapse = collapsed => {\n        this.setState({ collapsed });\n    };\n\n\n    render() {\n        return(\n            <Layout style={{ minHeight: '100vh' }}>\n                <HashRouter>\n                <Sider collapsible collapsed={this.state.collapsed} onCollapse={this.onCollapse}>\n                    <Menu theme=\"dark\" defaultSelectedKeys={['platform']} mode=\"inline\">\n                        <Menu.Item key='platform'><Link to={{pathname:'/',state:{id:0}}}></Link></Menu.Item>\n                        <SubMenu\n                            key=\"device\"\n                            title={<span></span>}\n                        >\n                            <SubMenu\n                                key='AGM'\n                                title={<span>AGM</span>}\n                            >\n                                <Menu.Item key='AGM-1'><Link to={{pathname:'/device',state:{id:1}}}></Link></Menu.Item>\n                                <Menu.Item key='AGM-2'><Link to={{pathname:'/device/east',state:{id:2}}}><Badge style={{marginLeft:'15px'}} count={2} /></Link></Menu.Item>\n                            </SubMenu>\n                        </SubMenu>\n                    </Menu>\n                </Sider>\n                <Layout>\n                    <Content>\n                        <Route exact path='/' component={Platform} />\n                        <Route exact path='/example' component={Example} />\n                        <Route exact path='/device' component={Device} />\n                        <Route exact path='/device/east' component={Device} />\n                        <Route exact path='/sceneManager' component={SceneDemo}/>\n                        <Route exact path='/map' component={Map}/>\n                    </Content>\n                </Layout>\n                </HashRouter>\n            </Layout>\n        )\n    }\n}\n\nexport default OwnLayout;\n","import React, { Component } from 'react';\nimport {Provider} from 'react-redux';\nimport {createStore,applyMiddleware,compose} from 'redux';\nimport Thunk from 'redux-thunk';\nimport {createLogger} from 'redux-logger';\nimport appReducers from './reducers';\nimport {BrowserRouter} from 'react-router-dom';\nimport Layout from './layout/layout';\nimport 'antd/dist/antd.css'\n\n\n\n\n\nimport './App.css';\n\nconst loggerMiddleware = createLogger();\nfunction configureStore(initialState) {\n  const enhancer = compose(\n      applyMiddleware(\n          Thunk,\n          loggerMiddleware,\n      ),\n  );\n  return createStore(appReducers, initialState, enhancer);\n}\n\nconst store = configureStore({\n  test: {},\n});\n\nclass App extends Component {\n\n  state={\n    collapsed: false,\n  }\n\n\n\n  render(){\n    return (\n        <Provider store={store}>\n          <BrowserRouter>\n            <Layout/>\n          </BrowserRouter>\n        </Provider>\n    );\n  }\n\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as THREE from \"three\";\n\nimport Application from './common/sceneConfig/Application'\nimport SceneManager from './common/SceneManager'\n\nimport {set,get} from './common/utils/globalData'\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nset(\"EventDispatcher\", new THREE.EventDispatcher());\nset(\"Application\", new Application());\n\nset(\"sceneManager\", new SceneManager());\nget(\"sceneManager\").init();\n\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}