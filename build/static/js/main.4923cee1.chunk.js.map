{"version":3,"sources":["img/map.png","common/controllers/OrbitControls.js","img/close.png","utils/http.js","common/sceneConfig/BaseScene.js","common/sceneConfig/action/BaseAction.js","common/sceneConfig/action/PlatformAction.js","common/utils/globalData.js","common/sceneConfig/animations/BaseSceneAnimation.js","common/sceneConfig/animations/PlatformSceneAnimation.js","common/sceneConfig/PlatformScene.js","common/sceneConfig/DeviceScene.js","common/sceneConfig/Application.js","common/loaders/GLTFLoader.js","common/loaders/RGBELoader.js","common/utils/RoughnessMipmapper.js","common/utils/util.js","common/SceneManager.js","actions/actionTypes.js","reducers/test.js","reducers/index.js","pages/example/device.js","components/status/status.js","components/networkError/networkError.js","pages/device/device.js","components/modal/modal.js","pages/platform/Platform.js","pages/sceneManagerDemo/sceneDemo.js","layout/layout.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","THREE","require","OrbitControls","object","domElement","undefined","console","warn","document","error","this","enabled","target","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","MOUSE","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TOUCH","TWO","DOLLY_PAN","target0","clone","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","max","min","makeSafe","radius","scale","addScaledVector","panOffset","add","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","type","startEvent","endEvent","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","length","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","event","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","x","y","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchMoveRotate","subVectors","handleTouchMovePan","handleTouchMoveDolly","preventDefault","focus","window","button","ctrlKey","metaKey","shiftKey","handleMouseDownDolly","addEventListener","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","stopPropagation","handleMouseWheel","needsUpdate","keyCode","handleKeyDown","handleTouchStartDollyPan","DOLLY_ROTATE","handleTouchStartDollyRotate","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","tabIndex","prototype","Object","create","EventDispatcher","constructor","MapControls","call","default","axios","defaults","timeout","headers","post","BaseScene","config","sceneName","mixer","poseOfCamera","sceneConfig","positionOfCamera","z","upOfCamera","lookatOfCamera","lookat","poseOfModel","positionOfModel","rotationOfModel","rotation","scaleOfModel","PubSub","subscribe","animate","bind","doWhenModelIsLoaded","unsubscribe","data","delta","isLoaded","animateWhenModelLoaded","animateWhenModelUnLoaded","model_list","count","log","lightMapPath","colorMapFilePath","Frame","metallicMapFilePath","roughnessMapFilePath","path","TriggerType","BaseAction","triggerName","triggerType","funcName","param","node","scene","doWhenModelPicked","doWhenAutoExecute","name","String","doWhenSingleClick","doWhenDoubleClick","PlatformAction","PlatformScene","setup","pop_video","id","src","publish","globalDate","sceneManager","Application","get","key","val","AnimatonsType","PlatformSceneAnimation","action_Half_N","action_Half_S","node_Half_N","node_Half_S","time","timeOfAnimation","timeMax","timeWillEnter","getObjectByName","visible","play","clipAndAction","action","setLoop","current","ceil","next","playActionOnce","e","delay","startAt","clipsAndActions","getGlobal","currentGltf","that","animations","Array","forEach","value","index","parser","loop","finished","updateWhenModelLoaded","updateWhenModelUnLoaded","doWhenModelLoaded","getAnimationClipAndActionBy","stop","paserWhenCustom","platformActions","actionList","triggers","actions","push","sceneAniamtion","DeviceScene","jsonObject","sceneModels","platform","deviceTVM","configParser","immediateExceptions","jsonData","pages","pagesJsonObject","device_tvm","GLTFLoader","manager","Loader","dracoLoader","ddsLoader","GLTFRegistry","objects","remove","removeAll","assign","load","url","onLoad","onProgress","onError","resourcePath","LoaderUtils","extractUrlBase","itemStart","_onError","itemError","itemEnd","loader","FileLoader","setPath","setResponseType","crossOrigin","setWithCredentials","parse","gltf","setDRACOLoader","setDDSLoader","content","extensions","decodeText","Uint8Array","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","json","JSON","asset","version","Error","extensionsUsed","i","extensionName","extensionsRequired","KHR_LIGHTS_PUNCTUAL","GLTFLightsExtension","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","MSFT_TEXTURE_DDS","GLTFTextureDDSExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","indexOf","GLTFParser","extension","lightDefs","lights","loadLight","lightIndex","lightNode","lightDef","color","Color","fromArray","range","DirectionalLight","PointLight","SpotLight","spot","innerConeAngle","outerConeAngle","penumbra","decay","intensity","Promise","resolve","getMaterialType","MeshBasicMaterial","extendParams","materialParams","materialDef","pending","opacity","metallicRoughness","pbrMetallicRoughness","isArray","baseColorFactor","array","baseColorTexture","assignTexture","all","BINARY_EXTENSION_CHUNK_TYPES","body","headerView","DataView","header","magic","slice","getUint32","chunkView","chunkIndex","byteLength","chunkLength","chunkType","contentArray","byteOffset","preload","GLTFMeshStandardSGMaterial","params","MeshStandardMaterial","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","join","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","uniforms","specular","setHex","glossiness","specularMap","glossinessMap","_extraUniforms","onBeforeCompile","shader","uniformName","fragmentShader","replace","defineProperties","defines","USE_GLOSSINESSMAP","USE_ROUGHNESSMAP","metalness","roughness","metalnessMap","roughnessMap","setValues","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","emissive","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossMapDef","createMaterial","material","fog","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","TangentSpaceNormalMap","normalScale","displacementMap","displacementScale","displacementBias","alphaMap","envMap","envMapIntensity","refractionRatio","GLTFCubicSplineInterpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","Interpolant","decodePrimitive","primitive","bufferViewIndex","bufferView","gltfAttributeMap","attributes","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","attributeName","threeAttributeName","ATTRIBUTES","toLowerCase","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","normalized","getDependency","then","decodeDracoFile","geometry","attribute","extendTexture","texture","transform","repeat","texCoord","source","copySampleValue_","result","values","valueSize","beforeStart_","afterEnd_","interpolate_","i1","t0","t","t1","stride","stride2","stride3","td","p","pp","ppp","offset1","offset0","s2","s3","s0","s1","p0","m0","p1","m1","WEBGL_CONSTANTS","5120","Int8Array","5121","5122","Int16Array","5123","Uint16Array","5125","Uint32Array","5126","Float32Array","WEBGL_FILTERS","9728","NearestFilter","9729","LinearFilter","9984","NearestMipmapNearestFilter","9985","LinearMipmapNearestFilter","9986","NearestMipmapLinearFilter","9987","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","33071","ClampToEdgeWrapping","33648","MirroredRepeatWrapping","10497","RepeatWrapping","WEBGL_TYPE_SIZES","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","LINEAR","InterpolateLinear","STEP","InterpolateDiscrete","ALPHA_MODES","MIME_TYPE_FORMATS","RGBAFormat","RGBFormat","resolveURL","test","addUnknownExtensionsToUserData","knownExtensions","objectDef","userData","gltfExtensions","assignExtrasToUserData","gltfDef","extras","updateMorphTargets","mesh","meshDef","il","morphTargetInfluences","targetNames","morphTargetDictionary","createPrimitiveKey","primitiveDef","dracoExtension","indices","createAttributesKey","mode","attributesKey","sort","options","cache","primitiveCache","textureLoader","TextureLoader","setCrossOrigin","fileLoader","addPrimitiveAttributes","assignAttributeAccessor","accessorIndex","accessor","setAttribute","gltfAttributeName","setIndex","box","Box3","targets","vector","setX","abs","setY","setZ","expandByVector","boundingBox","sphere","Sphere","getCenter","center","distanceTo","boundingSphere","computeBounds","hasMorphPosition","hasMorphNormal","pendingPositionAccessors","pendingNormalAccessors","pendingAccessor","normal","morphPositions","morphNormals","morphAttributes","morphTargetsRelative","addMorphTargets","toTrianglesDrawMode","drawMode","getIndex","getAttribute","numberOfTriangles","newIndices","TriangleFanDrawMode","getX","newGeometry","markDefs","getDependencies","dependencies","scenes","cameras","catch","nodeDefs","nodes","skinDefs","skins","meshDefs","meshes","meshReferences","meshUses","skinIndex","skinLength","joints","isBone","nodeIndex","nodeLength","nodeDef","skin","isSkinnedMesh","cacheKey","dependency","loadScene","loadNode","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadTexture","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","buffers","uri","reject","bufferViewDef","bufferViews","buffer","sparse","pendingBufferViews","bufferAttribute","itemSize","TypedArray","elementBytes","BYTES_PER_ELEMENT","itemBytes","byteStride","ibSlice","floor","ibCacheKey","ib","InterleavedBuffer","InterleavedBufferAttribute","BufferAttribute","itemSizeIndices","SCALAR","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setW","textureIndex","URL","webkitURL","textureDef","textures","textureExtensions","sourceURI","images","isObjectURL","blob","Blob","mimeType","createObjectURL","getHandler","revokeObjectURL","flipY","format","sampler","samplers","magFilter","minFilter","wrapS","wrapT","mapName","mapDef","isCompressedTexture","assignFinalMaterial","useVertexTangents","tangent","useVertexColors","useFlatShading","useSkinning","useMorphTargets","useMorphNormals","isPoints","uuid","pointsMaterial","PointsMaterial","Material","sizeAttenuation","isLine","lineMaterial","LineBasicMaterial","cachedMaterial","skinning","vertexTangents","vertexColors","flatShading","morphTargets","uv2","uv","materialIndex","materialType","materials","materialExtensions","sgExtension","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","doubleSided","side","DoubleSide","alphaMode","transparent","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","encoding","sRGBEncoding","loadGeometries","primitives","createDracoPrimitive","geometryPromise","cached","promise","BufferGeometry","meshIndex","depthTest","FrontSide","results","geometries","SkinnedMesh","Mesh","skinWeight","normalizeSkinWeights","TriangleStripDrawMode","LineSegments","Line","LineLoop","Points","group","Group","cameraIndex","camera","cameraDef","PerspectiveCamera","MathUtils","radToDeg","yfov","aspectRatio","znear","zfar","OrthographicCamera","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","channel","input","parameters","output","inputAccessors","outputAccessors","tracks","inputAccessor","outputAccessor","TypedKeyframeTrack","updateMatrix","matrixAutoUpdate","NumberKeyframeTrack","QuaternionKeyframeTrack","VectorKeyframeTrack","targetName","interpolation","traverse","isMesh","outputArray","scaled","j","jl","track","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","AnimationClip","instanceNum","o","light","Bone","Object3D","PropertyBinding","sanitizeNodeName","Matrix4","applyMatrix4","buildNodeHierachy","nodeId","parentObject","pendingJoints","jointNodes","bones","boneInverses","jointNode","mat","Skeleton","matrixWorld","children","child","sceneIndex","sceneDef","nodeIds","RGBELoader","DataTextureLoader","UnsignedByteType","rgbe_error","rgbe_error_code","msg","fgets","lineLimit","consume","pos","len","s","chunk","fromCharCode","apply","subarray","RGBEByteToRGBFloat","sourceArray","sourceOffset","destArray","destOffset","RGBEByteToRGBHalf","floatView","int32View","Int32Array","toHalf","bits","m","byteArray","rgbe_header_info","line","match","gamma_re","exposure_re","format_re","dimensions_re","valid","string","comments","programtype","gamma","exposure","width","height","charAt","parseFloat","parseInt","RGBE_ReadHeader","w","h","image_rgba_data","data_rgba","byteValue","scanline_buffer","ptr","ptr_end","l","off","isEncodedRun","rgbeStart","scanline_width","num_scanlines","RGBE_ReadPixels_RLE","RGBEFormat","FloatType","numElements","floatArray","HalfFloatType","halfArray","setDataType","texData","RGBEEncoding","generateMipmaps","LinearEncoding","RoughnessMipmapper","_mipmapMaterial","shaderMaterial","RawShaderMaterial","texelSize","vertexShader","blending","NoBlending","depthWrite","_getMipmapMaterial","_scene","Scene","PlaneBufferGeometry","_flatCamera","_tempTarget","_renderer","renderer","compile","roughnessUpdated","image","isPowerOfTwo","oldTarget","getRenderTarget","autoClear","WebGLRenderTarget","depthBuffer","stencilBuffer","scissorTest","newRoughnessTarget","LinearMipMapLinearFilter","setRenderTarget","mip","viewport","scissor","render","copyFramebufferToTexture","addClipActionFolder","folderName","gui","clipAction","animationClip","actionControls","keyframe","timeScale","repetitions","warpStartTimeScale","warpEndTimeScale","warpDurationInSeconds","warp","fadeDurationInSeconds","fadeIn","fadeOut","effectiveWeight","effectiveTimeScale","actionFolder","addFolder","listen","LoopRepeat","LoopOnce","LoopPingPong","onChange","duration","TWEEN","SceneManager","loadModelWithBg","bgPath","bgFileName","modelPath","modelName","item","bufferPool","model","anamationClip","adjustControl","defaultPositionOfModel","defaultRotationOfModel","defaultScaleOfModel","setPMREM","setTextureTo","obj","pick","mouse","origin","direction","unproject","normalize","intersects","intersectObjects","ifInit","clock","getDelta","controls","stats","animationControls","clipAndActions","getEffectiveTimeScale","getEffectiveWeight","requestAnimationFrame","animateCamera","current1","target1","current2","target2","self","positionVar","x1","y1","z1","x2","y2","z2","tween","Tween","to","onUpdate","onComplete","easing","Easing","Cubic","InOut","start","onWindowResize","aspect","container","offsetWidth","offsetHeight","setSize","init","raycaster","defaultPositionOfCamera","defaultLookAtOfCamera","antialias","alpha","pmremGenerator","compileEquirectangularShader","setClearColor","setPixelRatio","devicePixelRatio","toneMapping","toneMappingExposure","outputEncoding","ambi","spotLight","Stats","appendChild","div","newContainer","getElementById","dom","removeChild","clip","findByName","mixerControls","stopAllAction","gltfs","sceneModel","setCameraPos","setModelPos","size","setFromObject","getSize","near","far","getPmremTexture","environment","fromEquirectangular","roughnessMipmapper","_this","dat","mixerFolder","control","getAnimationClipAndActionByNameWithMixerAndGltfs","animationAction","r","names","buildTypes","testDate","actionTypes","TEST","appReducer","combineReducers","testReducers","Example","handlePick","scenePath","Component","Status","list","selected","errorJudjement","status","handleClick","setState","nextProps","nextContext","className","onClick","title","tip","tipIndex","PureComponent","NetworkError","Device","statusList","showError","handleShow","setTimeout","getStatus","http","res","bgFilePath","modelFilePath","modelFileName","clearTimeout","Modal","show","props","style","onCancel","alt","Platform","handleOpenVideo","handleCancelModal","video","currentReport","nextReport","setVideo","newViedeo","showVideo","report","autoPlay","SceneDemo","Content","Layout","Sider","SubMenu","Menu","OwnLayout","collapsed","onCollapse","minHeight","collapsible","theme","defaultSelectedKeys","Item","pathname","exact","component","loggerMiddleware","createLogger","store","initialState","enhancer","compose","applyMiddleware","Thunk","createStore","appReducers","configureStore","App","Boolean","location","hostname","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.4923cee1.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAdCAYAAABIWle8AAACEklEQVRIS52WTYiOURTHf39fkyKRqVGSMkn5CM2UHbHQxGomC3asrBCy0LwbxmoGzUo27NhgRxJip8RbPkq+Qkr5SKEkH0dnep6n+77d+zzP+57dfc7//O557j333CsiZmaLgV3ANqAfWAh8Bl4CV4ELkt63hyr8YGY9wChwCJgdmyj79hM4CYxJ+pXrCpiZLchm3VACaXfdA7ZL+uKOKZiZTQduAJs7AOXS28BWSX9y2DGg0QUoD/HfbcjM+oDXFWtUNY+v4TKH7QMmq9Q1/PsddhPYkhD/BiaAO8Am4DAwM6G95bC3wJKEYFTSidxnZkeBYtwW89FhXiezErA1kh4HsNXAo4TWHPYNmJsQ7JB0KYCNAMW4Lea7wx4A6xOwN8CwpKaZrQOuAEsT2qbDTgMHKnbrKzC/QjPpsAHgfo2tr5IM5ifgGjBUpS7xX5c0lMNWAU1gRhfAv8BaSU/CrnEG2NsF7KykqbgQ1gu8AOZ1APSy6pf0qQWWtSI/LuMdwI5IKvSxTvvUO0AN4CtgZbTTBlU+DFyuARuR5EVcWEtmAdC7xMYS4F1J3kVaLAXz4+WFPC0C/AcMSnpYC5ZtxjlgdwR2XtKeWNbRzDLYIuA5MCcI/AEsl/ShI1gG9Dv0eBDYkDSWWstkZhnML+JnWSd+B6yQ5JdH1EphGXCnPwf8uSDpYlnJ1IG55hRwUJKVwf4DxeG0sU2T1x8AAAAASUVORK5CYII=\"","/* three-orbitcontrols addendum */ var THREE = require('three');\n/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n * @author ScieCode / http://github.com/sciecode\n */\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nTHREE.OrbitControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\n\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new THREE.Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.05;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = false; // if true, pan in screen-space\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// Set to false to disable use of the keys\n\tthis.enableKeys = true;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { LEFT: THREE.MOUSE.ROTATE, MIDDLE: THREE.MOUSE.DOLLY, RIGHT: THREE.MOUSE.PAN };\n\n\t// Touch fingers\n\tthis.touches = { ONE: THREE.TOUCH.ROTATE, TWO: THREE.TOUCH.DOLLY_PAN };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new THREE.Vector3();\n\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t} else {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t}\n\n\t\t\t// restrict theta to be between desired limits\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t}\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tscope.domElement.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = {\n\t\tNONE: - 1,\n\t\tROTATE: 0,\n\t\tDOLLY: 1,\n\t\tPAN: 2,\n\t\tTOUCH_ROTATE: 3,\n\t\tTOUCH_PAN: 4,\n\t\tTOUCH_DOLLY_PAN: 5,\n\t\tTOUCH_DOLLY_ROTATE: 6\n\t};\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new THREE.Spherical();\n\tvar sphericalDelta = new THREE.Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new THREE.Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new THREE.Vector2();\n\tvar rotateEnd = new THREE.Vector2();\n\tvar rotateDelta = new THREE.Vector2();\n\n\tvar panStart = new THREE.Vector2();\n\tvar panEnd = new THREE.Vector2();\n\tvar panDelta = new THREE.Vector2();\n\n\tvar dollyStart = new THREE.Vector2();\n\tvar dollyEnd = new THREE.Vector2();\n\tvar dollyDelta = new THREE.Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\tvar needsUpdate = false;\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.update();\n\n\t\t}\n\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\tif ( event.touches.length === 1 ) {\n\n\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartPan( event ) {\n\n\t\tif ( event.touches.length === 1 ) {\n\n\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyStart.set( 0, distance );\n\n\t}\n\n\tfunction handleTouchStartDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchStartPan( event );\n\n\t}\n\n\tfunction handleTouchStartDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\tif ( event.touches.length === 1 ) {\n\n\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateEnd.set( x, y );\n\n\t\t}\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t}\n\n\tfunction handleTouchMovePan( event ) {\n\n\t\tif ( event.touches.length === 1 ) {\n\n\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanEnd.set( x, y );\n\n\t\t}\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t}\n\n\tfunction handleTouchMoveDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyEnd.set( 0, distance );\n\n\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\tdollyIn( dollyDelta.y );\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t}\n\n\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t}\n\n\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t}\n\n\tfunction handleTouchEnd( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onMouseDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\t// Prevent the browser from scrolling.\n\n\t\tevent.preventDefault();\n\n\t\t// Manually set the focus since calling preventDefault above\n\t\t// prevents the browser from setting it automatically.\n\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase 0:\n\n\t\t\t\tswitch ( scope.mouseButtons.LEFT ) {\n\n\t\t\t\t\tcase THREE.MOUSE.ROTATE:\n\n\t\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.MOUSE.PAN:\n\n\t\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\n\t\t\tcase 1:\n\n\t\t\t\tswitch ( scope.mouseButtons.MIDDLE ) {\n\n\t\t\t\t\tcase THREE.MOUSE.DOLLY:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\t\t\tbreak;\n\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tswitch ( scope.mouseButtons.RIGHT ) {\n\n\t\t\t\t\tcase THREE.MOUSE.ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.MOUSE.PAN:\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\n\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\tcase THREE.TOUCH.ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.TOUCH.PAN:\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\tcase THREE.TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\tscope.domElement.addEventListener( 'keydown', onKeyDown, false );\n\n\t// make sure element can receive keys.\n\n\tif ( scope.domElement.tabIndex === - 1 ) {\n\n\t\tscope.domElement.tabIndex = 0;\n\n\t}\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nTHREE.OrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls;\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nTHREE.MapControls = function ( object, domElement ) {\n\n\tTHREE.OrbitControls.call( this, object, domElement );\n\n\tthis.mouseButtons.LEFT = THREE.MOUSE.PAN;\n\tthis.mouseButtons.RIGHT = THREE.MOUSE.ROTATE;\n\n\tthis.touches.ONE = THREE.TOUCH.PAN;\n\tthis.touches.TWO = THREE.TOUCH.DOLLY_ROTATE;\n\n};\n\nTHREE.MapControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.MapControls.prototype.constructor = THREE.MapControls;\n/* three-orbitcontrols addendum */ module.exports = exports.default = THREE.OrbitControls;\n","module.exports = \"data:image/png;base64,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\"","import axios from 'axios'\n\naxios.defaults.timeout = 10000;\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded;charset=UTF-8';\n\n\nexport default axios;\n","import PubSub from 'pubsub-js'\nimport {Vector3} from \"three\";\n\nclass BaseScene {\n\n    constructor(config) {\n        this.sceneName = undefined; // set in sub class\n        this.config = config;\n        this.mixer = undefined;\n        // camera\n        let poseOfCamera = config.sceneConfig.poseOfCamera;\n        // if (poseOfCamera !== undefined) {\n            this.positionOfCamera = new Vector3(poseOfCamera.position.x, poseOfCamera.position.y, poseOfCamera.position.z);\n            this.upOfCamera = new Vector3(poseOfCamera.up.x, poseOfCamera.up.y, poseOfCamera.up.z);\n            this.lookatOfCamera = new Vector3(poseOfCamera.lookat.x, poseOfCamera.lookat.y, poseOfCamera.lookat.z);\n        // }\n\n        let poseOfModel = config.sceneConfig.poseOfModel;\n        // if (poseOfModel !== undefined) {\n            this.positionOfModel = new Vector3(poseOfModel.position.x, poseOfModel.position.y, poseOfModel.position.z);\n            this.rotationOfModel = new Vector3(poseOfModel.rotation.x, poseOfModel.rotation.y, poseOfModel.rotation.z);\n            this.scaleOfModel = new Vector3(poseOfModel.scale.x, poseOfModel.scale.y, poseOfModel.scale.z);\n        // }\n\n    }\n\n    setup() {\n        PubSub.subscribe(this.sceneName + 'animate', this.animate.bind(this));\n        PubSub.subscribe(this.sceneName + 'loaded', this.doWhenModelIsLoaded.bind(this));\n    }\n\n    destory() {\n        PubSub.unsubscribe(this.sceneName + 'animate');\n        PubSub.unsubscribe(this.sceneName + 'loaded');\n    }\n\n    doWhenModelIsLoaded(event, data) {\n\n    }\n\n    animate(event, data) {\n        // console.log('BaseScene.animate' + data.delta + ' ' + data.isLoaded);\n        if (data.delta === null || data.delta === undefined) {\n            return;\n        }\n        if (event.isLoaded) {\n            this.animateWhenModelLoaded(data.delta);\n        } else {\n            this.animateWhenModelUnLoaded(data.delta);\n        }\n    }\n\n    animateWhenModelUnLoaded(delta) {\n\n    }\n\n    animateWhenModelLoaded(delta) {\n\n    }\n\n    // ---\n    modelFilePath() {\n        return '/source/models/glb/';\n    }\n\n    modelFileName() {\n        // return 'CesiumMan.glb';\n        if (this.config.sceneConfig.model_list.count <= 0) {\n            console.log('model file count is 0 in config.json file');\n        }\n        return this.config.sceneConfig.model_list[0];\n    }\n\n    bgFilePath() {\n        return '/source/textures/equirectangular/';\n    }\n\n    bgFileName() {\n        return 'royal_esplanade_1k.hdr';\n    }\n\n    lightMapPath(){\n        if (this.config.sceneConfig.lightMapPath.count <= 0) {\n            console.log('model file count is 0 in config.json file');\n        }\n        return this.config.sceneConfig.lightMapPath[0];\n    }\n\n    colorMapFilePath() { // return \"/source/textures/device/Frame_mat_Base_Color.jpg\";\n        if (this.config.sceneConfig.colorMapFilePath !== null) {\n            return this.config.sceneConfig.Frame.colorMapFilePath;\n        }\n        return \"\";\n    }\n\n    metallicMapFilePath() { // return \"/source/textures/device/Frame_mat_Metallic.jpg\";\n        if (this.config.sceneConfig.metallicMapFilePath !== null) {\n            return this.config.sceneConfig.Frame.metallicMapFilePath;\n        }\n        return \"\";\n    }\n\n    roughnessMapFilePath() { // return \"/source/textures/device/Frame_mat_Roughness.jpg\";\n        if (this.config.sceneConfig.roughnessMapFilePath !== null) {\n            return this.config.sceneConfig.Frame.roughnessMapFilePath;\n        }\n        return \"\";\n    }\n\n    // colorMapFilePath(){\n    //     return \"\";\n    // }\n    //\n    // metallicMapFilePath(){\n    //     return \"\";\n    // }\n    //\n    // roughnessMapFilePath(){\n    //     return \"\";\n    // }\n\n}\n\nBaseScene.path = 'baseScene';\n\nexport default BaseScene;\n\n// const sceneManager =  getGlobal('sceneManager');\n// sceneManager.addEventListener('animate', function (event) {\n//     console.log('BaseScene.animate' + event.delta + '  ' + event.isLoaded);\n// });\n\n// BaseScene.init = function () {\n//     this.addventListener('animate', this.animate);\n//  };\n// Object.assign( BaseScene.prototype, THREE.EventDispatcher.prototype );","import PubSub from \"pubsub-js\";\nimport Application‌‌ from \"../Application\";\nimport PlatformScene from \"../PlatformScene\";\n\nexport var TriggerType = {\n    Unknow: 'Unknow',// 未知\n    Auto: 'Auto'   // 自动触发\n    , Single: 'single' // 单击触发\n    , Double: 'Double' // 双击触发\n};\n\n/* 针对模型 */\nclass BaseAction {\n\n    constructor(config) {\n        this.sceneName = undefined;\n        // 触发（单点、自动等）\n        this.triggerName = config.triggerName;\n        this.triggerType = config.triggerType;\n        this.funcName = config.funcName;\n        this.param = config.param;\n\n        // 动画\n        this.node = undefined;\n        this.scene = undefined;\n\n        // o.time_from_start = 0\n        // o.cur_ani_index = 1\n        //\n        // o.ani_scene_node = nil\n        // o.enable_play_animated = false\n\n        // PubSub.subscribe(PlatformScene.path + BaseAction.path + 'action.loaded', this.doWhenModelIsLoaded.bind(this));\n        // PubSub.subscribe(PlatformScene.path + BaseAction.path + 'action.picked', this.doWhenModelPicked.bind(this));\n\n    }\n\n    setup() {\n        PubSub.subscribe(this.sceneName + 'pick', this.doWhenModelPicked.bind(this));\n        PubSub.subscribe(this.sceneName + 'loaded', this.doWhenModelIsLoaded.bind(this));\n        // PubSub.subscribe(this.sceneName + 'animate', this.animate.bind(this));\n    }\n\n    destory() {\n        PubSub.unsubscribe(this.sceneName + 'pick');\n        PubSub.unsubscribe(this.sceneName + 'loaded');\n    }\n\n    //todo:/*加载完模型后触发*/\n    doWhenModelIsLoaded(event,data) {\n        //data.modelName\n        //todo:1、 获取节点对象 by this.triggerName ；2、如果tiggername对应的节点存在，并且是自动执行的，触发自动只是方法\n        if (this.triggerName !== undefined) {\n            this.node = undefined;\n        }\n\n        if (this.node !== undefined && this.triggerType === TriggerType.Auto) {\n            this.doWhenAutoExecute();\n        }\n\n    }\n\n    //todo:/*加载完模型后触发*/\n    doWhenModelPicked(event, data) {\n        if (data.name instanceof String) {\n            // if (param.name === null || param.name.length === 0) {\n            console.log('pick name error :: ' + data.name);\n            return;\n        }\n\n        if (data.type instanceof String) {\n            console.log('pick type error');\n            return;\n        }\n\n        if (data.name !== this.triggerName) { // name is unmatch\n            return;\n        }\n\n        if (data.type !== this.triggerType) { // type is unmatch\n            return;\n        }\n\n        switch (this.triggerType) {\n            case TriggerType.Single:\n                this.doWhenSingleClick(data);\n                break;\n            case TriggerType.Double:\n                this.doWhenDoubleClick(data);\n                break;\n            default:\n                console.log('位置的triggerType:: ' + this.triggerType);\n        }\n\n    }\n\n    doWhenAutoExecute(param) {\n\n    }\n\n    doWhenSingleClick(param) {\n\n    }\n\n    doWhenDoubleClick(param) {\n\n    }\n\n}\n\nBaseAction.path = 'BaseAction';\nexport default BaseAction;","import BaseAction from \"./BaseAction\";\nimport PlatformScene from \"../PlatformScene\";\nimport PubSub from \"pubsub-js\";\n\n/* 站台模型 */\nclass PlatformAction extends BaseAction {\n\n    constructor(config) {\n        super(config);\n        this.sceneName = PlatformScene.path;\n        this.setup();\n    }\n\n    doWhenSingleClick(param) {\n        super.doWhenSingleClick(param);\n        if (this.funcName === this.pop_video.name){\n            this.pop_video(this.param);\n        } else {\n            console.log('There is no funcation name of ' + this.funcName );\n        }\n    }\n\n    pop_video(param) {\n\n        let id = param.id;\n        let src = param.src || '';\n//        console.log('pop_video id is ' + id + ' src is ' + src );\n        PubSub.publish(PlatformScene.path + 'pop_video', {id: id, src: src});\n    }\n\n}\n\nPlatformAction.path = 'PlatformAction';\nexport default PlatformAction;","const globalDate = {\n    sceneManager: null,\n    Application: null,\n    EventDispatcher: null\n};\n\nconst get=(key)=>{\n    return globalDate[key]\n};\n\nconst set=(key,val)=>{\n    globalDate[key]=val;\n};\n\nexport {get,set}\n","import PubSub from \"pubsub-js\";\nimport {get as getGlobal} from \"../../utils/globalData\";\n\nexport var AnimatonsType = {\n    unknow: 'unknow',// 未知\n    auto: 'auto'   // 自动播放\n    , custom: 'custom' // 自定义播放\n};\n\nclass BaseSceneAnimation {\n\n    constructor(config) {\n        this.config = config;\n        this.sceneName = undefined;\n        this.clipsAndActions = [];\n        this.scene = undefined;\n    }\n\n    doWhenModelLoaded(event, data) {\n\n        const sceneManager = getGlobal('sceneManager');\n\n        this.scene = sceneManager.currentGltf.scene;\n\n        let that = this;\n        let animations = this.config;\n        if (animations instanceof Array) {\n            animations.forEach(function (value, index) {\n                that.parser(value);//.bind(that);\n            });\n        }\n\n        this.mixer = sceneManager.mixer;\n        this.mixer.addEventListener('loop', function (e) {\n            that.loop(e);\n        });\n\n        this.mixer.addEventListener('finished', function (e) {\n            console.log('帧动画结束回调：', e);\n            that.finished(e)\n        });\n\n    }\n\n    paserWhenCustom(config, clipAndAction) {\n\n    }\n\n    animate(event, data) {\n        // console.log('BaseScene.animate' + data.delta + ' ' + data.isLoaded);\n        if (data.delta === null || data.delta === undefined) {\n            console.log('BaseAniamtion.animate delta is null or undefined');\n            return;\n        }\n        if (data.isLoaded) {\n            this.updateWhenModelLoaded(data.delta);\n        } else {\n            this.updateWhenModelUnLoaded(data.delta);\n        }\n    }\n\n    updateWhenModelLoaded(delta) {\n        //todo: 获得对应的自动控制动画并播放animationAction并播放\n\n    }\n\n    updateWhenModelUnLoaded(delta) {\n\n    }\n\n    // --\n\n    setup() {\n        if (this.sceneName === undefined) {\n            console.error('BaseAnimation.sceneName is undefined')\n        }\n        PubSub.subscribe(this.sceneName + 'loaded', this.doWhenModelLoaded.bind(this));\n        PubSub.subscribe(this.sceneName + 'animate', this.animate.bind(this));\n    }\n\n    parser(config) {\n        const sceneManager = getGlobal('sceneManager');\n        let clipAndAction = sceneManager.getAnimationClipAndActionBy(config.name);\n        if (clipAndAction === undefined){return;}\n        if (clipAndAction.action === undefined){return;}\n        clipAndAction.action.stop();\n        if (config.type === AnimatonsType.auto) {\n            clipAndAction.action.play();\n        } else if (config.type === AnimatonsType.custom) {\n            // let\n            this.paserWhenCustom(config, clipAndAction);\n            // this.clipsAndActions.push(clipAndAction);\n        } else {\n            console.log('unknow AnimationsType :: ' + config.type);\n        }\n    }\n\n    play() {\n\n    }\n\n    finished(e) {\n\n    }\n\n    loop(e) {\n\n    }\n\n}\n\nexport default BaseSceneAnimation;\n\n// export var AnimatonsLoopStyles = {\n//     unknow: 'unknow',// 未知\n//     once: 'once'   // 循环一次\n//     , repeat: 'repeat' // 重复循环n次 n 有repeatcount 决定\n//     , pingpong: 'pingpong' // 来回循环播放\n// };\n// PubSub.subscribe(this.sceneName + 'loadedFromCache', this.doWhenModelLoadedFromCache.bind(this));\n// doWhenModelLoadedFromCache(event, data) {}","import BaseSceneAnimation from \"./BaseSceneAnimation\";\nimport PlatformScene from \"../PlatformScene\";\nimport * as THREE from 'three'\nimport PubSub from \"pubsub-js\";\n\nclass PlatformSceneAnimation extends BaseSceneAnimation {\n    constructor(config) {\n        super(config);\n        // (3*60 - 23.667)/2\n        this.sceneName = PlatformScene.path;\n        this.action_Half_N = undefined;\n        this.action_Half_S = undefined;\n        this.node_Half_N = undefined;\n        this.node_Half_S = undefined;\n        this.time = 60;//3*\n        this.timeOfAnimation = 23.67;\n        this.timeMax = this.time;//3*\n        this.timeWillEnter = 10;//30\n        this.setup();\n    }\n\n    doWhenModelLoaded(event, data) {\n        super.doWhenModelLoaded(event, data);\n        this.node_Half_N = this.scene.getObjectByName('North_Tr_Dummy');\n        this.node_Half_N.visible = false;\n        this.node_Half_S = this.scene.getObjectByName('South_Tr_Dummy');\n        this.node_Half_S.visible = false;\n        this.play();\n    }\n\n    paserWhenCustom(config, clipAndAction) {\n        console.log('');\n        let name = config.name;\n        let action = clipAndAction.action;\n        if (name === 'Half_N') {\n            action.setLoop(THREE.LoopOnce);\n            this.action_Half_N = action;\n        } else if (name === 'Half_S') {\n            // action.startAt(0);\n            action.setLoop(THREE.LoopOnce);\n            this.action_Half_S = action;\n        }\n    }\n\n    updateWhenModelLoaded(delta) {\n\n        if (this.time >= 0) {\n            this.time = this.time - delta;\n        } else {\n            this.play();\n            this.time = this.timeMax;\n        }\n\n\n        // let current = '本次列车：开往安河桥北 ';\n        let current = '';\n        if (this.time <= this.timeMax && this.time > this.timeMax - this.timeOfAnimation ) {// 已进站\n            current += '已进站';\n        } else if (this.time <= this.timeWillEnter ) {//即将进站\n            current += '即将进站';\n        } else {//\n            current += '等待' + Math.ceil(this.time/ 60) + '分钟';\n        }\n\n        // let next = '下一班列车还需等待：' + (this.timeMax - this.time)/60 + '分钟';\n        let next = Math.ceil((this.timeMax + this.time ) / 60);\n\n        PubSub.publish(PlatformScene.path + 'report', {current: current, next: next});\n\n    }\n\n    // ---\n\n    play() {\n        // super.play();\n\n        // this.action_Half_N.setDuration(3);\n        // this.action_Half_S.setDuration(3);\n\n        this.node_Half_S.visible = true;\n        this.playActionOnce(this.action_Half_S);\n\n    }\n\n    finished(e) {\n        if (e.action === this.action_Half_S) {\n            this.node_Half_S.visible = false;\n            this.node_Half_N.visible = true;\n            this.playActionOnce(this.action_Half_N);\n        } else if (e.action === this.action_Half_N) {\n            this.node_Half_N.visible = false;\n        }\n    }\n\n    playActionOnce(action, delay = 0) {\n        if (action !== undefined) {\n            action.reset();\n            action.setLoop(THREE.LoopOnce, undefined);\n            // action.startAt(delay);\n            action.play();\n        } else {\n            console.log('action is undefined');\n        }\n    }\n\n    playActionRepeat(action, delay = 0) {\n        if (action !== undefined) {\n            // action.reset();\n            action.setLoop(THREE.LoopRepeat, Infinity);\n            action.startAt(delay);\n            action.play();\n        } else {\n            console.log('action is undefined');\n        }\n    }\n\n}\n\nexport default PlatformSceneAnimation;","import BaseScene from './BaseScene'\nimport PlatformAction from \"./action/PlatformAction\";\nimport PlatformSceneAnimation from \"./animations/PlatformSceneAnimation\";\n\n\nclass PlatformScene extends BaseScene {\n\n    constructor(config) {\n\n        super(config);\n\n        this.sceneName = PlatformScene.path;\n\n        // parse actions\n        this.platformActions = [];\n        let that = this;\n        let actionList = config.sceneConfig.triggers.actions;\n        if (actionList instanceof Array){\n            actionList.forEach(function (value,index) {\n                let action = new PlatformAction(value);\n                that.platformActions.push(action);\n            });\n        }\n\n        this.sceneAniamtion = new PlatformSceneAnimation(this.config.sceneConfig.animations);\n\n        this.setup();\n\n    }\n\n    doWhenModelIsLoaded(event, data) {\n        // data.modelName\n        super.doWhenModelIsLoaded(event, data);\n    }\n\n    animate(event,data) {\n        // console.log('PlatformScene.animate' + data.delta + '  ' + data.isLoaded);\n    }\n\n    animateWhenModelLoaded(delta) {\n    }\n\n    animateWhenModelUnLoaded(delta) {\n    }\n\n}\n\nPlatformScene.path = 'platform.';\n\nexport default PlatformScene;","import BaseScene from './BaseScene'\n\nclass DeviceScene extends BaseScene {\n\n    constructor(jsonObject) {\n        super(jsonObject);\n        this.sceneName = DeviceScene.path;\n        this.setup();\n    }\n\n    doWhenModelIsLoaded(event, data) {\n        // data.modelName\n        super.doWhenModelIsLoaded(event, data);\n    }\n\n    animateWhenModelLoaded(delta) {\n    }\n\n    animateWhenModelUnLoaded(delta) {\n    }\n    //\n    // colorMapFilePath() { // return \"/source/textures/device/Frame_mat_Base_Color.jpg\";\n    //     if (this.config.sceneConfig.colorMapFilePath !== null) {\n    //         return this.config.sceneConfig.colorMapFilePath;\n    //     }\n    // }\n    //\n    // metallicMapFilePath() { // return \"/source/textures/device/Frame_mat_Metallic.jpg\";\n    //     if (this.config.sceneConfig.metallicMapFilePath !== null) {\n    //         return this.config.sceneConfig.metallicMapFilePath;\n    //     }\n    // }\n    //\n    // roughnessMapFilePath() { // return \"/source/textures/device/Frame_mat_Roughness.jpg\";\n    //     if (this.config.sceneConfig.roughnessMapFilePath !== null) {\n    //         return this.config.sceneConfig.roughnessMapFilePath;\n    //     }\n    // }\n}\n\nDeviceScene.path = 'deviceTVM.';\n\nexport default DeviceScene;","import http from '../../utils/http'\nimport PlatformScene from \"./PlatformScene\";\nimport DeviceScene from \"./DeviceScene\";\nimport PubSub from 'pubsub-js';\nimport jsonData from './config'\n\nclass Application {\n\n    constructor() {\n\n        this.sceneModels = [];\n        this.config = undefined;\n        this.platform = undefined;\n        this.deviceTVM = undefined;\n        this.configParser();\n        PubSub.immediateExceptions = true;\n\n    }\n\n    configParser() {\n\n        // http.get('/source/config.json')\n        //     .then(res => {\n        //         if (res.status === 200) {\n        //             console.log('config.json 解析成功：：\\n' + res.data.pages);\n        //             this.parser(res.data.pages);\n        //         } else {\n        //             console.assert('config.json 解析失败');\n        //         }\n        //     });\n\n\n        this.config = jsonData.pages;\n        this.parser(this.config);\n        console.log('config.json 解析成功：：\\n' + this.config);\n\n    }\n\n    parser(pagesJsonObject) {\n\n        let platform = new PlatformScene(pagesJsonObject.platform);\n        let device_tvm = new DeviceScene(pagesJsonObject.device_tvm);\n        this.platform = platform;\n        this.deviceTVM = device_tvm;\n        this.sceneModels.push(this.platform, this.deviceTVM);\n\n    }\n\n}\n\nApplication.path = 'application';\nexport default Application;\n\n","/**\n * @author Rich Tibbett / https://github.com/richtr\n * @author mrdoob / http://mrdoob.com/\n * @author Tony Parisi / http://www.tonyparisi.com/\n * @author Takahiro / https://github.com/takahirox\n * @author Don McCurdy / https://www.donmccurdy.com\n */\n\nimport {\n\tAnimationClip,\n\tBone,\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tColor,\n\tDirectionalLight,\n\tDoubleSide,\n\tFileLoader,\n\tFrontSide,\n\tGroup,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tInterpolant,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLine,\n\tLineBasicMaterial,\n\tLineLoop,\n\tLineSegments,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLoader,\n\tLoaderUtils,\n\tMaterial,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tMeshStandardMaterial,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPoints,\n\tPointsMaterial,\n\tPropertyBinding,\n\tQuaternionKeyframeTrack,\n\tRGBAFormat,\n\tRGBFormat,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSphere,\n\tSpotLight,\n\tTangentSpaceNormalMap,\n\tTextureLoader,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tVector2,\n\tVector3,\n\tVectorKeyframeTrack,\n\tsRGBEncoding\n} from \"three\";\n\nvar GLTFLoader = ( function () {\n\n\tfunction GLTFLoader( manager ) {\n\n\t\tLoader.call( this, manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ddsLoader = null;\n\n\t}\n\n\tGLTFLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\t\tconstructor: GLTFLoader,\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar resourcePath;\n\n\t\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\t\tresourcePath = this.resourcePath;\n\n\t\t\t} else if ( this.path !== '' ) {\n\n\t\t\t\tresourcePath = this.path;\n\n\t\t\t} else {\n\n\t\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t\t}\n\n\t\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tvar _onError = function ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t};\n\n\t\t\tvar loader = new FileLoader( scope.manager );\n\n\t\t\tloader.setPath( this.path );\n\t\t\tloader.setResponseType( 'arraybuffer' );\n\n\t\t\tif ( scope.crossOrigin === 'use-credentials' ) {\n\n\t\t\t\tloader.setWithCredentials( true );\n\n\t\t\t}\n\n\t\t\tloader.load( url, function ( data ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t\t}, _onError );\n\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t_onError( e );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, _onError );\n\n\t\t},\n\n\t\tsetDRACOLoader: function ( dracoLoader ) {\n\n\t\t\tthis.dracoLoader = dracoLoader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetDDSLoader: function ( ddsLoader ) {\n\n\t\t\tthis.ddsLoader = ddsLoader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tparse: function ( data, path, onLoad, onError ) {\n\n\t\t\tvar content;\n\t\t\tvar extensions = {};\n\n\t\t\tif ( typeof data === 'string' ) {\n\n\t\t\t\tcontent = data;\n\n\t\t\t} else {\n\n\t\t\t\tvar magic = LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\n\n\t\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcontent = LoaderUtils.decodeText( new Uint8Array( data ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar json = JSON.parse( content );\n\n\t\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( json.extensionsUsed ) {\n\n\t\t\t\tfor ( var i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\t\tvar extensionName = json.extensionsUsed[ i ];\n\t\t\t\t\tvar extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_LIGHTS_PUNCTUAL:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFLightsExtension( json );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.MSFT_TEXTURE_DDS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureDDSExtension( this.ddsLoader );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 ) {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar parser = new GLTFParser( json, extensions, {\n\n\t\t\t\tpath: path || this.resourcePath || '',\n\t\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\t\tmanager: this.manager\n\n\t\t\t} );\n\n\t\t\tparser.parse( onLoad, onError );\n\n\t\t}\n\n\t} );\n\n\t/* GLTFREGISTRY */\n\n\tfunction GLTFRegistry() {\n\n\t\tvar objects = {};\n\n\t\treturn\t{\n\n\t\t\tget: function ( key ) {\n\n\t\t\t\treturn objects[ key ];\n\n\t\t\t},\n\n\t\t\tadd: function ( key, object ) {\n\n\t\t\t\tobjects[ key ] = object;\n\n\t\t\t},\n\n\t\t\tremove: function ( key ) {\n\n\t\t\t\tdelete objects[ key ];\n\n\t\t\t},\n\n\t\t\tremoveAll: function () {\n\n\t\t\t\tobjects = {};\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t/*********************************/\n\t/********** EXTENSIONS ***********/\n\t/*********************************/\n\n\tvar EXTENSIONS = {\n\t\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\t\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\t\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\t\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n\t\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\t\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\t\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\t\tMSFT_TEXTURE_DDS: 'MSFT_texture_dds'\n\t};\n\n\t/**\n\t * DDS Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds\n\t *\n\t */\n\tfunction GLTFTextureDDSExtension( ddsLoader ) {\n\n\t\tif ( ! ddsLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.MSFT_TEXTURE_DDS;\n\t\tthis.ddsLoader = ddsLoader;\n\n\t}\n\n\t/**\n\t * Punctual Lights Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n\t */\n\tfunction GLTFLightsExtension( json ) {\n\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\tvar extension = ( json.extensions && json.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ] ) || {};\n\t\tthis.lightDefs = extension.lights || [];\n\n\t}\n\n\tGLTFLightsExtension.prototype.loadLight = function ( lightIndex ) {\n\n\t\tvar lightDef = this.lightDefs[ lightIndex ];\n\t\tvar lightNode;\n\n\t\tvar color = new Color( 0xffffff );\n\t\tif ( lightDef.color !== undefined ) color.fromArray( lightDef.color );\n\n\t\tvar range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type, \"' + lightDef.type + '\".' );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tlightNode.decay = 2;\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = lightDef.name || ( 'light_' + lightIndex );\n\n\t\treturn Promise.resolve( lightNode );\n\n\t};\n\n\t/**\n\t * Unlit Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n\t */\n\tfunction GLTFMaterialsUnlitExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tGLTFMaterialsUnlitExtension.prototype.getMaterialType = function () {\n\n\t\treturn MeshBasicMaterial;\n\n\t};\n\n\tGLTFMaterialsUnlitExtension.prototype.extendParams = function ( materialParams, materialDef, parser ) {\n\n\t\tvar pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/* BINARY EXTENSION */\n\tvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\n\tvar BINARY_EXTENSION_HEADER_LENGTH = 12;\n\tvar BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\n\tfunction GLTFBinaryExtension( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tvar headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\n\t\tthis.header = {\n\t\t\tmagic: LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tvar chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tvar chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkView.byteLength ) {\n\n\t\t\tvar chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tvar chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tvar contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = LoaderUtils.decodeText( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tvar byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * DRACO Mesh Compression Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n\t */\n\tfunction GLTFDracoMeshCompressionExtension( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tGLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function ( primitive, parser ) {\n\n\t\tvar json = this.json;\n\t\tvar dracoLoader = this.dracoLoader;\n\t\tvar bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tvar gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tvar threeAttributeMap = {};\n\t\tvar attributeNormalizedMap = {};\n\t\tvar attributeTypeMap = {};\n\n\t\tfor ( var attributeName in gltfAttributeMap ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( attributeName in primitive.attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tvar accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tvar componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( var attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tvar attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tvar normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Texture Transform Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n\t */\n\tfunction GLTFTextureTransformExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\tGLTFTextureTransformExtension.prototype.extendTexture = function ( texture, transform ) {\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.' );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t};\n\n\t/**\n\t * Specular-Glossiness Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n\t */\n\n\t/**\n\t * A sub class of StandardMaterial with some of the functionality\n\t * changed via the `onBeforeCompile` callback\n\t * @pailhead\n\t */\n\n\tfunction GLTFMeshStandardSGMaterial( params ) {\n\n\t\tMeshStandardMaterial.call( this );\n\n\t\tthis.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t//various chunks that need replacing\n\t\tvar specularMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tuniform sampler2D specularMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tuniform sampler2D glossinessMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar specularMapFragmentChunk = [\n\t\t\t'vec3 specularFactor = specular;',\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n\t\t\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\n\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapFragmentChunk = [\n\t\t\t'float glossinessFactor = glossiness;',\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar lightPhysicalFragmentChunk = [\n\t\t\t'PhysicalMaterial material;',\n\t\t\t'material.diffuseColor = diffuseColor.rgb;',\n\t\t\t'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n\t\t\t'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n\t\t\t'material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.',\n\t\t\t'material.specularRoughness += geometryRoughness;',\n\t\t\t'material.specularRoughness = min( material.specularRoughness, 1.0 );',\n\t\t\t'material.specularColor = specularFactor.rgb;',\n\t\t].join( '\\n' );\n\n\t\tvar uniforms = {\n\t\t\tspecular: { value: new Color().setHex( 0xffffff ) },\n\t\t\tglossiness: { value: 1 },\n\t\t\tspecularMap: { value: null },\n\t\t\tglossinessMap: { value: null }\n\t\t};\n\n\t\tthis._extraUniforms = uniforms;\n\n\t\t// please see #14031 or #13198 for an alternate approach\n\t\tthis.onBeforeCompile = function ( shader ) {\n\n\t\t\tfor ( var uniformName in uniforms ) {\n\n\t\t\t\tshader.uniforms[ uniformName ] = uniforms[ uniformName ];\n\n\t\t\t}\n\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( 'uniform float roughness;', 'uniform vec3 specular;' );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( 'uniform float metalness;', 'uniform float glossiness;' );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\n\n\t\t};\n\n\t\t/*eslint-disable*/\n\t\tObject.defineProperties(\n\t\t\tthis,\n\t\t\t{\n\t\t\t\tspecular: {\n\t\t\t\t\tget: function () { return uniforms.specular.value; },\n\t\t\t\t\tset: function ( v ) { uniforms.specular.value = v; }\n\t\t\t\t},\n\t\t\t\tspecularMap: {\n\t\t\t\t\tget: function () { return uniforms.specularMap.value; },\n\t\t\t\t\tset: function ( v ) { uniforms.specularMap.value = v; }\n\t\t\t\t},\n\t\t\t\tglossiness: {\n\t\t\t\t\tget: function () { return uniforms.glossiness.value; },\n\t\t\t\t\tset: function ( v ) { uniforms.glossiness.value = v; }\n\t\t\t\t},\n\t\t\t\tglossinessMap: {\n\t\t\t\t\tget: function () { return uniforms.glossinessMap.value; },\n\t\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\t\tuniforms.glossinessMap.value = v;\n\t\t\t\t\t\t//how about something like this - @pailhead\n\t\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\t\tthis.defines.USE_GLOSSINESSMAP = '';\n\t\t\t\t\t\t\t// set USE_ROUGHNESSMAP to enable vUv\n\t\t\t\t\t\t\tthis.defines.USE_ROUGHNESSMAP = '';\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tdelete this.defines.USE_ROUGHNESSMAP;\n\t\t\t\t\t\t\tdelete this.defines.USE_GLOSSINESSMAP;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\t/*eslint-enable*/\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\n\t\tthis.setValues( params );\n\n\t}\n\n\tGLTFMeshStandardSGMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\n\tGLTFMeshStandardSGMaterial.prototype.constructor = GLTFMeshStandardSGMaterial;\n\n\tGLTFMeshStandardSGMaterial.prototype.copy = function ( source ) {\n\n\t\tMeshStandardMaterial.prototype.copy.call( this, source );\n\t\tthis.specularMap = source.specularMap;\n\t\tthis.specular.copy( source.specular );\n\t\tthis.glossinessMap = source.glossinessMap;\n\t\tthis.glossiness = source.glossiness;\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\t\treturn this;\n\n\t};\n\n\tfunction GLTFMaterialsPbrSpecularGlossinessExtension() {\n\n\t\treturn {\n\n\t\t\tname: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\n\n\t\t\tspecularGlossinessParams: [\n\t\t\t\t'color',\n\t\t\t\t'map',\n\t\t\t\t'lightMap',\n\t\t\t\t'lightMapIntensity',\n\t\t\t\t'aoMap',\n\t\t\t\t'aoMapIntensity',\n\t\t\t\t'emissive',\n\t\t\t\t'emissiveIntensity',\n\t\t\t\t'emissiveMap',\n\t\t\t\t'bumpMap',\n\t\t\t\t'bumpScale',\n\t\t\t\t'normalMap',\n\t\t\t\t'normalMapType',\n\t\t\t\t'displacementMap',\n\t\t\t\t'displacementScale',\n\t\t\t\t'displacementBias',\n\t\t\t\t'specularMap',\n\t\t\t\t'specular',\n\t\t\t\t'glossinessMap',\n\t\t\t\t'glossiness',\n\t\t\t\t'alphaMap',\n\t\t\t\t'envMap',\n\t\t\t\t'envMapIntensity',\n\t\t\t\t'refractionRatio',\n\t\t\t],\n\n\t\t\tgetMaterialType: function () {\n\n\t\t\t\treturn GLTFMeshStandardSGMaterial;\n\n\t\t\t},\n\n\t\t\textendParams: function ( materialParams, materialDef, parser ) {\n\n\t\t\t\tvar pbrSpecularGlossiness = materialDef.extensions[ this.name ];\n\n\t\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\n\n\t\t\t\t\tvar array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\n\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', pbrSpecularGlossiness.diffuseTexture ) );\n\n\t\t\t\t}\n\n\t\t\t\tmaterialParams.emissive = new Color( 0.0, 0.0, 0.0 );\n\t\t\t\tmaterialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\t\t\tmaterialParams.specular = new Color( 1.0, 1.0, 1.0 );\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\n\n\t\t\t\t\tmaterialParams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\n\n\t\t\t\t\tvar specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'glossinessMap', specGlossMapDef ) );\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'specularMap', specGlossMapDef ) );\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t},\n\n\t\t\tcreateMaterial: function ( materialParams ) {\n\n\t\t\t\tvar material = new GLTFMeshStandardSGMaterial( materialParams );\n\t\t\t\tmaterial.fog = true;\n\n\t\t\t\tmaterial.color = materialParams.color;\n\n\t\t\t\tmaterial.map = materialParams.map === undefined ? null : materialParams.map;\n\n\t\t\t\tmaterial.lightMap = null;\n\t\t\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\t\t\tmaterial.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n\t\t\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\t\t\tmaterial.emissive = materialParams.emissive;\n\t\t\t\tmaterial.emissiveIntensity = 1.0;\n\t\t\t\tmaterial.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n\n\t\t\t\tmaterial.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n\t\t\t\tmaterial.bumpScale = 1;\n\n\t\t\t\tmaterial.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n\t\t\t\tmaterial.normalMapType = TangentSpaceNormalMap;\n\n\t\t\t\tif ( materialParams.normalScale ) material.normalScale = materialParams.normalScale;\n\n\t\t\t\tmaterial.displacementMap = null;\n\t\t\t\tmaterial.displacementScale = 1;\n\t\t\t\tmaterial.displacementBias = 0;\n\n\t\t\t\tmaterial.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n\t\t\t\tmaterial.specular = materialParams.specular;\n\n\t\t\t\tmaterial.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n\t\t\t\tmaterial.glossiness = materialParams.glossiness;\n\n\t\t\t\tmaterial.alphaMap = null;\n\n\t\t\t\tmaterial.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n\t\t\t\tmaterial.envMapIntensity = 1.0;\n\n\t\t\t\tmaterial.refractionRatio = 0.98;\n\n\t\t\t\treturn material;\n\n\t\t\t},\n\n\t\t};\n\n\t}\n\n\t/**\n\t * Mesh Quantization Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n\t */\n\tfunction GLTFMeshQuantizationExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n\t/*********************************/\n\t/********** INTERPOLATION ********/\n\t/*********************************/\n\n\t// Spline Interpolation\n\t// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n\tfunction GLTFCubicSplineInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tGLTFCubicSplineInterpolant.prototype = Object.create( Interpolant.prototype );\n\tGLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;\n\n\tGLTFCubicSplineInterpolant.prototype.copySampleValue_ = function ( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( var i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\tGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer;\n\t\tvar values = this.sampleValues;\n\t\tvar stride = this.valueSize;\n\n\t\tvar stride2 = stride * 2;\n\t\tvar stride3 = stride * 3;\n\n\t\tvar td = t1 - t0;\n\n\t\tvar p = ( t - t0 ) / td;\n\t\tvar pp = p * p;\n\t\tvar ppp = pp * p;\n\n\t\tvar offset1 = i1 * stride3;\n\t\tvar offset0 = offset1 - stride3;\n\n\t\tvar s2 = - 2 * ppp + 3 * pp;\n\t\tvar s3 = ppp - pp;\n\t\tvar s0 = 1 - s2;\n\t\tvar s1 = s3 - pp + p;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( var i = 0; i !== stride; i ++ ) {\n\n\t\t\tvar p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tvar m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tvar p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tvar m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\t/*********************************/\n\t/********** INTERNALS ************/\n\t/*********************************/\n\n\t/* CONSTANTS */\n\n\tvar WEBGL_CONSTANTS = {\n\t\tFLOAT: 5126,\n\t\t//FLOAT_MAT2: 35674,\n\t\tFLOAT_MAT3: 35675,\n\t\tFLOAT_MAT4: 35676,\n\t\tFLOAT_VEC2: 35664,\n\t\tFLOAT_VEC3: 35665,\n\t\tFLOAT_VEC4: 35666,\n\t\tLINEAR: 9729,\n\t\tREPEAT: 10497,\n\t\tSAMPLER_2D: 35678,\n\t\tPOINTS: 0,\n\t\tLINES: 1,\n\t\tLINE_LOOP: 2,\n\t\tLINE_STRIP: 3,\n\t\tTRIANGLES: 4,\n\t\tTRIANGLE_STRIP: 5,\n\t\tTRIANGLE_FAN: 6,\n\t\tUNSIGNED_BYTE: 5121,\n\t\tUNSIGNED_SHORT: 5123\n\t};\n\n\tvar WEBGL_COMPONENT_TYPES = {\n\t\t5120: Int8Array,\n\t\t5121: Uint8Array,\n\t\t5122: Int16Array,\n\t\t5123: Uint16Array,\n\t\t5125: Uint32Array,\n\t\t5126: Float32Array\n\t};\n\n\tvar WEBGL_FILTERS = {\n\t\t9728: NearestFilter,\n\t\t9729: LinearFilter,\n\t\t9984: NearestMipmapNearestFilter,\n\t\t9985: LinearMipmapNearestFilter,\n\t\t9986: NearestMipmapLinearFilter,\n\t\t9987: LinearMipmapLinearFilter\n\t};\n\n\tvar WEBGL_WRAPPINGS = {\n\t\t33071: ClampToEdgeWrapping,\n\t\t33648: MirroredRepeatWrapping,\n\t\t10497: RepeatWrapping\n\t};\n\n\tvar WEBGL_TYPE_SIZES = {\n\t\t'SCALAR': 1,\n\t\t'VEC2': 2,\n\t\t'VEC3': 3,\n\t\t'VEC4': 4,\n\t\t'MAT2': 4,\n\t\t'MAT3': 9,\n\t\t'MAT4': 16\n\t};\n\n\tvar ATTRIBUTES = {\n\t\tPOSITION: 'position',\n\t\tNORMAL: 'normal',\n\t\tTANGENT: 'tangent',\n\t\tTEXCOORD_0: 'uv',\n\t\tTEXCOORD_1: 'uv2',\n\t\tCOLOR_0: 'color',\n\t\tWEIGHTS_0: 'skinWeight',\n\t\tJOINTS_0: 'skinIndex',\n\t};\n\n\tvar PATH_PROPERTIES = {\n\t\tscale: 'scale',\n\t\ttranslation: 'position',\n\t\trotation: 'quaternion',\n\t\tweights: 'morphTargetInfluences'\n\t};\n\n\tvar INTERPOLATION = {\n\t\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\t\tLINEAR: InterpolateLinear,\n\t\tSTEP: InterpolateDiscrete\n\t};\n\n\tvar ALPHA_MODES = {\n\t\tOPAQUE: 'OPAQUE',\n\t\tMASK: 'MASK',\n\t\tBLEND: 'BLEND'\n\t};\n\n\tvar MIME_TYPE_FORMATS = {\n\t\t'image/png': RGBAFormat,\n\t\t'image/jpeg': RGBFormat\n\t};\n\n\t/* UTILITY FUNCTIONS */\n\n\tfunction resolveURL( url, path ) {\n\n\t\t// Invalid URL\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\n\n\t\t// Host Relative URL\n\t\tif ( /^https?:\\/\\//i.test( path ) && /^\\//.test( url ) ) {\n\n\t\t\tpath = path.replace( /(^https?:\\/\\/[^\\/]+).*/i, '$1' );\n\n\t\t}\n\n\t\t// Absolute URL http://,https://,//\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\n\n\t\t// Data URI\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\n\n\t\t// Blob URL\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\n\n\t\t// Relative URL\n\t\treturn path + url;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n\t */\n\tfunction createDefaultMaterial( cache ) {\n\n\t\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\t\tcolor: 0xFFFFFF,\n\t\t\t\temissive: 0x000000,\n\t\t\t\tmetalness: 1,\n\t\t\t\troughness: 1,\n\t\t\t\ttransparent: false,\n\t\t\t\tdepthTest: true,\n\t\t\t\tside: FrontSide\n\t\t\t} );\n\n\t\t}\n\n\t\treturn cache[ 'DefaultMaterial' ];\n\n\t}\n\n\tfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t\t// Add unknown glTF extensions to an object's userData.\n\n\t\tfor ( var name in objectDef.extensions ) {\n\n\t\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * @param {Object3D|Material|BufferGeometry} object\n\t * @param {GLTF.definition} gltfDef\n\t */\n\tfunction assignExtrasToUserData( object, gltfDef ) {\n\n\t\tif ( gltfDef.extras !== undefined ) {\n\n\t\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n\t *\n\t * @param {BufferGeometry} geometry\n\t * @param {Array<GLTF.Target>} targets\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addMorphTargets( geometry, targets, parser ) {\n\n\t\tvar hasMorphPosition = false;\n\t\tvar hasMorphNormal = false;\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\n\t\t\tif ( hasMorphPosition && hasMorphNormal ) break;\n\n\t\t}\n\n\t\tif ( ! hasMorphPosition && ! hasMorphNormal ) return Promise.resolve( geometry );\n\n\t\tvar pendingPositionAccessors = [];\n\t\tvar pendingNormalAccessors = [];\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( hasMorphPosition ) {\n\n\t\t\t\tvar pendingAccessor = target.POSITION !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t\t: geometry.attributes.position;\n\n\t\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t\tif ( hasMorphNormal ) {\n\n\t\t\t\tvar pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t\t: geometry.attributes.normal;\n\n\t\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( [\n\t\t\tPromise.all( pendingPositionAccessors ),\n\t\t\tPromise.all( pendingNormalAccessors )\n\t\t] ).then( function ( accessors ) {\n\n\t\t\tvar morphPositions = accessors[ 0 ];\n\t\t\tvar morphNormals = accessors[ 1 ];\n\n\t\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t\treturn geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {Mesh} mesh\n\t * @param {GLTF.Mesh} meshDef\n\t */\n\tfunction updateMorphTargets( mesh, meshDef ) {\n\n\t\tmesh.updateMorphTargets();\n\n\t\tif ( meshDef.weights !== undefined ) {\n\n\t\t\tfor ( var i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\t\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\t\tvar targetNames = meshDef.extras.targetNames;\n\n\t\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\t\tfor ( var i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createPrimitiveKey( primitiveDef ) {\n\n\t\tvar dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\t\tvar geometryKey;\n\n\t\tif ( dracoExtension ) {\n\n\t\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t\t} else {\n\n\t\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t\t}\n\n\t\treturn geometryKey;\n\n\t}\n\n\tfunction createAttributesKey( attributes ) {\n\n\t\tvar attributesKey = '';\n\n\t\tvar keys = Object.keys( attributes ).sort();\n\n\t\tfor ( var i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t\t}\n\n\t\treturn attributesKey;\n\n\t}\n\n\t/* GLTF PARSER */\n\n\tfunction GLTFParser( json, extensions, options ) {\n\n\t\tthis.json = json || {};\n\t\tthis.extensions = extensions || {};\n\t\tthis.options = options || {};\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tGLTFParser.prototype.parse = function ( onLoad, onError ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis.markDefs();\n\n\t\tPromise.all( [\n\n\t\t\tthis.getDependencies( 'scene' ),\n\t\t\tthis.getDependencies( 'animation' ),\n\t\t\tthis.getDependencies( 'camera' ),\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\tonLoad( result );\n\n\t\t} ).catch( onError );\n\n\t};\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\tGLTFParser.prototype.markDefs = function () {\n\n\t\tvar nodeDefs = this.json.nodes || [];\n\t\tvar skinDefs = this.json.skins || [];\n\t\tvar meshDefs = this.json.meshes || [];\n\n\t\tvar meshReferences = {};\n\t\tvar meshUses = {};\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tvar joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( var i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Meshes can (and should) be reused by multiple nodes in a glTF asset. To\n\t\t// avoid having more than one Mesh with the same name, count\n\t\t// references and rename instances below.\n\t\t//\n\t\t// Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tif ( meshReferences[ nodeDef.mesh ] === undefined ) {\n\n\t\t\t\t\tmeshReferences[ nodeDef.mesh ] = meshUses[ nodeDef.mesh ] = 0;\n\n\t\t\t\t}\n\n\t\t\t\tmeshReferences[ nodeDef.mesh ] ++;\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.json.meshReferences = meshReferences;\n\t\tthis.json.meshUses = meshUses;\n\n\t};\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tGLTFParser.prototype.getDependency = function ( type, index ) {\n\n\t\tvar cacheKey = type + ':' + index;\n\t\tvar dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this.loadNode( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this.loadMesh( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this.loadBufferView( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this.loadMaterial( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this.loadTexture( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this.loadAnimation( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'light':\n\t\t\t\t\tdependency = this.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].loadLight( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t};\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tGLTFParser.prototype.getDependencies = function ( type ) {\n\n\t\tvar dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tvar parser = this;\n\t\t\tvar defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBuffer = function ( bufferIndex ) {\n\n\t\tvar bufferDef = this.json.buffers[ bufferIndex ];\n\t\tvar loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tvar options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBufferView = function ( bufferViewIndex ) {\n\n\t\tvar bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tvar byteLength = bufferViewDef.byteLength || 0;\n\t\t\tvar byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tGLTFParser.prototype.loadAccessor = function ( accessorIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\n\t\tvar accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\n\t\t\t// information about attributes coming from another source (e.g. Draco\n\t\t\t// compression extension).\n\t\t\treturn Promise.resolve( null );\n\n\t\t}\n\n\t\tvar pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tvar bufferView = bufferViews[ 0 ];\n\n\t\t\tvar itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tvar TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tvar elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tvar itemBytes = elementBytes * itemSize;\n\t\t\tvar byteOffset = accessorDef.byteOffset || 0;\n\t\t\tvar byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tvar normalized = accessorDef.normalized === true;\n\t\t\tvar array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tvar ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tvar ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tvar ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tvar itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tvar TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tvar byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tvar byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tvar sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tvar sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture>}\n\t */\n\tGLTFParser.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar options = this.options;\n\t\tvar textureLoader = this.textureLoader;\n\n\t\tvar URL = window.URL || window.webkitURL;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tvar textureExtensions = textureDef.extensions || {};\n\n\t\tvar source;\n\n\t\tif ( textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] ) {\n\n\t\t\tsource = json.images[ textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].source ];\n\n\t\t} else {\n\n\t\t\tsource = json.images[ textureDef.source ];\n\n\t\t}\n\n\t\tvar sourceURI = source.uri;\n\t\tvar isObjectURL = false;\n\n\t\tif ( source.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tvar blob = new Blob( [ bufferView ], { type: source.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\t// Load Texture resource.\n\n\t\t\tvar loader = options.manager.getHandler( sourceURI );\n\n\t\t\tif ( ! loader ) {\n\n\t\t\t\tloader = textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ]\n\t\t\t\t\t? parser.extensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].ddsLoader\n\t\t\t\t\t: textureLoader;\n\n\t\t\t}\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tloader.load( resolveURL( sourceURI, options.path ), resolve, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\ttexture.flipY = false;\n\n\t\t\tif ( textureDef.name ) texture.name = textureDef.name;\n\n\t\t\t// Ignore unknown mime types, like DDS files.\n\t\t\tif ( source.mimeType in MIME_TYPE_FORMATS ) {\n\n\t\t\t\ttexture.format = MIME_TYPE_FORMATS[ source.mimeType ];\n\n\t\t\t}\n\n\t\t\tvar samplers = json.samplers || {};\n\t\t\tvar sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise}\n\t */\n\tGLTFParser.prototype.assignTexture = function ( materialParams, mapName, mapDef ) {\n\n\t\tvar parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\tif ( ! texture.isCompressedTexture ) {\n\n\t\t\t\tswitch ( mapName ) {\n\n\t\t\t\t\tcase 'aoMap':\n\t\t\t\t\tcase 'emissiveMap':\n\t\t\t\t\tcase 'metalnessMap':\n\t\t\t\t\tcase 'normalMap':\n\t\t\t\t\tcase 'roughnessMap':\n\t\t\t\t\t\ttexture.format = RGBFormat;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n\t\t\t// However, we will copy UV set 0 to UV set 1 on demand for aoMap\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord != 0 && ! ( mapName === 'aoMap' && mapDef.texCoord == 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.' );\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tvar transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accomodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tGLTFParser.prototype.assignFinalMaterial = function ( mesh ) {\n\n\t\tvar geometry = mesh.geometry;\n\t\tvar material = mesh.material;\n\t\tvar extensions = this.extensions;\n\n\t\tvar useVertexTangents = geometry.attributes.tangent !== undefined;\n\t\tvar useVertexColors = geometry.attributes.color !== undefined;\n\t\tvar useFlatShading = geometry.attributes.normal === undefined;\n\t\tvar useSkinning = mesh.isSkinnedMesh === true;\n\t\tvar useMorphTargets = Object.keys( geometry.morphAttributes ).length > 0;\n\t\tvar useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tvar cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tvar pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tvar cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tvar lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useVertexTangents || useVertexColors || useFlatShading || useSkinning || useMorphTargets ) {\n\n\t\t\tvar cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\n\t\t\tif ( useSkinning ) cacheKey += 'skinning:';\n\t\t\tif ( useVertexTangents ) cacheKey += 'vertex-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\t\t\tif ( useMorphTargets ) cacheKey += 'morph-targets:';\n\t\t\tif ( useMorphNormals ) cacheKey += 'morph-normals:';\n\n\t\t\tvar cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useSkinning ) cachedMaterial.skinning = true;\n\t\t\t\tif ( useVertexTangents ) cachedMaterial.vertexTangents = true;\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\t\t\t\tif ( useMorphTargets ) cachedMaterial.morphTargets = true;\n\t\t\t\tif ( useMorphNormals ) cachedMaterial.morphNormals = true;\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\t// workarounds for mesh and geometry\n\n\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\n\n\t\t\tgeometry.setAttribute( 'uv2', new BufferAttribute( geometry.attributes.uv.array, 2 ) );\n\n\t\t}\n\n\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\tif ( material.normalScale && ! useVertexTangents ) {\n\n\t\t\tmaterial.normalScale.y = - material.normalScale.y;\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tGLTFParser.prototype.loadMaterial = function ( materialIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar materialDef = json.materials[ materialIndex ];\n\n\t\tvar materialType;\n\t\tvar materialParams = {};\n\t\tvar materialExtensions = materialDef.extensions || {};\n\n\t\tvar pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\n\n\t\t\tvar sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\n\t\t\tmaterialType = sgExtension.getMaterialType();\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tvar kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tmaterialType = MeshStandardMaterial;\n\n\t\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tvar alphaMode = materialDef.alphaMode;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t} else if ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tmaterialParams.normalScale.set( materialDef.normalTexture.scale, materialDef.normalTexture.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tmaterialParams.emissive = new Color().fromArray( materialDef.emissiveFactor );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tvar material;\n\n\t\t\tif ( materialType === GLTFMeshStandardSGMaterial ) {\n\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new materialType( materialParams );\n\n\t\t\t}\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\t\t\tif ( material.map ) material.map.encoding = sRGBEncoding;\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = sRGBEncoding;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t */\n\tfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar box = new Box3();\n\n\t\tif ( attributes.POSITION !== undefined ) {\n\n\t\t\tvar accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\t\tvar min = accessor.min;\n\t\t\tvar max = accessor.max;\n\n\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\tbox.set(\n\t\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar targets = primitiveDef.targets;\n\n\t\tif ( targets !== undefined ) {\n\n\t\t\tvar vector = new Vector3();\n\n\t\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\t\tvar accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\t\tvar min = accessor.min;\n\t\t\t\t\tvar max = accessor.max;\n\n\t\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\t\t\t\t\t\tbox.expandByVector( vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.boundingBox = box;\n\n\t\tvar sphere = new Sphere();\n\n\t\tbox.getCenter( sphere.center );\n\t\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\t\tgeometry.boundingSphere = sphere;\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar pending = [];\n\n\t\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t\t.then( function ( accessor ) {\n\n\t\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tfor ( var gltfAttributeName in attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t\t}\n\n\t\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\t\tvar accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\t\tgeometry.setIndex( accessor );\n\n\t\t\t} );\n\n\t\t\tpending.push( accessor );\n\n\t\t}\n\n\t\tassignExtrasToUserData( geometry, primitiveDef );\n\n\t\tcomputeBounds( geometry, primitiveDef, parser );\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\treturn primitiveDef.targets !== undefined\n\t\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t\t: geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {Number} drawMode\n\t * @return {BufferGeometry}\n\t */\n\tfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\t\tvar index = geometry.getIndex();\n\n\t\t// generate index if not present\n\n\t\tif ( index === null ) {\n\n\t\t\tvar indices = [];\n\n\t\t\tvar position = geometry.getAttribute( 'position' );\n\n\t\t\tif ( position !== undefined ) {\n\n\t\t\t\tfor ( var i = 0; i < position.count; i ++ ) {\n\n\t\t\t\t\tindices.push( i );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setIndex( indices );\n\t\t\t\tindex = geometry.getIndex();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar numberOfTriangles = index.count - 2;\n\t\tvar newIndices = [];\n\n\t\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t\t// gl.TRIANGLE_FAN\n\n\t\t\tfor ( var i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// gl.TRIANGLE_STRIP\n\n\t\t\tfor ( var i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t\t}\n\n\t\t// build final geometry\n\n\t\tvar newGeometry = geometry.clone();\n\t\tnewGeometry.setIndex( newIndices );\n\n\t\treturn newGeometry;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tGLTFParser.prototype.loadGeometries = function ( primitives ) {\n\n\t\tvar parser = this;\n\t\tvar extensions = this.extensions;\n\t\tvar cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar primitive = primitives[ i ];\n\t\t\tvar cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tvar cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tvar geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tGLTFParser.prototype.loadMesh = function ( meshIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\n\t\tvar meshDef = json.meshes[ meshIndex ];\n\t\tvar primitives = meshDef.primitives;\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tvar materials = results.slice( 0, results.length - 1 );\n\t\t\tvar geometries = results[ results.length - 1 ];\n\n\t\t\tvar meshes = [];\n\n\t\t\tfor ( var i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tvar geometry = geometries[ i ];\n\t\t\t\tvar primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tvar mesh;\n\n\t\t\t\tvar material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See .markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true && ! mesh.geometry.attributes.skinWeight.normalized ) {\n\n\t\t\t\t\t\t// we normalize floating point skin weight array to fix malformed assets (see #15319)\n\t\t\t\t\t\t// it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = meshDef.name || ( 'mesh_' + meshIndex );\n\n\t\t\t\tif ( geometries.length > 1 ) mesh.name += '_' + i;\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tvar group = new Group();\n\n\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tGLTFParser.prototype.loadCamera = function ( cameraIndex ) {\n\n\t\tvar camera;\n\t\tvar cameraDef = this.json.cameras[ cameraIndex ];\n\t\tvar params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( params.xmag / - 2, params.xmag / 2, params.ymag / 2, params.ymag / - 2, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = cameraDef.name;\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Object>}\n\t */\n\tGLTFParser.prototype.loadSkin = function ( skinIndex ) {\n\n\t\tvar skinDef = this.json.skins[ skinIndex ];\n\n\t\tvar skinEntry = { joints: skinDef.joints };\n\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\n\n\t\t\treturn Promise.resolve( skinEntry );\n\n\t\t}\n\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\n\n\t\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\t\treturn skinEntry;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tGLTFParser.prototype.loadAnimation = function ( animationIndex ) {\n\n\t\tvar json = this.json;\n\n\t\tvar animationDef = json.animations[ animationIndex ];\n\n\t\tvar pendingNodes = [];\n\t\tvar pendingInputAccessors = [];\n\t\tvar pendingOutputAccessors = [];\n\t\tvar pendingSamplers = [];\n\t\tvar pendingTargets = [];\n\n\t\tfor ( var i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tvar channel = animationDef.channels[ i ];\n\t\t\tvar sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tvar target = channel.target;\n\t\t\tvar name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\t\t\tvar input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tvar output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar nodes = dependencies[ 0 ];\n\t\t\tvar inputAccessors = dependencies[ 1 ];\n\t\t\tvar outputAccessors = dependencies[ 2 ];\n\t\t\tvar samplers = dependencies[ 3 ];\n\t\t\tvar targets = dependencies[ 4 ];\n\n\t\t\tvar tracks = [];\n\n\t\t\tfor ( var i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tvar node = nodes[ i ];\n\t\t\t\tvar inputAccessor = inputAccessors[ i ];\n\t\t\t\tvar outputAccessor = outputAccessors[ i ];\n\t\t\t\tvar sampler = samplers[ i ];\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tnode.updateMatrix();\n\t\t\t\tnode.matrixAutoUpdate = true;\n\n\t\t\t\tvar TypedKeyframeTrack;\n\n\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tvar targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\tvar interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\t\t\t\tvar targetNames = [];\n\n\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\t\t\t// Node may be a Group (glTF mesh with several primitives) or a Mesh.\n\t\t\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\t\t\tif ( object.isMesh === true && object.morphTargetInfluences ) {\n\n\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetNames.push( targetName );\n\n\t\t\t\t}\n\n\t\t\t\tvar outputArray = outputAccessor.array;\n\n\t\t\t\tif ( outputAccessor.normalized ) {\n\n\t\t\t\t\tvar scale;\n\n\t\t\t\t\tif ( outputArray.constructor === Int8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 127;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 255;\n\n\t\t\t\t\t} else if ( outputArray.constructor == Int16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 32767;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 65535;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported output accessor component type.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar scaled = new Float32Array( outputArray.length );\n\n\t\t\t\t\tfor ( var j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t\t\t}\n\n\t\t\t\t\toutputArray = scaled;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar track = new TypedKeyframeTrack(\n\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\t\t\tinputAccessor.array,\n\t\t\t\t\t\toutputArray,\n\t\t\t\t\t\tinterpolation\n\t\t\t\t\t);\n\n\t\t\t\t\t// Override interpolation with custom factory method.\n\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\t\t\t\t\treturn new GLTFCubicSplineInterpolant( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( track );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\t\treturn new AnimationClip( name, undefined, tracks );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tGLTFParser.prototype.loadNode = function ( nodeIndex ) {\n\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar parser = this;\n\n\t\tvar meshReferences = json.meshReferences;\n\t\tvar meshUses = json.meshUses;\n\n\t\tvar nodeDef = json.nodes[ nodeIndex ];\n\n\t\treturn ( function () {\n\n\t\t\tvar pending = [];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\t\t\tvar node;\n\n\t\t\t\t\tif ( meshReferences[ nodeDef.mesh ] > 1 ) {\n\n\t\t\t\t\t\tvar instanceNum = meshUses[ nodeDef.mesh ] ++;\n\n\t\t\t\t\t\tnode = mesh.clone();\n\t\t\t\t\t\tnode.name += '_instance_' + instanceNum;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tnode = mesh;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\t\t\tfor ( var i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ) );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t&& nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ]\n\t\t\t\t&& nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].light !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'light', nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].light ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pending );\n\n\t\t}() ).then( function ( objects ) {\n\n\t\t\tvar node;\n\n\t\t\t// .isBone isn't in glTF spec. See .markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( var i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = PropertyBinding.sanitizeNodeName( nodeDef.name );\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tvar matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tGLTFParser.prototype.loadScene = function () {\n\n\t\t// scene node hierachy builder\n\n\t\tfunction buildNodeHierachy( nodeId, parentObject, json, parser ) {\n\n\t\t\tvar nodeDef = json.nodes[ nodeId ];\n\n\t\t\treturn parser.getDependency( 'node', nodeId ).then( function ( node ) {\n\n\t\t\t\tif ( nodeDef.skin === undefined ) return node;\n\n\t\t\t\t// build skeleton here as well\n\n\t\t\t\tvar skinEntry;\n\n\t\t\t\treturn parser.getDependency( 'skin', nodeDef.skin ).then( function ( skin ) {\n\n\t\t\t\t\tskinEntry = skin;\n\n\t\t\t\t\tvar pendingJoints = [];\n\n\t\t\t\t\tfor ( var i = 0, il = skinEntry.joints.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tpendingJoints.push( parser.getDependency( 'node', skinEntry.joints[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Promise.all( pendingJoints );\n\n\t\t\t\t} ).then( function ( jointNodes ) {\n\n\t\t\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\t\t\tif ( ! mesh.isMesh ) return;\n\n\t\t\t\t\t\tvar bones = [];\n\t\t\t\t\t\tvar boneInverses = [];\n\n\t\t\t\t\t\tfor ( var j = 0, jl = jointNodes.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tvar jointNode = jointNodes[ j ];\n\n\t\t\t\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\t\t\t\tvar mat = new Matrix4();\n\n\t\t\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\n\n\t\t\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[ j ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmesh.bind( new Skeleton( bones, boneInverses ), mesh.matrixWorld );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} );\n\n\t\t\t} ).then( function ( node ) {\n\n\t\t\t\t// build node hierachy\n\n\t\t\t\tparentObject.add( node );\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( nodeDef.children ) {\n\n\t\t\t\t\tvar children = nodeDef.children;\n\n\t\t\t\t\tfor ( var i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar child = children[ i ];\n\t\t\t\t\t\tpending.push( buildNodeHierachy( child, node, json, parser ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn function loadScene( sceneIndex ) {\n\n\t\t\tvar json = this.json;\n\t\t\tvar extensions = this.extensions;\n\t\t\tvar sceneDef = this.json.scenes[ sceneIndex ];\n\t\t\tvar parser = this;\n\n\t\t\t// Loader returns Group, not Scene.\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\t\tvar scene = new Group();\n\t\t\tif ( sceneDef.name ) scene.name = sceneDef.name;\n\n\t\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\t\tvar nodeIds = sceneDef.nodes || [];\n\n\t\t\tvar pending = [];\n\n\t\t\tfor ( var i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\t\tpending.push( buildNodeHierachy( nodeIds[ i ], scene, json, parser ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\t\treturn scene;\n\n\t\t\t} );\n\n\t\t};\n\n\t}();\n\n\treturn GLTFLoader;\n\n} )();\n\nexport { GLTFLoader };\n","/**\n * @author Nikos M. / https://github.com/foo123/\n */\n\nimport {\n\tDataTextureLoader,\n\tFloatType,\n\tHalfFloatType,\n\tLinearEncoding,\n\tLinearFilter,\n\tNearestFilter,\n\tRGBEEncoding,\n\tRGBEFormat,\n\tRGBFormat,\n\tUnsignedByteType\n} from \"three\";\n\n// https://github.com/mrdoob/three.js/issues/5552\n// http://en.wikipedia.org/wiki/RGBE_image_format\n\nvar RGBELoader = function ( manager ) {\n\n\tDataTextureLoader.call( this, manager );\n\n\tthis.type = UnsignedByteType;\n\n};\n\nRGBELoader.prototype = Object.assign( Object.create( DataTextureLoader.prototype ), {\n\n\tconstructor: RGBELoader,\n\n\t// adapted from http://www.graphics.cornell.edu/~bjw/rgbe.html\n\n\tparse: function ( buffer ) {\n\n\t\tlet type;\n\t\tlet format;\n\t\tlet data;\n\t\tvar\n\t\t\t/* return codes for rgbe routines */\n\t\t\t//RGBE_RETURN_SUCCESS = 0,\n\t\t\tRGBE_RETURN_FAILURE = - 1,\n\n\t\t\t/* default error routine.  change this to change error handling */\n\t\t\trgbe_read_error = 1,\n\t\t\trgbe_write_error = 2,\n\t\t\trgbe_format_error = 3,\n\t\t\trgbe_memory_error = 4,\n\t\t\trgbe_error = function ( rgbe_error_code, msg ) {\n\n\t\t\t\tswitch ( rgbe_error_code ) {\n\n\t\t\t\t\tcase rgbe_read_error: console.error( \"RGBELoader Read Error: \" + ( msg || '' ) );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase rgbe_write_error: console.error( \"RGBELoader Write Error: \" + ( msg || '' ) );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase rgbe_format_error: console.error( \"RGBELoader Bad File Format: \" + ( msg || '' ) );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\tcase rgbe_memory_error: console.error( \"RGBELoader: Error: \" + ( msg || '' ) );\n\n\t\t\t\t}\n\t\t\t\treturn RGBE_RETURN_FAILURE;\n\n\t\t\t},\n\n\t\t\t/* offsets to red, green, and blue components in a data (float) pixel */\n\t\t\t//RGBE_DATA_RED = 0,\n\t\t\t//RGBE_DATA_GREEN = 1,\n\t\t\t//RGBE_DATA_BLUE = 2,\n\n\t\t\t/* number of floats per pixel, use 4 since stored in rgba image format */\n\t\t\t//RGBE_DATA_SIZE = 4,\n\n\t\t\t/* flags indicating which fields in an rgbe_header_info are valid */\n\t\t\tRGBE_VALID_PROGRAMTYPE = 1,\n\t\t\tRGBE_VALID_FORMAT = 2,\n\t\t\tRGBE_VALID_DIMENSIONS = 4,\n\n\t\t\tNEWLINE = \"\\n\",\n\n\t\t\tfgets = function ( buffer, lineLimit, consume ) {\n\n\t\t\t\tlineLimit = ! lineLimit ? 1024 : lineLimit;\n\t\t\t\tvar p = buffer.pos,\n\t\t\t\t\ti = - 1, len = 0, s = '', chunkSize = 128,\n\t\t\t\t\tchunk = String.fromCharCode.apply( null, new Uint16Array( buffer.subarray( p, p + chunkSize ) ) )\n\t\t\t\t;\n\t\t\t\twhile ( ( 0 > ( i = chunk.indexOf( NEWLINE ) ) ) && ( len < lineLimit ) && ( p < buffer.byteLength ) ) {\n\n\t\t\t\t\ts += chunk; len += chunk.length;\n\t\t\t\t\tp += chunkSize;\n\t\t\t\t\tchunk += String.fromCharCode.apply( null, new Uint16Array( buffer.subarray( p, p + chunkSize ) ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( - 1 < i ) {\n\n\t\t\t\t\t/*for (i=l-1; i>=0; i--) {\n\t\t\t\t\t\tbyteCode = m.charCodeAt(i);\n\t\t\t\t\t\tif (byteCode > 0x7f && byteCode <= 0x7ff) byteLen++;\n\t\t\t\t\t\telse if (byteCode > 0x7ff && byteCode <= 0xffff) byteLen += 2;\n\t\t\t\t\t\tif (byteCode >= 0xDC00 && byteCode <= 0xDFFF) i--; //trail surrogate\n\t\t\t\t\t}*/\n\t\t\t\t\tif ( false !== consume ) buffer.pos += len + i + 1;\n\t\t\t\t\treturn s + chunk.slice( 0, i );\n\n\t\t\t\t}\n\t\t\t\treturn false;\n\n\t\t\t},\n\n\t\t\t/* minimal header reading.  modify if you want to parse more information */\n\t\t\tRGBE_ReadHeader = function ( buffer ) {\n\n\t\t\t\tvar line, match,\n\n\t\t\t\t\t// regexes to parse header info fields\n\t\t\t\t\tmagic_token_re = /^#\\?(\\S+)$/,\n\t\t\t\t\tgamma_re = /^\\s*GAMMA\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n\t\t\t\t\texposure_re = /^\\s*EXPOSURE\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n\t\t\t\t\tformat_re = /^\\s*FORMAT=(\\S+)\\s*$/,\n\t\t\t\t\tdimensions_re = /^\\s*\\-Y\\s+(\\d+)\\s+\\+X\\s+(\\d+)\\s*$/,\n\n\t\t\t\t\t// RGBE format header struct\n\t\t\t\t\theader = {\n\n\t\t\t\t\t\tvalid: 0, /* indicate which fields are valid */\n\n\t\t\t\t\t\tstring: '', /* the actual header string */\n\n\t\t\t\t\t\tcomments: '', /* comments found in header */\n\n\t\t\t\t\t\tprogramtype: 'RGBE', /* listed at beginning of file to identify it after \"#?\". defaults to \"RGBE\" */\n\n\t\t\t\t\t\tformat: '', /* RGBE format, default 32-bit_rle_rgbe */\n\n\t\t\t\t\t\tgamma: 1.0, /* image has already been gamma corrected with given gamma. defaults to 1.0 (no correction) */\n\n\t\t\t\t\t\texposure: 1.0, /* a value of 1.0 in an image corresponds to <exposure> watts/steradian/m^2. defaults to 1.0 */\n\n\t\t\t\t\t\twidth: 0, height: 0 /* image dimensions, width/height */\n\n\t\t\t\t\t};\n\n\t\t\t\tif ( buffer.pos >= buffer.byteLength || ! ( line = fgets( buffer ) ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_read_error, \"no header found\" );\n\n\t\t\t\t}\n\t\t\t\t/* if you want to require the magic token then uncomment the next line */\n\t\t\t\tif ( ! ( match = line.match( magic_token_re ) ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"bad initial token\" );\n\n\t\t\t\t}\n\t\t\t\theader.valid |= RGBE_VALID_PROGRAMTYPE;\n\t\t\t\theader.programtype = match[ 1 ];\n\t\t\t\theader.string += line + \"\\n\";\n\n\t\t\t\twhile ( true ) {\n\n\t\t\t\t\tline = fgets( buffer );\n\t\t\t\t\tif ( false === line ) break;\n\t\t\t\t\theader.string += line + \"\\n\";\n\n\t\t\t\t\tif ( '#' === line.charAt( 0 ) ) {\n\n\t\t\t\t\t\theader.comments += line + \"\\n\";\n\t\t\t\t\t\tcontinue; // comment line\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( gamma_re ) ) {\n\n\t\t\t\t\t\theader.gamma = parseFloat( match[ 1 ], 10 );\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( match = line.match( exposure_re ) ) {\n\n\t\t\t\t\t\theader.exposure = parseFloat( match[ 1 ], 10 );\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( match = line.match( format_re ) ) {\n\n\t\t\t\t\t\theader.valid |= RGBE_VALID_FORMAT;\n\t\t\t\t\t\theader.format = match[ 1 ];//'32-bit_rle_rgbe';\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( match = line.match( dimensions_re ) ) {\n\n\t\t\t\t\t\theader.valid |= RGBE_VALID_DIMENSIONS;\n\t\t\t\t\t\theader.height = parseInt( match[ 1 ], 10 );\n\t\t\t\t\t\theader.width = parseInt( match[ 2 ], 10 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ( header.valid & RGBE_VALID_FORMAT ) && ( header.valid & RGBE_VALID_DIMENSIONS ) ) break;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! ( header.valid & RGBE_VALID_FORMAT ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"missing format specifier\" );\n\n\t\t\t\t}\n\t\t\t\tif ( ! ( header.valid & RGBE_VALID_DIMENSIONS ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"missing image size specifier\" );\n\n\t\t\t\t}\n\n\t\t\t\treturn header;\n\n\t\t\t},\n\n\t\t\tRGBE_ReadPixels_RLE = function ( buffer, w, h ) {\n\n\t\t\t\tvar data_rgba, offset, pos, count, byteValue,\n\t\t\t\t\tscanline_buffer, ptr, ptr_end, i, l, off, isEncodedRun,\n\t\t\t\t\tscanline_width = w, num_scanlines = h, rgbeStart\n\t\t\t\t;\n\n\t\t\t\tif (\n\t\t\t\t\t// run length encoding is not allowed so read flat\n\t\t\t\t\t( ( scanline_width < 8 ) || ( scanline_width > 0x7fff ) ) ||\n\t\t\t\t\t// this file is not run length encoded\n\t\t\t\t\t( ( 2 !== buffer[ 0 ] ) || ( 2 !== buffer[ 1 ] ) || ( buffer[ 2 ] & 0x80 ) )\n\t\t\t\t) {\n\n\t\t\t\t\t// return the flat buffer\n\t\t\t\t\treturn new Uint8Array( buffer );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scanline_width !== ( ( buffer[ 2 ] << 8 ) | buffer[ 3 ] ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"wrong scanline width\" );\n\n\t\t\t\t}\n\n\t\t\t\tdata_rgba = new Uint8Array( 4 * w * h );\n\n\t\t\t\tif ( ! data_rgba || ! data_rgba.length ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_memory_error, \"unable to allocate buffer space\" );\n\n\t\t\t\t}\n\n\t\t\t\toffset = 0; pos = 0; ptr_end = 4 * scanline_width;\n\t\t\t\trgbeStart = new Uint8Array( 4 );\n\t\t\t\tscanline_buffer = new Uint8Array( ptr_end );\n\n\t\t\t\t// read in each successive scanline\n\t\t\t\twhile ( ( num_scanlines > 0 ) && ( pos < buffer.byteLength ) ) {\n\n\t\t\t\t\tif ( pos + 4 > buffer.byteLength ) {\n\n\t\t\t\t\t\treturn rgbe_error( rgbe_read_error );\n\n\t\t\t\t\t}\n\n\t\t\t\t\trgbeStart[ 0 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 1 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 2 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 3 ] = buffer[ pos ++ ];\n\n\t\t\t\t\tif ( ( 2 !== rgbeStart[ 0 ] ) || ( 2 !== rgbeStart[ 1 ] ) || ( ( ( rgbeStart[ 2 ] << 8 ) | rgbeStart[ 3 ] ) !== scanline_width ) ) {\n\n\t\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"bad rgbe scanline format\" );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// read each of the four channels for the scanline into the buffer\n\t\t\t\t\t// first red, then green, then blue, then exponent\n\t\t\t\t\tptr = 0;\n\t\t\t\t\twhile ( ( ptr < ptr_end ) && ( pos < buffer.byteLength ) ) {\n\n\t\t\t\t\t\tcount = buffer[ pos ++ ];\n\t\t\t\t\t\tisEncodedRun = count > 128;\n\t\t\t\t\t\tif ( isEncodedRun ) count -= 128;\n\n\t\t\t\t\t\tif ( ( 0 === count ) || ( ptr + count > ptr_end ) ) {\n\n\t\t\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"bad scanline data\" );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( isEncodedRun ) {\n\n\t\t\t\t\t\t\t// a (encoded) run of the same value\n\t\t\t\t\t\t\tbyteValue = buffer[ pos ++ ];\n\t\t\t\t\t\t\tfor ( i = 0; i < count; i ++ ) {\n\n\t\t\t\t\t\t\t\tscanline_buffer[ ptr ++ ] = byteValue;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//ptr += count;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// a literal-run\n\t\t\t\t\t\t\tscanline_buffer.set( buffer.subarray( pos, pos + count ), ptr );\n\t\t\t\t\t\t\tptr += count; pos += count;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\t// now convert data from buffer into rgba\n\t\t\t\t\t// first red, then green, then blue, then exponent (alpha)\n\t\t\t\t\tl = scanline_width; //scanline_buffer.byteLength;\n\t\t\t\t\tfor ( i = 0; i < l; i ++ ) {\n\n\t\t\t\t\t\toff = 0;\n\t\t\t\t\t\tdata_rgba[ offset ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 1 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 2 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 3 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toffset += 4;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tnum_scanlines --;\n\n\t\t\t\t}\n\n\t\t\t\treturn data_rgba;\n\n\t\t\t};\n\n\t\tvar RGBEByteToRGBFloat = function ( sourceArray, sourceOffset, destArray, destOffset ) {\n\n\t\t\tvar e = sourceArray[ sourceOffset + 3 ];\n\t\t\tvar scale = Math.pow( 2.0, e - 128.0 ) / 255.0;\n\n\t\t\tdestArray[ destOffset + 0 ] = sourceArray[ sourceOffset + 0 ] * scale;\n\t\t\tdestArray[ destOffset + 1 ] = sourceArray[ sourceOffset + 1 ] * scale;\n\t\t\tdestArray[ destOffset + 2 ] = sourceArray[ sourceOffset + 2 ] * scale;\n\n\t\t};\n\n\t\tvar RGBEByteToRGBHalf = ( function () {\n\n\t\t\t// Source: http://gamedev.stackexchange.com/questions/17326/conversion-of-a-number-from-single-precision-floating-point-representation-to-a/17410#17410\n\n\t\t\tvar floatView = new Float32Array( 1 );\n\t\t\tvar int32View = new Int32Array( floatView.buffer );\n\n\t\t\t/* This method is faster than the OpenEXR implementation (very often\n\t\t\t * used, eg. in Ogre), with the additional benefit of rounding, inspired\n\t\t\t * by James Tursa?s half-precision code. */\n\t\t\tfunction toHalf( val ) {\n\n\t\t\t\tfloatView[ 0 ] = val;\n\t\t\t\tvar x = int32View[ 0 ];\n\n\t\t\t\tvar bits = ( x >> 16 ) & 0x8000; /* Get the sign */\n\t\t\t\tvar m = ( x >> 12 ) & 0x07ff; /* Keep one extra bit for rounding */\n\t\t\t\tvar e = ( x >> 23 ) & 0xff; /* Using int is faster here */\n\n\t\t\t\t/* If zero, or denormal, or exponent underflows too much for a denormal\n\t\t\t\t * half, return signed zero. */\n\t\t\t\tif ( e < 103 ) return bits;\n\n\t\t\t\t/* If NaN, return NaN. If Inf or exponent overflow, return Inf. */\n\t\t\t\tif ( e > 142 ) {\n\n\t\t\t\t\tbits |= 0x7c00;\n\t\t\t\t\t/* If exponent was 0xff and one mantissa bit was set, it means NaN,\n\t\t\t\t\t\t\t * not Inf, so make sure we set one mantissa bit too. */\n\t\t\t\t\tbits |= ( ( e === 255 ) ? 0 : 1 ) && ( x & 0x007fffff );\n\t\t\t\t\treturn bits;\n\n\t\t\t\t}\n\n\t\t\t\t/* If exponent underflows but not too much, return a denormal */\n\t\t\t\tif ( e < 113 ) {\n\n\t\t\t\t\tm |= 0x0800;\n\t\t\t\t\t/* Extra rounding may overflow and set mantissa to 0 and exponent\n\t\t\t\t\t * to 1, which is OK. */\n\t\t\t\t\tbits |= ( m >> ( 114 - e ) ) + ( ( m >> ( 113 - e ) ) & 1 );\n\t\t\t\t\treturn bits;\n\n\t\t\t\t}\n\n\t\t\t\tbits |= ( ( e - 112 ) << 10 ) | ( m >> 1 );\n\t\t\t\t/* Extra rounding. An overflow will set mantissa to 0 and increment\n\t\t\t\t * the exponent, which is OK. */\n\t\t\t\tbits += m & 1;\n\t\t\t\treturn bits;\n\n\t\t\t}\n\n\t\t\treturn function ( sourceArray, sourceOffset, destArray, destOffset ) {\n\n\t\t\t\tvar e = sourceArray[ sourceOffset + 3 ];\n\t\t\t\tvar scale = Math.pow( 2.0, e - 128.0 ) / 255.0;\n\n\t\t\t\tdestArray[ destOffset + 0 ] = toHalf( sourceArray[ sourceOffset + 0 ] * scale );\n\t\t\t\tdestArray[ destOffset + 1 ] = toHalf( sourceArray[ sourceOffset + 1 ] * scale );\n\t\t\t\tdestArray[ destOffset + 2 ] = toHalf( sourceArray[ sourceOffset + 2 ] * scale );\n\n\t\t\t};\n\n\t\t} )();\n\n\t\tvar byteArray = new Uint8Array( buffer );\n\t\tbyteArray.pos = 0;\n\t\tvar rgbe_header_info = RGBE_ReadHeader( byteArray );\n\n\t\tif ( RGBE_RETURN_FAILURE !== rgbe_header_info ) {\n\n\t\t\tvar w = rgbe_header_info.width,\n\t\t\t\th = rgbe_header_info.height,\n\t\t\t\timage_rgba_data = RGBE_ReadPixels_RLE( byteArray.subarray( byteArray.pos ), w, h );\n\n\t\t\tif ( RGBE_RETURN_FAILURE !== image_rgba_data ) {\n\n\t\t\t\tswitch ( this.type ) {\n\n\t\t\t\t\tcase UnsignedByteType:\n\n\t\t\t\t\t\tdata = image_rgba_data;\n\t\t\t\t\t\tformat = RGBEFormat; // handled as THREE.RGBAFormat in shaders\n\t\t\t\t\t\ttype = UnsignedByteType;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase FloatType:\n\n\t\t\t\t\t\tvar numElements = ( image_rgba_data.length / 4 ) * 3;\n\t\t\t\t\t\tvar floatArray = new Float32Array( numElements );\n\n\t\t\t\t\t\tfor ( var j = 0; j < numElements; j ++ ) {\n\n\t\t\t\t\t\t\tRGBEByteToRGBFloat( image_rgba_data, j * 4, floatArray, j * 3 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdata = floatArray;\n\t\t\t\t\t\tformat = RGBFormat;\n\t\t\t\t\t\ttype = FloatType;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase HalfFloatType:\n\n\t\t\t\t\t\tvar numElements = ( image_rgba_data.length / 4 ) * 3;\n\t\t\t\t\t\tvar halfArray = new Uint16Array( numElements );\n\n\t\t\t\t\t\tfor ( var j = 0; j < numElements; j ++ ) {\n\n\t\t\t\t\t\t\tRGBEByteToRGBHalf( image_rgba_data, j * 4, halfArray, j * 3 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdata = halfArray;\n\t\t\t\t\t\tformat = RGBFormat;\n\t\t\t\t\t\ttype = HalfFloatType;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tconsole.error( 'THREE.RGBELoader: unsupported type: ', this.type );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\twidth: w, height: h,\n\t\t\t\t\tdata: data,\n\t\t\t\t\theader: rgbe_header_info.string,\n\t\t\t\t\tgamma: rgbe_header_info.gamma,\n\t\t\t\t\texposure: rgbe_header_info.exposure,\n\t\t\t\t\tformat: format,\n\t\t\t\t\ttype: type\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\tsetDataType: function ( value ) {\n\n\t\tthis.type = value;\n\t\treturn this;\n\n\t},\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tfunction onLoadCallback( texture, texData ) {\n\n\t\t\tswitch ( texture.type ) {\n\n\t\t\t\tcase UnsignedByteType:\n\n\t\t\t\t\ttexture.encoding = RGBEEncoding;\n\t\t\t\t\ttexture.minFilter = NearestFilter;\n\t\t\t\t\ttexture.magFilter = NearestFilter;\n\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\ttexture.flipY = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase FloatType:\n\n\t\t\t\t\ttexture.encoding = LinearEncoding;\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\t\t\t\t\ttexture.magFilter = LinearFilter;\n\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\ttexture.flipY = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase HalfFloatType:\n\n\t\t\t\t\ttexture.encoding = LinearEncoding;\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\t\t\t\t\ttexture.magFilter = LinearFilter;\n\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\ttexture.flipY = true;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}\n\n\t\treturn DataTextureLoader.prototype.load.call( this, url, onLoadCallback, onProgress, onError );\n\n\t}\n\n} );\n\nexport { RGBELoader };\n","/**\n * @author Emmett Lalish / elalish\n *\n * This class generates custom mipmaps for a roughness map by encoding the lost variation in the\n * normal map mip levels as increased roughness in the corresponding roughness mip levels. This\n * helps with rendering accuracy for MeshStandardMaterial, and also helps with anti-aliasing when\n * using PMREM. If the normal map is larger than the roughness map, the roughness map will be\n * enlarged to match the dimensions of the normal map.\n */\n\nimport {\n\tLinearMipMapLinearFilter,\n\tMathUtils,\n\tMesh,\n\tNoBlending,\n\tOrthographicCamera,\n\tPlaneBufferGeometry,\n\tRawShaderMaterial,\n\tScene,\n\tVector2,\n\tWebGLRenderTarget\n} from \"three\";\n\nvar RoughnessMipmapper = ( function () {\n\n\tvar _mipmapMaterial = _getMipmapMaterial();\n\tvar _scene = new Scene();\n\t_scene.add( new Mesh( new PlaneBufferGeometry( 2, 2 ), _mipmapMaterial ) );\n\n\tvar _flatCamera = new OrthographicCamera( 0, 1, 0, 1, 0, 1 );\n\tvar _tempTarget = null;\n\tvar _renderer = null;\n\n\t// constructor\n\tvar RoughnessMipmapper = function ( renderer ) {\n\n\t\t_renderer = renderer;\n\t\t_renderer.compile( _scene, _flatCamera );\n\n\t};\n\n\tRoughnessMipmapper.prototype = {\n\n\t\tconstructor: RoughnessMipmapper,\n\n\t\tgenerateMipmaps: function ( material ) {\n\n\t\t\tvar { roughnessMap, normalMap } = material;\n\t\t\tif ( roughnessMap == null || normalMap == null || ! roughnessMap.generateMipmaps ||\n                material.userData.roughnessUpdated ) return;\n\n\t\t\tmaterial.userData.roughnessUpdated = true;\n\n\t\t\tvar width = Math.max( roughnessMap.image.width, normalMap.image.width );\n\t\t\tvar height = Math.max( roughnessMap.image.height, normalMap.image.height );\n\t\t\tif ( ! MathUtils.isPowerOfTwo( width ) || ! MathUtils.isPowerOfTwo( height ) ) return;\n\n\t\t\tvar oldTarget = _renderer.getRenderTarget();\n\t\t\tvar autoClear = _renderer.autoClear;\n\t\t\t_renderer.autoClear = false;\n\n\t\t\tif ( _tempTarget == null || _tempTarget.width !== width || _tempTarget.height !== height ) {\n\n\t\t\t\tif ( _tempTarget != null ) _tempTarget.dispose();\n\n\t\t\t\t_tempTarget = new WebGLRenderTarget( width, height, { depthBuffer: false, stencilBuffer: false } );\n\t\t\t\t_tempTarget.scissorTest = true;\n\n\t\t\t}\n\n\t\t\tif ( width !== roughnessMap.image.width || height !== roughnessMap.image.height ) {\n\n\t\t\t\tvar newRoughnessTarget = new WebGLRenderTarget( width, height, {\n\t\t\t\t\tminFilter: LinearMipMapLinearFilter,\n\t\t\t\t\tdepthBuffer: false,\n\t\t\t\t\tstencilBuffer: false\n\t\t\t\t} );\n\t\t\t\tnewRoughnessTarget.texture.generateMipmaps = true;\n\t\t\t\t// Setting the render target causes the memory to be allocated.\n\t\t\t\t_renderer.setRenderTarget( newRoughnessTarget );\n\t\t\t\tmaterial.roughnessMap = newRoughnessTarget.texture;\n\t\t\t\tif ( material.metalnessMap == roughnessMap ) material.metalnessMap = material.roughnessMap;\n\t\t\t\tif ( material.aoMap == roughnessMap ) material.aoMap = material.roughnessMap;\n\n\t\t\t}\n\n\t\t\t_mipmapMaterial.uniforms.roughnessMap.value = roughnessMap;\n\t\t\t_mipmapMaterial.uniforms.normalMap.value = normalMap;\n\n\t\t\tvar position = new Vector2( 0, 0 );\n\t\t\tvar texelSize = _mipmapMaterial.uniforms.texelSize.value;\n\t\t\tfor ( var mip = 0; width >= 1 && height >= 1;\n\t\t\t\t++ mip, width /= 2, height /= 2 ) {\n\n\t\t\t\t// Rendering to a mip level is not allowed in webGL1. Instead we must set\n\t\t\t\t// up a secondary texture to write the result to, then copy it back to the\n\t\t\t\t// proper mipmap level.\n\t\t\t\ttexelSize.set( 1.0 / width, 1.0 / height );\n\t\t\t\tif ( mip == 0 ) texelSize.set( 0.0, 0.0 );\n\n\t\t\t\t_tempTarget.viewport.set( position.x, position.y, width, height );\n\t\t\t\t_tempTarget.scissor.set( position.x, position.y, width, height );\n\t\t\t\t_renderer.setRenderTarget( _tempTarget );\n\t\t\t\t_renderer.render( _scene, _flatCamera );\n\t\t\t\t_renderer.copyFramebufferToTexture( position, material.roughnessMap, mip );\n\t\t\t\t_mipmapMaterial.uniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t\t}\n\n\t\t\tif ( roughnessMap !== material.roughnessMap ) roughnessMap.dispose();\n\n\t\t\t_renderer.setRenderTarget( oldTarget );\n\t\t\t_renderer.autoClear = autoClear;\n\n\t\t},\n\n\t\tdispose: function ( ) {\n\n\t\t\t_mipmapMaterial.dispose();\n\t\t\t_scene.children[ 0 ].geometry.dispose();\n\t\t\tif ( _tempTarget != null ) _tempTarget.dispose();\n\n\t\t}\n\n\t};\n\n\tfunction _getMipmapMaterial() {\n\n\t\tvar shaderMaterial = new RawShaderMaterial( {\n\n\t\t\tuniforms: {\n\t\t\t\troughnessMap: { value: null },\n\t\t\t\tnormalMap: { value: null },\n\t\t\t\ttexelSize: { value: new Vector2( 1, 1 ) }\n\t\t\t},\n\n\t\t\tvertexShader: `\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nvarying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = vec4( position, 1.0 );\n}\n              `,\n\n\t\t\tfragmentShader: `\nprecision mediump float;\nprecision mediump int;\nvarying vec2 vUv;\nuniform sampler2D roughnessMap;\nuniform sampler2D normalMap;\nuniform vec2 texelSize;\n\n#define ENVMAP_TYPE_CUBE_UV\nvec4 envMapTexelToLinear(vec4 a){return a;}\n#include <cube_uv_reflection_fragment>\n\nfloat roughnessToVariance(float roughness) {\n  float variance = 0.0;\n  if (roughness >= r1) {\n    variance = (r0 - roughness) * (v1 - v0) / (r0 - r1) + v0;\n  } else if (roughness >= r4) {\n    variance = (r1 - roughness) * (v4 - v1) / (r1 - r4) + v1;\n  } else if (roughness >= r5) {\n    variance = (r4 - roughness) * (v5 - v4) / (r4 - r5) + v4;\n  } else {\n    float roughness2 = roughness * roughness;\n    variance = 1.79 * roughness2 * roughness2;\n  }\n  return variance;\n}\nfloat varianceToRoughness(float variance) {\n  float roughness = 0.0;\n  if (variance >= v1) {\n    roughness = (v0 - variance) * (r1 - r0) / (v0 - v1) + r0;\n  } else if (variance >= v4) {\n    roughness = (v1 - variance) * (r4 - r1) / (v1 - v4) + r1;\n  } else if (variance >= v5) {\n    roughness = (v4 - variance) * (r5 - r4) / (v4 - v5) + r4;\n  } else {\n    roughness = pow(0.559 * variance, 0.25);// 0.559 = 1.0 / 1.79\n  }\n  return roughness;\n}\n\nvoid main() {\n    gl_FragColor = texture2D(roughnessMap, vUv, -1.0);\n    if (texelSize.x == 0.0) return;\n    float roughness = gl_FragColor.g;\n    float variance = roughnessToVariance(roughness);\n    vec3 avgNormal;\n    for (float x = -1.0; x < 2.0; x += 2.0) {\n    for (float y = -1.0; y < 2.0; y += 2.0) {\n        vec2 uv = vUv + vec2(x, y) * 0.25 * texelSize;\n        avgNormal += normalize(texture2D(normalMap, uv, -1.0).xyz - 0.5);\n    }\n    }\n    variance += 1.0 - 0.25 * length(avgNormal);\n    gl_FragColor.g = varianceToRoughness(variance);\n}\n              `,\n\n\t\t\tblending: NoBlending,\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false\n\n\t\t} );\n\n\t\tshaderMaterial.type = 'RoughnessMipmapper';\n\n\t\treturn shaderMaterial;\n\n\t}\n\n\treturn RoughnessMipmapper;\n\n} )();\n\nexport { RoughnessMipmapper };\n","\nimport * as THREE from 'three'\nfunction setRandomColors(object, scale) {\n  var children = object.children;\n  if (children && children.length > 0) {\n      children.forEach(function (e) {\n          setRandomColors(e, scale)\n      });\n  } else {\n      // no children assume contains a mesh\n      if (object instanceof THREE.Mesh) {\n        if (object.material instanceof Array) {\n          object.material.forEach(function(m) {\n            m.color = new THREE.Color(scale(Math.random()).hex());\n            if (m.name.indexOf(\"building\") == 0) {\n                m.emissive = new THREE.Color(0x444444);\n                m.transparent = true;\n                m.opacity = 0.8;\n              }\n          });\n        } else {\n          object.material.color = new THREE.Color(scale(Math.random()).hex());\n          if (object.material.name.indexOf(\"building\") == 0) {\n              object.material.emissive = new THREE.Color(0x444444);\n              object.material.transparent = true;\n              object.material.opacity = 0.8;\n            }\n        }\n      }\n  }\n}\n\n/**\n * Adds a folder to the provided dat.gui to control an animation clip\n * \n * @param {*} folderName name of the folder to add\n * @param {*} gui dat.gui to add it to\n * @param {*} clipAction clipAction to control\n * @return the control object\n */\nexport function addClipActionFolder(folderName, gui, clipAction, animationClip) {\n  var actionControls = {\n      keyframe: 0,\n      time: 0,\n      timeScale: 1,\n      repetitions: Infinity,\n      // warp\n      warpStartTimeScale: 1,\n      warpEndTimeScale: 1,\n      warpDurationInSeconds: 2,\n      warp: function() {clipAction.warp(actionControls.warpStartTimeScale, actionControls.warpEndTimeScale, actionControls.warpDurationInSeconds)},\n      fadeDurationInSeconds: 2,\n      fadeIn: function() {clipAction.fadeIn(actionControls.fadeDurationInSeconds)},\n      fadeOut: function() {clipAction.fadeOut(actionControls.fadeDurationInSeconds)},\n      effectiveWeight: 0,\n      effectiveTimeScale: 0\n    }\n\n    var actionFolder = gui.addFolder(folderName)\n    actionFolder.add(clipAction, \"clampWhenFinished\").listen();\n    actionFolder.add(clipAction, \"enabled\").listen();\n    actionFolder.add(clipAction, \"paused\").listen();\n    actionFolder.add(clipAction, \"loop\", { LoopRepeat: THREE.LoopRepeat, LoopOnce: THREE.LoopOnce, LoopPingPong: THREE.LoopPingPong }).onChange(function(e) {\n      if (e == THREE.LoopOnce || e == THREE.LoopPingPong) {\n        clipAction.reset();\n        clipAction.repetitions = undefined\n        clipAction.setLoop(parseInt(e), undefined);\n      } else {\n        clipAction.setLoop(parseInt(e), actionControls.repetitions);\n      }\n    });\n    actionFolder.add(actionControls, \"repetitions\", 0, 100).listen().onChange(function(e) {\n      if (clipAction.loop == THREE.LoopOnce || clipAction.loop == THREE.LoopPingPong) {\n        clipAction.reset();\n        clipAction.repetitions = undefined\n        clipAction.setLoop(parseInt(clipAction.loop), undefined);\n      } else {\n        clipAction.setLoop(parseInt(e), actionControls.repetitions);\n      }\n    });\n    actionFolder.add(clipAction, \"time\", 0, animationClip.duration, 0.001).listen()\n    actionFolder.add(clipAction, \"timeScale\", 0, 5, 0.1).listen()\n    actionFolder.add(clipAction, \"weight\", 0, 1, 0.01).listen()\n    actionFolder.add(actionControls, \"effectiveWeight\", 0, 1, 0.01).listen()\n    actionFolder.add(actionControls, \"effectiveTimeScale\", 0, 5, 0.01).listen()\n    actionFolder.add(clipAction, \"zeroSlopeAtEnd\").listen()\n    actionFolder.add(clipAction, \"zeroSlopeAtStart\").listen()\n    actionFolder.add(clipAction, \"stop\")\n    actionFolder.add(clipAction, \"play\")\n    actionFolder.add(clipAction, \"reset\")\n    actionFolder.add(actionControls, \"warpStartTimeScale\", 0, 10, 0.01)\n    actionFolder.add(actionControls, \"warpEndTimeScale\", 0, 10, 0.01)\n    actionFolder.add(actionControls, \"warpDurationInSeconds\", 0, 10, 0.01)\n    actionFolder.add(actionControls, \"warp\")\n    actionFolder.add(actionControls, \"fadeDurationInSeconds\", 0, 10, 0.01)\n    actionFolder.add(actionControls, \"fadeIn\")\n    actionFolder.add(actionControls, \"fadeOut\")\n\n    return actionControls;\n}\n","import * as THREE from 'three'\nimport {GLTFLoader} from './loaders/GLTFLoader'\nimport {RGBELoader} from './loaders/RGBELoader'\nimport {RoughnessMipmapper} from './utils/RoughnessMipmapper'\nimport OrbitControls from './controllers/OrbitControls'\nimport Stats from 'stats.js'\nimport {get as getGlobal} from \"./utils/globalData\";\nimport * as dat from 'dat.gui';\nimport PubSub from 'pubsub-js'\nimport PlatformScene from './sceneConfig/PlatformScene'\nimport {addClipActionFolder} from './utils/util'\nimport {TriggerType} from \"./sceneConfig/action/BaseAction\";\nimport {Vector3} from \"three\";\nimport {Geometry} from \"three\";\nimport DeviceScene from \"./sceneConfig/DeviceScene\";\nimport {error} from \"three\";\n\nconst TWEEN = require('@tweenjs/tween.js');\n\nclass SceneManager {\n\n    constructor() {\n        this.container = null;\n        this.scene = null;\n        this.camera = null;\n        this.renderer = null;\n        this.stats = null;\n        this.pmremGenerator = null;\n        this.mixer = null;\n        this.controls = null;\n        this.width = 400;\n        this.height = 300;\n        this.clock = new THREE.Clock();\n        this.raycaster = null;\n        this.ifInit = false;\n        this.isLoaded = false;\n        this.bufferPool = [];\n        this.currentGltf = undefined;\n        this.group = new THREE.Group();\n        this.gltfs = [];\n        this.tween = null;\n        this.sceneModel = undefined;\n        // eslint-disable-next-line no-lone-blocks\n        {\n            this.defaultPositionOfCamera = new Vector3(-1, 3, 5);\n            // this.defaultUpOfCamera = new Vector3(0, 1, 0);\n            this.defaultLookAtOfCamera = new Vector3(0, 0, 0);\n\n            this.defaultPositionOfModel = new Vector3(0, 0, 0);\n            this.defaultRotationOfModel = new Vector3(0, 0, 0);\n            this.defaultScaleOfModel = new Vector3(1, 1, 1);\n        }\n    }\n\n    loadModelWithBg = (bgPath, bgFileName, modelPath, modelName) => {\n\n        // todo : 异步加载环境和光照贴图，显示loading\n\n        this.group.children.forEach(item => item.visible = false);\n\n        if (this.bufferPool.length === 0) {\n\n            let loader = new GLTFLoader().setPath(modelPath);\n            loader.load(modelName, (gltf) => {\n                this.currentGltf = gltf;\n                let model = gltf.scene;\n                model.position.set(this.defaultPositionOfModel.x, this.defaultPositionOfModel.y, this.defaultPositionOfModel.z);\n                model.rotation.setFromVector3(new Vector3(this.defaultRotationOfModel.x, this.defaultRotationOfModel.y, this.defaultRotationOfModel.z));\n                model.scale.set(this.defaultScaleOfModel.x, this.defaultScaleOfModel.y, this.defaultScaleOfModel.z);\n\n                this.setPMREM();\n                this.setTextureTo(model);\n\n                model.name = this.bufferPool.length;\n\n                //加载完成后放入缓冲池\n                let obj = {modelPath: modelPath, modelName: modelName, model: gltf};\n                this.bufferPool.push(obj);\n\n                this.mixer = new THREE.AnimationMixer(model);\n                gltf.animations.forEach(anamationClip => {\n                    this.mixer.clipAction(anamationClip).stop();\n                });\n\n                this.group.add(model);\n\n                //adjust control\n                this.adjustControl();\n\n                this.render();\n                this.isLoaded = true;\n                PubSub.publish(SceneManager.path + 'loaded', {modelName: modelName});\n                // this.enableControls();\n            });\n\n            return;\n        }\n\n        for (let i = 0; i < this.bufferPool.length; i++) {\n            if (this.bufferPool[i].modelPath === modelPath && this.bufferPool[i].modelName === modelName) {\n                this.currentGltf = this.bufferPool[i].model;\n                this.group.children[i].visible = true;\n                this.mixer = new THREE.AnimationMixer(this.bufferPool[i].model.scene);\n                this.bufferPool[i].model.animations.forEach(anamationClip => {\n                    this.mixer.clipAction(anamationClip).stop();\n                });\n                this.isLoaded = true;\n\n                //adjust control\n                this.adjustControl();\n\n                PubSub.publish(SceneManager.path + 'loaded', {modelName: modelName});\n\n                this.render();\n                // PubSub.publish(SceneManager.path + 'loadedFromCache',{modelName:modelName});\n                // this.enableControls(this.mixer,this.bufferPool[i].model);\n                return;\n            }\n        }\n\n        // let roughnessMipmapper = new RoughnessMipmapper(this.renderer);\n        let loader = new GLTFLoader().setPath(modelPath);\n        loader.load(modelName, (gltf) => {\n            this.currentGltf = gltf;\n            let model = gltf.scene;\n            model.position.set(this.defaultPositionOfModel.x, this.defaultPositionOfModel.y, this.defaultPositionOfModel.z);\n            model.rotation.setFromVector3(new Vector3(this.defaultRotationOfModel.x, this.defaultRotationOfModel.y, this.defaultRotationOfModel.z));\n            model.scale.set(this.defaultScaleOfModel.x, this.defaultScaleOfModel.y, this.defaultScaleOfModel.z);\n\n            this.setPMREM();\n\n            this.setTextureTo(model);\n\n            //加载完成后放入缓冲池\n            model.name = this.bufferPool.length;\n            let obj = {modelPath: modelPath, modelName: modelName, model: gltf};\n            this.bufferPool.push(obj);\n\n            this.group.add(model);\n\n            this.mixer = new THREE.AnimationMixer(model);\n            gltf.animations.forEach(anamationClip => {\n                this.mixer.clipAction(anamationClip).stop();\n            });\n\n            //adjust control\n            this.adjustControl();\n\n            this.render();\n            this.isLoaded = true;\n            PubSub.publish(SceneManager.path + 'loaded', {modelName: modelName});\n\n        });\n\n\n    };\n\n    pick = (offset, x, y) => {\n\n        let mouse = new THREE.Vector2();\n        mouse.x = ((x - offset.x) / this.width) * 2 - 1;\n        mouse.y = -((y - offset.y) / this.height) * 2 + 1;\n        console.log(offset.x + ' ' + offset.y + ' ' + mouse.x + ' ' + mouse.y);\n        let origin = this.camera.position;\n\n        let vector = new THREE.Vector3(mouse.x, mouse.y, 0.5).unproject(this.camera);\n        let direction = vector.sub(this.camera.position).normalize();\n\n        let raycaster = new THREE.Raycaster(origin, direction);\n        // calculate objects intersecting the picking ray\n        let intersects = raycaster.intersectObjects(this.scene.children, true);\n        if (intersects.length > 0) {\n            PubSub.publish(SceneManager.path + 'pick', {name: intersects[0].object.name, type: TriggerType.Single});\n            return intersects[0];\n        } else {\n            return null;\n        }\n    };\n\n    animate = (time) => {\n\n        TWEEN.default.update(time);\n\n        if (this.ifInit) {\n            let delta = this.clock.getDelta();\n            this.mixer.update(delta);\n            this.controls.update(delta);\n            this.render();\n            this.stats.update();\n\n            if (this.mixer && this.animationControls.length > 0) {\n                this.mixer.update(delta);\n                this.animationControls.forEach((value, index) => {\n                    value.time = this.mixer.time;\n                    value.effectiveTimeScale = this.clipAndActions[index].action.getEffectiveTimeScale();\n                    value.effectiveWeight = this.clipAndActions[index].action.getEffectiveWeight();\n                });\n\n            }\n\n            PubSub.publish(SceneManager.path + 'animate', {delta: delta, isLoaded: this.isLoaded});\n        }\n\n        requestAnimationFrame(this.animate.bind(this));\n\n    };\n\n    // current1 相机当前的位置\n    // target1 相机的controls的target\n    // current2 新相机的目标位置\n    // target2 新的controls的target\n\n\n    animateCamera = (current1, target1, current2, target2, lookAt) => {\n        this.camera.lookAt(lookAt);\n        let self = this;\n        let positionVar = {\n            x1: current1.x,\n            y1: current1.y,\n            z1: current1.z,\n            x2: target1.x,\n            y2: target1.y,\n            z2: target1.z\n        };\n\n        this.controls.enabled = false;\n        this.tween = new TWEEN.default.Tween(positionVar);\n\n        this.tween.to({\n            x1: current2.x,\n            y1: current2.y,\n            z1: current2.z,\n            x2: target2.x,\n            y2: target2.y,\n            z2: target2.z\n        }, 1500);\n\n        this.tween.onUpdate(function () {\n            self.camera.position.x = positionVar.x1;\n            self.camera.position.y = positionVar.y1;\n            self.camera.position.z = positionVar.z1;\n            self.controls.target.x = positionVar.x2;\n            self.controls.target.y = positionVar.y2;\n            self.controls.target.z = positionVar.z2;\n            self.controls.update();\n            console.log(positionVar);\n        });\n\n        this.tween.onComplete(function () {\n            ///开启控制器\n            self.controls.enabled = true;\n        })\n\n        this.tween.easing(TWEEN.default.Easing.Cubic.InOut);\n        this.tween.start();\n    }\n\n    render = () => {\n        this.renderer.render(this.scene, this.camera);\n    };\n\n    onWindowResize = () => {\n\n        this.camera.aspect = this.container.offsetWidth / this.container.offsetHeight;\n        this.camera.updateProjectionMatrix();\n        this.renderer.setSize(this.width, this.height);\n    };\n\n    init = () => {\n        this.raycaster = new THREE.Raycaster();\n        this.scene = new THREE.Scene();\n        this.scene.add(this.group);\n\n        this.camera = new THREE.PerspectiveCamera(60, this.width / this.height, 1, 2000);\n        this.camera.position.x = this.defaultPositionOfCamera.x;\n        this.camera.position.y = this.defaultPositionOfCamera.y;\n        this.camera.position.z = this.defaultPositionOfCamera.z;\n        // this.camera.lookAt( this.scene.position - new THREE.Vector3(0,0,0) );\n        // this.camera.lookAt( this.scene.position);\n        this.camera.lookAt(this.defaultLookAtOfCamera);\n\n        this.renderer = new THREE.WebGLRenderer({antialias: true, alpha: true});\n        this.pmremGenerator = new THREE.PMREMGenerator(this.renderer);\n        this.pmremGenerator.compileEquirectangularShader();\n        this.renderer.setClearColor(0xEEEEEE, 0.0);\n        this.renderer.setPixelRatio(window.devicePixelRatio);\n        this.renderer.setSize(this.width, this.height);\n        this.renderer.toneMapping = THREE.ACESFilmicToneMapping;\n        this.renderer.toneMappingExposure = 0.8;\n        this.renderer.outputEncoding = THREE.sRGBEncoding;\n\n        let ambi = new THREE.AmbientLight(0x686868); //环境光\n        this.scene.add(ambi);\n        let spotLight = new THREE.DirectionalLight(0xffffff);  //点光源\n        spotLight.position.set(550, 100, 550);\n        spotLight.intensity = 0.6;\n        this.scene.add(spotLight);\n\n        this.controls = new OrbitControls(this.camera, this.renderer.domElement);\n        this.controls.addEventListener('change', this.render);\n        this.controls.minDistance = 0.1;\n        this.controls.maxDistance = 13;\n        // this.controls.autoRotate = false;\n        // this.controls.autoRotateSpeed = -10;\n        this.controls.screenSpacePanning = true;\n        this.controls.target.set(0, 0, -0.2);\n\n\n        this.stats = new Stats();\n        this.animate();\n\n    };\n\n    appendChild = (div) => {\n\n        let newContainer = document.getElementById(div);\n        if (!newContainer)\n            return;\n\n        if (newContainer !== this.container) {\n            if (this.container !== null) {\n                if (this.stats.dom in this.container.children) {\n                    this.container.removeChild(this.stats.dom);\n                }\n                if (this.renderer.domElement in this.container.children) {\n                    this.container.removeChild(this.renderer.domElement)\n                }\n                window.removeEventListener(\"resize\", this.onWindowResize, false);\n                this.ifInit = false;\n            }\n            this.container = newContainer;\n            this.width = newContainer.offsetWidth;\n            this.height = newContainer.offsetHeight;\n            console.log(this.width, this.height);\n            this.camera.aspect = this.width / this.height;\n            this.renderer.setSize(this.width, this.height);\n            this.container.appendChild(this.stats.dom);\n            this.mixer = new THREE.AnimationMixer();\n            this.container.appendChild(this.renderer.domElement);\n\n            this.ifInit = true;\n\n\n        }\n\n\n        window.addEventListener('resize', this.onWindowResize, false);\n\n    };\n\n    getAnimationClipAndActionBy = (name) => {\n        let animationClip = undefined;\n        let animationAction = undefined;\n        let clip = THREE.AnimationClip.findByName(this.currentGltf.animations, name);\n        if (clip === null) return true;\n        let action = this.mixer.clipAction(clip);\n        if (action === null) return true;\n        animationClip = clip;\n        animationAction = action;\n        return {clip: animationClip, action: animationAction};\n    };\n\n    setCameraPos(position, up, lookat) {\n\n        if (position !== null) {\n            this.camera.position.x = position.x;\n            this.camera.position.y = position.y;\n            this.camera.position.z = position.z;\n        } else {\n            console.log('position is null')\n        }\n\n        if (lookat !== null) {\n            this.camera.lookAt(lookat);\n        } else {\n            console.log('lookat is null')\n        }\n        this.camera.lookAt(new Vector3());\n\n        // if (up !== null) {\n        //     this.camera.up = up;\n        // } else {\n        //     console.log('up is null')\n        // }\n    }\n\n    setModelPos(position, rotation, scale) {\n\n        if (position !== null) {\n            this.defaultPositionOfModel.set(position.x, position.y, position.z);\n        } else {\n            console.log('position is null')\n        }\n\n        if (rotation !== null) {\n            this.defaultRotationOfModel.set(rotation.x, rotation.y, rotation.z);\n        } else {\n            console.log('rotation is null')\n        }\n\n        if (scale !== null) {\n            this.defaultScaleOfModel.set(scale.x, scale.y, scale.z);\n        } else {\n            console.log('scale is null')\n        }\n\n        if (this.currentGltf !== undefined) {\n            this.currentGltf.scene.position.set(this.defaultPositionOfModel.x, this.defaultPositionOfModel.y, this.defaultPositionOfModel.z);\n            this.currentGltf.scene.rotation.setFromVector3(new Vector3(this.defaultRotationOfModel.x, this.defaultRotationOfModel.y, this.defaultRotationOfModel.z));\n            this.currentGltf.scene.scale.set(this.defaultScaleOfModel.x, this.defaultScaleOfModel.y, this.defaultScaleOfModel.z);\n        }\n\n\n    }\n\n    // adjust control 、 camera near and camera far to the current model\n    adjustControl() {\n\n        this.setCameraPos(this.sceneModel.positionOfCamera,this.sceneModel.upOfCamera,this.sceneModel.lookatOfCamera);\n        this.setModelPos(this.sceneModel.positionOfModel,this.sceneModel.rotationOfModel,this.sceneModel.scaleOfModel);\n\n        let object = this.currentGltf.scene;\n        const box = new THREE.Box3().setFromObject(object);\n        const size = box.getSize(new Vector3()).length();\n        // const center = box.getCenter(new Vector3());\n        this.controls.reset();\n        // object.position.x += (object.position.x - center.x);\n        // object.position.y += (object.position.y - center.y);\n        // object.position.z += (object.position.z - center.z);\n        this.controls.maxDistance = size * 10;\n        this.camera.near = size / 100;\n        this.camera.far = size * 100;\n        this.camera.updateProjectionMatrix();\n        this.controls.saveState();\n    }\n\n    //set PMREM\n    setPMREM() {\n        if (SceneManager.path === DeviceScene.path) {\n            this.getPmremTexture().then(({envMap}) => {\n                this.scene.environment = envMap;\n            });\n        }\n    }\n\n    getPmremTexture() {\n        let path = '/source/textures/equirectangular/venice_sunset_1k.hdr';//L1024.png\n        // no envmap\n        if (!path) return Promise.resolve({envMap: null});\n        return new Promise((resolve, reject) => {\n\n            new RGBELoader()\n                .setDataType(THREE.UnsignedByteType)\n                .load(path, (texture) => {\n\n                    const envMap = this.pmremGenerator.fromEquirectangular(texture).texture;\n                    this.pmremGenerator.dispose();\n\n                    resolve({envMap});\n\n                }, undefined, reject);\n\n        });\n    }\n\n    // 光照贴图\n    // 金属度贴图\n    // 光照贴图\n    // 粗糙度贴图\n    setTextureTo(model) {\n\n        if (SceneManager.path === PlatformScene.path) {\n\n            let roughnessMipmapper = new RoughnessMipmapper(this.renderer);\n            let textureLoader = new THREE.TextureLoader();\n\n            let lightMap = null;\n            let path = this.sceneModel.lightMapPath();\n            if (typeof (path) === 'string' && path.length > 0) {\n                lightMap = textureLoader.load(path);\n            }\n\n            model.traverse((child) => {\n                    if (child instanceof THREE.Mesh && child.isMesh) {\n                        roughnessMipmapper.generateMipmaps(child.material);\n                        child.material.lightMap = lightMap;\n                        child.material.needsUpdate = true;\n                    }\n                }\n            );\n\n            roughnessMipmapper.dispose();\n\n            return;\n\n        }\n\n        // device\n        let roughnessMipmapper = new RoughnessMipmapper(this.renderer);\n        let textureLoader = new THREE.TextureLoader();\n\n        let lightMap = null;\n        let path = this.sceneModel.lightMapPath();\n        if (typeof (path) === 'string' && path.length > 0) {\n            lightMap = textureLoader.load(path);\n        }\n\n        let colorMap = null;\n        path = this.sceneModel.colorMapFilePath();\n        if (typeof (path) === 'string' && path.length > 0) {\n            colorMap = textureLoader.load(path);\n        }\n\n        let metallicMap = null;\n        path = this.sceneModel.metallicMapFilePath();\n        if (typeof (path) === 'string' && path.length > 0) {\n            metallicMap = textureLoader.load(path);\n        }\n\n        let roughnessMap = null;\n        path = this.sceneModel.roughnessMapFilePath();\n        if (typeof (path) === 'string' && path.length > 0) {\n            roughnessMap = textureLoader.load(path);\n        }\n\n        model.traverse((child) => {\n            if (child instanceof THREE.Mesh && child.isMesh) {\n                // set\n                roughnessMipmapper.generateMipmaps(child.material);\n                if (SceneManager.path === DeviceScene.path && child.name === 'Frame') {\n                    // error\n                    // child.material.emissive = new THREE.Color(0xFF0000);\n                    // child.material.transparent = true;\n                    // child.material.opacity = 1;\n                    // child.material.color.setHex(0xFF0000);\n\n                    // 贴图\n                    // child.material.map = colorMap;\n                    // child.material.roughnessMap = roughnessMap;\n                    // child.material.metalnessMap = metallicMap;\n                } else {\n                    child.material.lightMap = lightMap;\n                }\n                child.material.needsUpdate = true;\n            }\n        });\n        roughnessMipmapper.dispose();\n    }\n\n    // animation test\n    animationControls = [];\n    clipAndActions = [];\n    mixerControls = {\n        time: 0,\n        timeScale: 1,\n        stopAllAction: function () {\n            const sceneManager = getGlobal('sceneManager');\n            sceneManager.mixer.stopAllAction()\n        },\n    };\n\n    enableControls(mixer, gltf) {\n\n        if (SceneManager.path !== PlatformScene.path) {\n            return;\n        }\n        let _this = this;\n        let gui = new dat.GUI();\n        let mixerFolder = gui.addFolder(\"AnimationMixer\");\n        mixerFolder.add(this.mixerControls, \"time\").listen();\n        mixerFolder.add(this.mixerControls, \"timeScale\", 0, 5).onChange(function (timeScale) {\n            _this.mixer.timeScale = timeScale;\n        });\n        mixerFolder.add(this.mixerControls, \"stopAllAction\").listen();\n\n        let clipAndAction = null;\n        let control = null;\n\n        clipAndAction = SceneManager.getAnimationClipAndActionByNameWithMixerAndGltfs('Half_N', [gltf], mixer);\n        control = addClipActionFolder(\"Half_N\", gui, clipAndAction.action, clipAndAction.clip);\n        this.animationControls.push(control);\n        this.clipAndActions.push(clipAndAction);\n\n        clipAndAction = SceneManager.getAnimationClipAndActionByNameWithMixerAndGltfs('Half_S', [gltf], mixer);\n        control = addClipActionFolder(\"Half_S\", gui, clipAndAction.action, clipAndAction.clip);\n        this.animationControls.push(control);\n        this.clipAndActions.push(clipAndAction);\n\n    }\n\n}\n\nSceneManager.path = PlatformScene.path;\n\nSceneManager.getAnimationClipAndActionByNameWithMixerAndGltfs = (name, gltfs, mixer) => {\n    let animationClip = undefined;\n    let animationAction = undefined;\n    gltfs.forEach((value, index) => {\n        let clip = THREE.AnimationClip.findByName(value.animations, name);\n        if (clip === null) return true;\n        let action = mixer.clipAction(clip);\n        if (action === null) return true;\n        animationClip = clip;\n        animationAction = action;\n    });\n    return {clip: animationClip, action: animationAction};\n};\n\nexport default SceneManager\n\n\n// Object.assign( SceneManager.prototype, THREE.EventDispatcher.prototype );\n// SceneManager.prototype = Object.create( THREE.EventDispatcher.prototype );\n\n\n// loadModel(path,fileName,func){\n//\n//     let roughnessMipmapper = new RoughnessMipmapper(this.renderer);\n//     let loader = new GLTFLoader().setPath(path);\n//     loader.load(fileName, function (gltf) {\n//\n//         let model = gltf.scene;\n//         console.log(gltf);\n//         // model.position.set(1,1,0);\n//\n//\n//         model.traverse(function (child) {\n//             if (child.isMesh) {\n//                 roughnessMipmapper.generateMipmaps(child.material);\n//             }\n//\n//         });\n//\n//         this.scene.add(model);\n//         this.mixer = new THREE.AnimationMixer( model );\n//         // mixer.clipAction( gltf.animations ).play();\n//         gltf.animations.forEach(anamationClip=>{\n//             this.mixer.clipAction(anamationClip).play();\n//         })\n//         roughnessMipmapper.dispose();\n//\n//         this.animate();\n//\n//         func(model);\n//\n//     });\n// }\n\n// // stop animation\n// configAnimation(){\n//\n// }\n\n// unload = ()=>{\n//\n// };\n\n\n// if (child.geometry instanceof THREE.BufferGeometry){\n// child.geometry.attributes.uv = child.geometry.attributes.uv2;\n// child.geometry.attributes.uv2 = child.geometry.attributes.uv;\n// } else {\n// child.geometry.faceVertexUvs.push(model.geometry.faceVertexUvs[0]);\n// child.geometry.faceVertexUvs[1] = model.geometry.faceVertexUvs[0];\n// }\n// geometry.computeFaceNormals();\n// geometry.computeVertexNormals(false);\n// geometry.normalsNeedUpdate = true;","function buildTypes(names) {\n    let result = {};\n    names.forEach(v => {\n        result[v] = v;\n    });\n    return result;\n}\n\nconst r = buildTypes([\n    \"TEST\"\n]);\n\nexport default r;","import actionTypes from'../actions/actionTypes'\n\n\nexport function test(state={\n    testDate:1,\n    test:2,\n    t:3\n},action) {\n    switch (action.type) {\n        case actionTypes.TEST:\n            return{...state,t:4}\n        default:\n            return state\n    }\n}","import {combineReducers} from 'redux';\nimport * as testReducers from './test'\n\nconst appReducer = combineReducers(Object.assign(\n    {},\n    testReducers\n));\n\nexport default appReducer;","import React,{Component} from 'react'\nimport { get as getGlobal } from '../../common/utils/globalData'\nimport './device.css'\nimport PlatformScene from \"../../common/sceneConfig/PlatformScene\";\nimport {Vector2} from \"three\";\n\n\nclass Example extends Component{\n\n    handlePick=(e)=>{\n        const sceneManager = getGlobal('sceneManager');\n        const node = sceneManager.pick(new Vector2(200, 0), e.clientX, e.clientY);\n        if(node!==null){\n            sceneManager.animateCamera(sceneManager.camera.position, sceneManager.controls.position0,node.object.position,node.object.position)\n        }\n    };\n\n    componentDidMount() {\n        const _this = this;\n        const sceneManager = getGlobal('sceneManager');\n        sceneManager.scenePath = PlatformScene.path;\n        sceneManager.appendChild('device');\n        sceneManager.loadModelWithBg('/source/textures/equirectangular/','royal_esplanade_1k.hdr','/source/models/test/','Station.glb');\n        sceneManager.container.addEventListener('click',_this.handlePick,false);\n    }\n\n    componentWillUnmount() {\n        const sceneManager = getGlobal('sceneManager');\n        const _this = this;\n        if(sceneManager.container!==null){\n            sceneManager.container.removeEventListener('click',_this.handlePick,false);\n        }\n    }\n\n    render() {\n        return(\n            <div id='device'></div>\n        )\n    }\n}\n\nexport default Example;\n","import React, {PureComponent} from 'react'\nimport './status.less'\n\n\nclass Status extends PureComponent{\n\n    state={\n        list:[],\n        selected: -1\n    }\n\n    errorJudjement=(list)=>{\n        for(let i =0;i<list.length;i++){\n            if(list[i].status===\"error\")\n                return false\n        }\n        return true;\n    }\n\n    handleClick=(index)=>{\n        this.setState({selected:index})\n    }\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        this.setState({list:nextProps.list || []})\n    }\n\n    render() {\n        const { list, selected } = this.state;\n        return(\n            <div className='status'>\n                {\n                    list.map((item,index)=>{\n                        return(\n                            <div className={selected===index?\"item-selected\":\"item\"} key={index} onClick={()=>this.handleClick(index)}>\n                                <div className='triangle'></div>\n                                <div className={this.errorJudjement(item.list)?\"left\":\"left-err\"}>{item.title}</div>\n                                <div className='line'></div>\n                                <div className='right'>\n                                    {\n                                        item.list.map((tip,tipIndex)=>{\n                                            return(\n                                                <div className={tip.status===\"error\"?\"tip-err\":\"tip\"} key={tipIndex}>\n                                                    <div className='key'>{tip.key}</div>\n                                                    <div className='value'>{tip.value}</div>\n                                                </div>\n                                            )\n                                        })\n                                    }\n                                </div>\n                            </div>\n                        )\n                    })\n                }\n            </div>\n        )\n    }\n}\n\nexport default Status;\n","import React, {PureComponent} from 'react'\nimport './networkError.less'\n\n\nclass NetworkError extends PureComponent{\n\n    render() {\n\n        return(\n            <div className='networkError'>\n                网络故障，请稍后重试...\n            </div>\n        )\n    }\n}\n\nexport default NetworkError;\n","import React,{PureComponent} from 'react'\nimport Status from '../../components/status/status'\nimport NetworkError from '../../components/networkError/networkError'\nimport './device.less'\nimport '../../img/map.png'\nimport http from '../../utils/http'\nimport {get as getGlobal} from \"../../common/utils/globalData\";\nimport {Vector2} from \"three\";\nimport SceneManager from \"../../common/SceneManager\";\nimport DeviceScene from \"../../common/sceneConfig/DeviceScene\";\n\n\n\nclass Device extends PureComponent{\n\n    state={\n        statusList:[],\n        showError:false\n    }\n\n    handleShow=()=>{\n        this.setState({showError:true})\n        setTimeout(()=>{\n            this.setState({showError:false})\n        },2000)\n    }\n\n    handlePick=(e)=>{\n        const sceneManager = getGlobal('sceneManager');\n        const node = sceneManager.pick(new Vector2(200, 0), e.clientX, e.clientY);\n        if(node!==null){\n\n            sceneManager.animateCamera(sceneManager.camera.position, sceneManager.controls.position0,{x:-1,y:2,z:5},{x:0,y:0,z:0},{x:0,y:0,z:0})\n        }else {\n            sceneManager.animateCamera(sceneManager.camera.position, sceneManager.controls.position0,{x:0,y:5,z:15},{x:0,y:0,z:0},{x:0,y:0,z:0})\n        }\n        // console.log(node);\n    }\n\n    getStatus=()=>{\n        http.get('/virtualData/status.json')\n            .then(res=>{\n                this.setState({statusList:res.data.data || []})\n                console.log(res.data.data)\n            })\n    };\n\n    componentWillMount() {\n        this.getStatus();\n    }\n\n    componentDidMount() {\n        const _this = this;\n        setTimeout(()=>{\n            const sceneManager = getGlobal('sceneManager');\n            const application = getGlobal('Application');\n            let scene = application.deviceTVM;\n            SceneManager.path = DeviceScene.path;\n            sceneManager.sceneModel = scene;\n            sceneManager.appendChild('model');\n            sceneManager.loadModelWithBg(scene.bgFilePath(), scene.bgFileName(), scene.modelFilePath(), scene.modelFileName());\n            sceneManager.container.addEventListener('disclick',_this.handlePick,false);\n            // sceneManager.setCameraPos(scene.positionOfCamera,scene.upOfCamera,scene.lookatOfCamera);\n            // sceneManager.setModelPos(scene.positionOfModel,scene.rotationOfModel,scene.scaleOfModel);\n        },10)\n\n    }\n\n    componentWillUnmount() {\n        clearTimeout();\n    }\n\n    render() {\n        const { statusList,showError } = this.state;\n        // console.log(statusList);\n        return(\n            <div className='device'>\n                <div className='left'>\n                    <div id='model'>\n                        {\n                            showError?<NetworkError/>:\"\"\n                        }\n                    </div>\n                    <div className='repair-btn' onClick={this.handleShow}>\n                        <div className='icon'></div>\n                        <div className='text'>一键报修</div>\n                    </div>\n                </div>\n                <div className='right'>\n                    <div className='position'>\n                        <img className='icon' src={[require('../../img/map.png')]} />\n                        <div className='title'>设备位置</div>\n                        <div className='desc'>站台东侧A进口，设备3</div>\n                    </div>\n                    <Status list={statusList}/>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Device;\n","import React, {PureComponent} from 'react'\nimport './modal.less'\n\n\nclass Modal extends PureComponent{\n\n    state={\n        show: false,\n        width: 859,\n        height:608,\n        title: \"\"\n    }\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        this.setState({show:nextProps.show})\n    }\n\n    componentWillMount() {\n        const { show, width, height,title } = this.props;\n        this.setState({\n            show: show || false,\n            width: width || 859,\n            height: height || 608,\n            title: title || \"\"\n        })\n    }\n\n    render() {\n        const { show,width,height,title } = this.state;\n        const {children} = this.props;\n        if(show)\n            return(\n                <div className='modal'>\n                    <div className='body' style={{width:width,height:height}}>\n                        <div className='header'>\n                            <div className='title'>{title}</div>\n                            <img\n                                className='icon'\n                                src={[require('../../img/close.png')]}\n                                onClick={this.props.onCancel || null}\n                                alt='关闭'\n                            />\n                        </div>\n                        <div className='content'>{children}</div>\n                    </div>\n                </div>\n            )\n        else\n            return null;\n\n    }\n}\n\nexport default Modal;\n","import React, {Component} from 'react'\nimport Modal from '../../components/modal/modal'\nimport './platform.less'\nimport {get as getGlobal} from \"../../common/utils/globalData\";\nimport {Vector2} from \"three\";\nimport SceneManager from \"../../common/SceneManager\";\nimport PlatformScene from \"../../common/sceneConfig/PlatformScene\";\nimport PubSub from \"pubsub-js\";\n\n\nclass Platform extends Component {\n\n    // -- 3D\n\n    handlePick = (e) => {\n        const sceneManager = getGlobal('sceneManager');\n        const node = sceneManager.pick(new Vector2(224, 44), e.clientX, e.clientY);\n    };\n\n    // -- video\n\n    handleOpenVideo = () => {\n        this.setState({\n            show: true\n        })\n    };\n\n    handleCancelModal = () => {\n        this.setState({\n            show: false,\n\n        })\n    };\n\n\n    state = {\n        show: false,\n        video: '/source/video/bg_video.mp4',\n        currentReport:'本次列车：开往会议中心',\n        nextReport:'2',\n        sceneManager: null\n    };\n\n    componentWillMount() {\n        PubSub.subscribe(PlatformScene.path + 'pop_video', this.showVideo.bind(this));\n        PubSub.subscribe(PlatformScene.path + 'report', this.report.bind(this));\n        // PubSub.publish(PlatformScene.path + 'report', {current: current, next: next});\n\n    };\n\n    componentDidMount() {\n\n        const _this = this;\n        setTimeout(()=>{\n            const sceneManager = getGlobal('sceneManager');\n            const application = getGlobal('Application');\n            let scene = application.platform;\n            SceneManager.path = PlatformScene.path;\n            sceneManager.sceneModel = scene;\n            sceneManager.appendChild('platform-demo');\n            sceneManager.loadModelWithBg(scene.bgFilePath(), scene.bgFileName(), scene.modelFilePath(), scene.modelFileName());\n            sceneManager.container.addEventListener('click', _this.handlePick, false);\n            // sceneManager.setCameraPos(scene.positionOfCamera,scene.upOfCamera,scene.lookatOfCamera);\n            // sceneManager.setModelPos(scene.positionOfModel,scene.rotationOfModel,scene.scaleOfModel);\n\n        },10)\n    };\n\n\n    componentWillUnmount() {\n        const sceneManager = getGlobal('sceneManager');\n        const _this = this;\n        if (sceneManager.container !== null) {\n            sceneManager.container.removeEventListener('click', _this.handlePick, false);\n        }\n    };\n\n    showVideo(event ,data){\n        this.setVideo(data.src);\n        this.handleOpenVideo();\n    }\n\n    setVideo = (newViedeo) => {\n        this.setState({\n            video: newViedeo\n        })\n    };\n\n    render() {\n        const {show, video,currentReport,nextReport} = this.state;\n        return (\n            <div className='platform'>\n                <Modal\n                    show={show}\n                    onCancel={this.handleCancelModal}\n                    title=\"XXXj 监控实时效果\"\n                >\n                    <video className='video' controls={false} autoPlay loop src={video}>您的浏览器不支持video标签，建议更换现代浏览器\n                    </video>\n                </Modal>\n                <div id='model'>\n                    {/*<img*/}\n                    {/*    className='platform-demo'*/}\n                    {/*    src={[require('../../img/platform.png')]}*/}\n                    {/*    onClick={this.handleOpenVideo}*/}\n                    {/*/>*/}\n                    <div id = 'platform-demo' className='platform-demo' >\n\n                    </div>\n                    <div className='info-card'>\n                        <div className='info-container'>\n                            <span className='title'>本次列车：</span>\n                            <span className='info'>开往会议中心</span>\n                            <span className='status'>{currentReport}</span>\n                        </div>\n                        <div className='info-container'>\n                            <span className='title'>下一班列车还需等待：</span>\n                            <span className='info'>{nextReport}分钟</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    };\n\n    //{this.props.location.state.id}\n    report(event,data){\n        this.setState({\n            currentReport: data.current,\n            nextReport: data.next\n        })\n    }\n}\n\nexport default Platform;\n","import React, { PureComponent } from 'react'\nimport './sceneDemo.less'\nimport {get as getGlobal} from '../../common/utils/globalData'\nimport {Vector2} from \"three\";\n\n\nclass SceneDemo extends PureComponent{\n\n    state={\n        sceneManager: null\n    }\n\n    handlePick=(e)=>{\n        const sceneManager = getGlobal('sceneManager');\n        const node = sceneManager.pick(new Vector2(200, 0), e.clientX, e.clientY);\n        if(node!==null){\n             sceneManager.animateCamera(sceneManager.camera.position, sceneManager.controls.position0,node.object.position,node.object.position)\n        }\n        console.log(node);\n    }\n\n    componentDidMount() {\n        const _this = this;\n        const sceneManager = getGlobal('sceneManager');\n        sceneManager.appendChild('sceneDemo');\n        sceneManager.loadModelWithBg('/source/textures/equirectangular/','royal_esplanade_1k.hdr','/source/models/glb/','CesiumMan.glb');\n        sceneManager.container.addEventListener('click',_this.handlePick,false);\n    }\n\n    componentWillUnmount() {\n        const sceneManager = getGlobal('sceneManager');\n        const _this = this;\n        if(sceneManager.container!==null){\n            sceneManager.container.removeEventListener('click',_this.handlePick,false);\n        }\n    }\n\n    render() {\n\n        return(\n            <div id='sceneDemo'></div>\n        )\n    }\n\n}\n\n\n\nexport default SceneDemo\n","import React,{Component} from 'react'\nimport Example from '../pages/example/device'\nimport Device from '../pages/device/device'\nimport Platform from '../pages/platform/Platform'\nimport SceneDemo from '../pages/sceneManagerDemo/sceneDemo'\nimport {Layout, Menu} from 'antd'\nimport {Link,Route} from 'react-router-dom'\nconst {  Content, Sider } = Layout;\nconst { SubMenu } = Menu;\n\nclass OwnLayout extends Component{\n\n\n    state = {\n        collapsed: false,\n    };\n\n    onCollapse = collapsed => {\n        this.setState({ collapsed });\n    };\n\n\n    render() {\n        return(\n            <Layout style={{ minHeight: '100vh' }}>\n                <Sider collapsible collapsed={this.state.collapsed} onCollapse={this.onCollapse}>\n                    <Menu theme=\"dark\" defaultSelectedKeys={['platform']} mode=\"inline\">\n                        <Menu.Item key='platform'><Link to={{pathname:'/',state:{id:0}}}>站台监控</Link></Menu.Item>\n                        <SubMenu\n                            key=\"device\"\n                            title={<span>设备监控</span>}\n                        >\n                            <SubMenu\n                                key='TVM'\n                                title={<span>TVM</span>}\n                            >\n                                <Menu.Item key='TVM-1'><Link to={{pathname:'/example',state:{id:1}}}>西侧设备1</Link></Menu.Item>\n                                <Menu.Item key='TVM-2'><Link to={{pathname:'/sceneManager',state:{id:2}}}>西侧设备2</Link></Menu.Item>\n                                <Menu.Item key='TVM-3'><Link to={{pathname:'/example',state:{id:3}}}>西侧设备3</Link></Menu.Item>\n                                <Menu.Item key='TVM-4'><Link to={{pathname:'/example',state:{id:4}}}>西侧设备4</Link></Menu.Item>\n                            </SubMenu>\n                            <SubMenu\n                                key='AGM'\n                                title={<span>AGM</span>}\n                            >\n                                <Menu.Item key='AGM-1'><Link to={{pathname:'/device',state:{id:1}}}>西侧设备1</Link></Menu.Item>\n                            </SubMenu>\n                            <SubMenu\n                                key='CCTV'\n                                title={<span>CCTV</span>}\n                            >\n\n                            </SubMenu>\n                        </SubMenu>\n                    </Menu>\n                </Sider>\n                <Layout>\n                    <Content>\n                        <Route exact path='/' component={Platform} />\n                        <Route exact path='/example' component={Example} />\n                        <Route exact path='/device' component={Device} />\n                        <Route exact path='/sceneManager' component={SceneDemo}/>\n\n                    </Content>\n                </Layout>\n            </Layout>\n        )\n    }\n}\n\nexport default OwnLayout;\n","import React, { Component } from 'react';\nimport {Provider} from 'react-redux';\nimport {createStore,applyMiddleware,compose} from 'redux';\nimport Thunk from 'redux-thunk';\nimport {createLogger} from 'redux-logger';\nimport appReducers from './reducers';\nimport {BrowserRouter} from 'react-router-dom';\nimport Layout from './layout/layout';\nimport 'antd/dist/antd.css'\n\n\n\n\n\nimport './App.css';\n\nconst loggerMiddleware = createLogger();\nfunction configureStore(initialState) {\n  const enhancer = compose(\n      applyMiddleware(\n          Thunk,\n          loggerMiddleware,\n      ),\n  );\n  return createStore(appReducers, initialState, enhancer);\n}\n\nconst store = configureStore({\n  test: {},\n});\n\nclass App extends Component {\n\n  state={\n    collapsed: false,\n  }\n\n\n\n  render(){\n    return (\n        <Provider store={store}>\n          <BrowserRouter>\n            <Layout/>\n          </BrowserRouter>\n        </Provider>\n    );\n  }\n\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as THREE from \"three\";\n\nimport Application from './common/sceneConfig/Application'\nimport SceneManager from './common/SceneManager'\n\nimport {set,get} from './common/utils/globalData'\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nset(\"EventDispatcher\", new THREE.EventDispatcher());\nset(\"Application\", new Application());\n\nset(\"sceneManager\", new SceneManager());\nget(\"sceneManager\").init();\n\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}