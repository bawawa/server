(this.webpackJsonprailway=this.webpackJsonprailway||[]).push([[0],{117:function(e){e.exports=JSON.parse('{"result":0,"pages":{"platform":{"id":0,"sceneConfig":{"poseOfCamera":{"position":{"x":13.945,"y":47.766,"z":212.604},"up":{"x":0,"y":1,"z":0},"lookat":{"x":0,"y":0,"z":0}},"poseOfModel":{"position":{"x":0,"y":0,"z":0},"rotation":{"x":0,"y":0,"z":0},"scale":{"x":0.05,"y":0.05,"z":0.05}},"model_list":["Train.glb"],"lightMapPath":["/source/textures/equirectangular/L_2048.jpg"],"triggers":{"actions":[{"triggerType":"single","triggerName":"1F_Camera_S_Pointer","funcName":"pop_video","param":{"id":0,"src":"/source/video/video_0.mp4"}},{"triggerType":"single","triggerName":"1F_Camera_N_Pointer","funcName":"pop_video","param":{"id":1,"src":"/source/video/video_1.mp4"}},{"triggerType":"single","triggerName":"1F_Camera_NS_Pointer","funcName":"pop_video","param":{"id":2,"src":"/source/video/video_2.mp4"}},{"triggerType":"single","triggerName":"2F_Camera_01_Pointer","funcName":"pop_video","param":{"id":3,"src":"/source/video/video_1.mp4"}}]},"animations":[{"type":"custom","name":"Half_N","param":{"startTime":0,"duration":1}},{"type":"custom","name":"Half_S","param":{"startTime":0,"duration":1}}]},"trainSchedule":{"startTime":"6:00","endTime":"22:43","interval":180}},"device_tvm":{"id":0,"sceneConfig":{"poseOfCamera":{"position":{"x":9.6,"y":40.627,"z":250.276},"up":{"x":0,"y":1,"z":0},"lookat":{"x":0.166,"y":40.627,"z":28.155}},"poseOfModel":{"position":{"x":0,"y":0,"z":0},"rotation":{"x":0,"y":-0.17,"z":0},"scale":{"x":2.5,"y":2.5,"z":2.5}},"model_list":["asm_GLB.glb"],"lightMapPath":[""],"Frame":{"colorMapFilePath":"/source/textures/device/Frame_mat_Base_Color.jpg","metallicMapFilePath":"/source/textures/device/Frame_mat_Metallic.jpg","roughnessMapFilePath":"/source/textures/device/Frame_mat_Roughness.jpg"},"Banknote_unit":{"colorMapFilePath":"/source/textures/device/Banknote_unit_mat_Base_Color.jpg","metallicMapFilePath":"/source/textures/device/Banknote_unit_mat_Metallic.jpg","roughnessMapFilePath":"/source/textures/device/Banknote_unit_mat_Roughness.jpg"},"coin_unit":{"colorMapFilePath":"/source/textures/device/coin_unit_mat_Base_Color.jpg","metallicMapFilePath":"/source/textures/device/coin_unit_mat_Metallic.jpg","roughnessMapFilePath":"/source/textures/device/coin_unit_mat_Roughness.jpg"},"Render_unit":{"colorMapFilePath":"/source/textures/device/Render_unit_mat_Base_Color.jpg","metallicMapFilePath":"/source/textures/device/Render_unit_mat_Metallic.jpg","roughnessMapFilePath":"/source/textures/device/Render_unit_mat_Roughness.jpg"},"Distribution_Unit":{"colorMapFilePath":"/source/textures/device/Distribution_Unit_mat_Base_Color.jpg","metallicMapFilePath":"/source/textures/device/Distribution_Unit_mat_Metallic.jpg","roughnessMapFilePath":"/source/textures/device/Distribution_Unit_mat_Roughness.jpg"},"UPS":{"colorMapFilePath":"/source/textures/device/UPS_mat_Base_Color.jpg","metallicMapFilePath":"/source/textures/device/UPS_mat_Metallic.jpg","roughnessMapFilePath":"/source/textures/device/UPS_mat_Roughness.jpg"},"triggers":{"actions":[{"triggerType":"single","triggerName":"N_SD_L","funcName":"pop_video","param":{"id":0,"src":"/source/video/video_0.mp4"}},{"triggerType":"single","triggerName":"N_SD_R","funcName":"pop_video","param":{"id":1,"src":"/source/video/video_1.mp4"}},{"triggerType":"single","triggerName":"S_SD_L","funcName":"pop_video","param":{"id":2,"src":"/source/video/video_0.mp4"}},{"triggerType":"single","triggerName":"S_SD_R","funcName":"pop_video","param":{"id":3,"src":"/source/video/video_1.mp4"}}]},"animations":[{"type":"custom","name":"N_SD_L|Take 001|BaseLayer","param":{"startTime":0,"duration":1}},{"type":"custom","name":"N_SD_R|Take 001|BaseLayer","param":{"startTime":0,"duration":1}},{"type":"custom","name":"S_SD_L|Take 001|BaseLayer","param":{"startTime":0,"duration":1}},{"type":"custom","name":"S_SD_R|Take 001|BaseLayer","param":{"startTime":0,"duration":1}}]},"trainSchedule":{"startTime":"6:00","endTime":"22:43","interval":180}}}}')},118:function(e,t,n){var a=n(1);a.OrbitControls=function(e,t){void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new a.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:a.MOUSE.ROTATE,MIDDLE:a.MOUSE.DOLLY,RIGHT:a.MOUSE.PAN},this.touches={ONE:a.TOUCH.ROTATE,TWO:a.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(o),n.update(),l=s.NONE},this.update=function(){var t=new a.Vector3,i=(new a.Quaternion).setFromUnitVectors(e.up,new a.Vector3(0,1,0)),r=i.clone().inverse(),f=new a.Vector3,v=new a.Quaternion;return function(){var e=n.object.position;return t.copy(e).sub(n.target),t.applyQuaternion(i),u.setFromVector3(t),n.autoRotate&&l===s.NONE&&x(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(u.theta+=d.theta*n.dampingFactor,u.phi+=d.phi*n.dampingFactor):(u.theta+=d.theta,u.phi+=d.phi),u.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=p,u.radius=Math.max(n.minDistance,Math.min(n.maxDistance,u.radius)),!0===n.enableDamping?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),t.setFromSpherical(u),t.applyQuaternion(r),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(d.theta*=1-n.dampingFactor,d.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(d.set(0,0,0),h.set(0,0,0)),p=1,!!(m||f.distanceToSquared(n.object.position)>c||8*(1-v.dot(n.object.quaternion))>c)&&(n.dispatchEvent(o),f.copy(n.object.position),v.copy(n.object.quaternion),m=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Y,!1),n.domElement.removeEventListener("mousedown",B,!1),n.domElement.removeEventListener("wheel",G,!1),n.domElement.removeEventListener("touchstart",W,!1),n.domElement.removeEventListener("touchend",K,!1),n.domElement.removeEventListener("touchmove",X,!1),document.removeEventListener("mousemove",H,!1),document.removeEventListener("mouseup",z,!1),n.domElement.removeEventListener("keydown",V,!1)};var n=this,o={type:"change"},i={type:"start"},r={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},l=s.NONE,c=1e-6,u=new a.Spherical,d=new a.Spherical,p=1,h=new a.Vector3,m=!1,f=new a.Vector2,v=new a.Vector2,g=new a.Vector2,y=new a.Vector2,b=new a.Vector2,M=new a.Vector2,A=new a.Vector2,T=new a.Vector2,E=new a.Vector2;function w(){return Math.pow(.95,n.zoomSpeed)}function x(e){d.theta-=e}function S(e){d.phi-=e}var O=function(){var e=new a.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),h.add(e)}}(),L=function(){var e=new a.Vector3;return function(t,a){!0===n.screenSpacePanning?e.setFromMatrixColumn(a,1):(e.setFromMatrixColumn(a,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),h.add(e)}}(),P=function(){var e=new a.Vector3;return function(t,a){var o=n.domElement;if(n.object.isPerspectiveCamera){var i=n.object.position;e.copy(i).sub(n.target);var r=e.length();r*=Math.tan(n.object.fov/2*Math.PI/180),O(2*t*r/o.clientHeight,n.object.matrix),L(2*a*r/o.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(O(t*(n.object.right-n.object.left)/n.object.zoom/o.clientWidth,n.object.matrix),L(a*(n.object.top-n.object.bottom)/n.object.zoom/o.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function _(e){n.object.isPerspectiveCamera?p/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function R(e){n.object.isPerspectiveCamera?p*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function C(e){f.set(e.clientX,e.clientY)}function k(e){y.set(e.clientX,e.clientY)}function N(e){if(1===e.touches.length)f.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);f.set(t,n)}}function j(e){if(1===e.touches.length)y.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(t,n)}}function F(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);A.set(0,a)}function U(e){if(1===e.touches.length)v.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);v.set(t,a)}g.subVectors(v,f).multiplyScalar(n.rotateSpeed);var o=n.domElement;x(2*Math.PI*g.x/o.clientHeight),S(2*Math.PI*g.y/o.clientHeight),f.copy(v)}function D(e){if(1===e.touches.length)b.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);b.set(t,a)}M.subVectors(b,y).multiplyScalar(n.panSpeed),P(M.x,M.y),y.copy(b)}function I(e){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+a*a);T.set(0,o),E.set(0,Math.pow(T.y/A.y,n.zoomSpeed)),_(E.y),A.copy(T)}function B(e){if(!1!==n.enabled){switch(e.preventDefault(),n.domElement.focus?n.domElement.focus():window.focus(),e.button){case 0:switch(n.mouseButtons.LEFT){case a.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;k(e),l=s.PAN}else{if(!1===n.enableRotate)return;C(e),l=s.ROTATE}break;case a.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;C(e),l=s.ROTATE}else{if(!1===n.enablePan)return;k(e),l=s.PAN}break;default:l=s.NONE}break;case 1:switch(n.mouseButtons.MIDDLE){case a.MOUSE.DOLLY:if(!1===n.enableZoom)return;!function(e){A.set(e.clientX,e.clientY)}(e),l=s.DOLLY;break;default:l=s.NONE}break;case 2:switch(n.mouseButtons.RIGHT){case a.MOUSE.ROTATE:if(!1===n.enableRotate)return;C(e),l=s.ROTATE;break;case a.MOUSE.PAN:if(!1===n.enablePan)return;k(e),l=s.PAN;break;default:l=s.NONE}}l!==s.NONE&&(document.addEventListener("mousemove",H,!1),document.addEventListener("mouseup",z,!1),n.dispatchEvent(i))}}function H(e){if(!1!==n.enabled)switch(e.preventDefault(),l){case s.ROTATE:if(!1===n.enableRotate)return;!function(e){v.set(e.clientX,e.clientY),g.subVectors(v,f).multiplyScalar(n.rotateSpeed);var t=n.domElement;x(2*Math.PI*g.x/t.clientHeight),S(2*Math.PI*g.y/t.clientHeight),f.copy(v),n.update()}(e);break;case s.DOLLY:if(!1===n.enableZoom)return;!function(e){T.set(e.clientX,e.clientY),E.subVectors(T,A),E.y>0?_(w()):E.y<0&&R(w()),A.copy(T),n.update()}(e);break;case s.PAN:if(!1===n.enablePan)return;!function(e){b.set(e.clientX,e.clientY),M.subVectors(b,y).multiplyScalar(n.panSpeed),P(M.x,M.y),y.copy(b),n.update()}(e)}}function z(e){!1!==n.enabled&&(document.removeEventListener("mousemove",H,!1),document.removeEventListener("mouseup",z,!1),n.dispatchEvent(r),l=s.NONE)}function G(e){!1===n.enabled||!1===n.enableZoom||l!==s.NONE&&l!==s.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(i),function(e){e.deltaY<0?R(w()):e.deltaY>0&&_(w()),n.update()}(e),n.dispatchEvent(r))}function V(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&function(e){var t=!1;switch(e.keyCode){case n.keys.UP:P(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:P(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:P(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:P(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function W(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(n.touches.ONE){case a.TOUCH.ROTATE:if(!1===n.enableRotate)return;N(e),l=s.TOUCH_ROTATE;break;case a.TOUCH.PAN:if(!1===n.enablePan)return;j(e),l=s.TOUCH_PAN;break;default:l=s.NONE}break;case 2:switch(n.touches.TWO){case a.TOUCH.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&F(e),n.enablePan&&j(e)}(e),l=s.TOUCH_DOLLY_PAN;break;case a.TOUCH.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&F(e),n.enableRotate&&N(e)}(e),l=s.TOUCH_DOLLY_ROTATE;break;default:l=s.NONE}break;default:l=s.NONE}l!==s.NONE&&n.dispatchEvent(i)}}function X(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),l){case s.TOUCH_ROTATE:if(!1===n.enableRotate)return;U(e),n.update();break;case s.TOUCH_PAN:if(!1===n.enablePan)return;D(e),n.update();break;case s.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&I(e),n.enablePan&&D(e)}(e),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&I(e),n.enableRotate&&U(e)}(e),n.update();break;default:l=s.NONE}}function K(e){!1!==n.enabled&&(n.dispatchEvent(r),l=s.NONE)}function Y(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("contextmenu",Y,!1),n.domElement.addEventListener("mousedown",B,!1),n.domElement.addEventListener("wheel",G,!1),n.domElement.addEventListener("touchstart",W,!1),n.domElement.addEventListener("touchend",K,!1),n.domElement.addEventListener("touchmove",X,!1),n.domElement.addEventListener("keydown",V,!1),-1===n.domElement.tabIndex&&(n.domElement.tabIndex=0),this.update()},a.OrbitControls.prototype=Object.create(a.EventDispatcher.prototype),a.OrbitControls.prototype.constructor=a.OrbitControls,a.MapControls=function(e,t){a.OrbitControls.call(this,e,t),this.mouseButtons.LEFT=a.MOUSE.PAN,this.mouseButtons.RIGHT=a.MOUSE.ROTATE,this.touches.ONE=a.TOUCH.PAN,this.touches.TWO=a.TOUCH.DOLLY_ROTATE},a.MapControls.prototype=Object.create(a.EventDispatcher.prototype),a.MapControls.prototype.constructor=a.MapControls,e.exports=t.default=a.OrbitControls},138:function(e,t,n){e.exports=n(236)},161:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){},168:function(e,t,n){e.exports=n.p+"static/media/bg-act-tall.dba53272.png"},169:function(e,t,n){e.exports=n.p+"static/media/bg-tall.f1b7c890.png"},170:function(e,t,n){},171:function(e,t,n){},172:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAdCAYAAABIWle8AAACEklEQVRIS52WTYiOURTHf39fkyKRqVGSMkn5CM2UHbHQxGomC3asrBCy0LwbxmoGzUo27NhgRxJip8RbPkq+Qkr5SKEkH0dnep6n+77d+zzP+57dfc7//O557j333CsiZmaLgV3ANqAfWAh8Bl4CV4ELkt63hyr8YGY9wChwCJgdmyj79hM4CYxJ+pXrCpiZLchm3VACaXfdA7ZL+uKOKZiZTQduAJs7AOXS28BWSX9y2DGg0QUoD/HfbcjM+oDXFWtUNY+v4TKH7QMmq9Q1/PsddhPYkhD/BiaAO8Am4DAwM6G95bC3wJKEYFTSidxnZkeBYtwW89FhXiezErA1kh4HsNXAo4TWHPYNmJsQ7JB0KYCNAMW4Lea7wx4A6xOwN8CwpKaZrQOuAEsT2qbDTgMHKnbrKzC/QjPpsAHgfo2tr5IM5ifgGjBUpS7xX5c0lMNWAU1gRhfAv8BaSU/CrnEG2NsF7KykqbgQ1gu8AOZ1APSy6pf0qQWWtSI/LuMdwI5IKvSxTvvUO0AN4CtgZbTTBlU+DFyuARuR5EVcWEtmAdC7xMYS4F1J3kVaLAXz4+WFPC0C/AcMSnpYC5ZtxjlgdwR2XtKeWNbRzDLYIuA5MCcI/AEsl/ShI1gG9Dv0eBDYkDSWWstkZhnML+JnWSd+B6yQ5JdH1EphGXCnPwf8uSDpYlnJ1IG55hRwUJKVwf4DxeG0sU2T1x8AAAAASUVORK5CYII="},173:function(e,t,n){e.exports=n.p+"static/media/infoBG.6ef15b48.png"},174:function(e,t,n){},175:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAvCAYAAABzJ5OsAAAHVklEQVRoQ81afYwcZRn//d7dI5DSO40ilGCMidqi0p58hJQYLXfd2fYMsLN4bWmINi2ckQBNS4pIb7dzu0dRVNA2RGgLlj9K27vrziGmdOda2mhSNFqhtdoWmhAUDZAYvVZC1d15zLvn7c3OzexX77Tz57zzPM/v+Xyf93mHOM/Hsiz1yjG0u6IWQNhOurMBXgVgBoA2AKMA3gfkbRF1SikcBYoH58/Fa5Zluecjns0Sx5PWteJyBcilAD7WBJ/3ILKbSrbnc9Zvm6BHw+Djyb6bRZgCcHMzAkNoDpKSzec2HGyEZ93gu5L9nyjA3QzBLY0IaOhb4sUo1H17c71v1UNXF/iY2ddNcBuA1hpMTxA8DsgbAM+IyN9IfhiQVoCfdiGfI/DZqjzIUbrSkx9OD9RSoCr47u6ByOi/TzwB8r4QRgLBAQF2tLS4+/YOWu/UEtjVbV1RKKguAF8D8CUgNHQ3tUXnrB0cXFIM4xkKvrvbumi0oHYA+GoAsRAcAuSRvJ0+Wgtw2HrczMwTIgXB7UHfEBxsjRbvHBy0/hW8HvB2zOKndoCiK0nlQ5xmESvzL6R/0SxoP10s0ddJxacg+NRkcRxojc5eHuSBQMsbib5NIaEyFDnnrnrpJevMVAEf57Nw4bfa1MwZOq+CPL3JsdOrJyvmexNPZJYIsdv/oYj8YGQ4vQ6gTDXwCX6WiiX4GMkHfO4W0L3DyW2owFVh+cVJ66qiqN8HVJXvOHb629MHuoIzDTOzEcBDlW85iiKvcV7o/dP4+wrwRjIz5E8enTR5u3fp9FrcbxZLxUy1k8ASnwJDTi7VPQn8okR2gUup3OGI05EP3OumI8ZrebGUA60zflOZxBQl6Ng3nDqk6cuWj5uZ/QJ0+mKt07FTL/sFLVhhXXzRGbUeghtJ7M3nUj9qzDPCeDK7WgRdJH/5z9bixkPbrXN+OYZpdQDqgPc9yf35XCpWBh+7vf96uu6vfcRDjp0uu8i7ZpiZR70xSWBb3k711KeApYxkZAtEVpV5ko86udTDAd7Q8a93Wm8F0hvjDc5w+kjJ8gGlUQh8IWwDMsyMtkaHLx6fcXK9d1dXIAD4mPsP5O30wqBQiiWsdlLprtObn6XSSd2PHz6q9LZ+2TixAIdG7HRo12iY2TWAPD5JGFlFgWDgWllS1uZz6R+G5AFjZuZlAgs86+/dNM+dxVJfLuqIj3CVY6efDU8qoZHs31rh+nIJCFIgDLi2ZzWFx5gaprUSUM948AjpXq8T5wER+b4XaDTqzqrdZNWrwPkB17jiyYdniVz854nQ0d7COhqJzA4Qyz3gTzh2unrbWv64ugI3zS32HD7mS86qHgr1tU5cvXle7fliFw0zewSQaz3xPjBipyc3ZKF8qymA04HNFtW2fG59ndWpJFjH/S7vpkXBq1ojnayXlw0CbMzb6fXh8R60ItoIuqlaWYuOjQMvgTfMvixAL66/aPC6V26ZEMoHHTv1vVogJq/XVqBJ4CVRsUTmQRLf9cg9q8FXdonCe5zh1I8bBw+Uyu4xdSq4L8fr8+e5Vzc77jBuy9wDhSe9uKbU8nEzu0WAu8IUJ7g1b/d+o76duJJLmOWnJOZrAZ/IqaYUCIv58682ocAZUm0a90BwtYmb2ecFckezdb6KxZ9ti/6uZ7RwzZagKtRgCIXW+XWAPNbMDlsNuGOn7hqLbUsZptoaqECdZTNohxWRh7jIzMx3gcMVWQxZmbc3/CS84gjDQ6Wx3qae8jm5t6HA5RepxxxnCiffEeCjnl22alcZS2RXkzK5C2yyqxTBmpFhfaAJfAK7yrbonCtLPXIsmdlMwb0eUlHKbd+3xzoWxO5/2c/HzdQ8Qcurgf18CfwFfJKKm9ndAvGe6CpPUlqBIGuS0hE0dp7f/fglrYV/9ApwgwD7RuzUE41tPMKYmV1DYBGIX52NXLrxlcG1H/i9/N8z7H6v1b2nrvLR6kKbHixebLUWL1FH/NMD0u0cN2jF3CZmZvYQSHotIMDAiJ1a1phlm+mMvDRhcxvscXLp8mG8cuh0W//HodzjF+rEzI0U5u4f7PvjRKvhM5KR7FsK4S6/7f7vs0rIcsdOV+BqaEqsQyh6zr17OiZoekIWmXnpVl9lGbMhudnJpe73GzQQ/NjGdWpnMCOcJqSn0cuvallQqipUTwedA0AOtUVmL6t7Pq8F1bgZgR7ATsnNCNAbMpMvyWj4ZmTcSnXdSQE/J+S5QjG698BP179bq8503vrI5dFIoUvAr0/bnZQXhGFmlgF4utZtoAB/AHCcxOvi4iyBvwvwISrMFMFnAHy+nttAcd1vjgxv2FnLEHVdZZZ24Fuyn5SobCbwlVpMm1/nz1DA/c6LqTfr4VE3+HFmhpntAETH6ZTegAPsDxqnV1OiYfBlJRKZ60RhBQX6FPaReizl++avQuyki+16XN0EfeP/HviFjCX1yXYhvqz/+gBlDoHxvz70jbm+OXxfgLchPKn/+hBXDrW1zHmt2gVxPcr8B7pDmGj64hc6AAAAAElFTkSuQmCC"},176:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAABEVBMVEUAAAAA//9Vqv9Jkv9An/8uov87nf8zmf9An/83pP81nv84n/85o/83n/82of86ov85n/83of88nf83oP84ov86of84oP87of84of87n/86oP85oP86n/85oP85of84n/85oP85n/85oP84of84oP86n/85oP84oP85oP85oP85n/84oP86of84n/86oP85oP85oP85oP84oP86n/85oP85oP85of85oP85oP85of84oP85n/85oP85oP85oP85oP85of85oP85oP85oP85oP85oP85oP86oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP85oP8/M/OtAAAAWnRSTlMAAQMHCAsNDxAcHSAkJSYsLS4vMzc5O0FJSktZZWZnaHR4eXp7gIuMjo+QkZKVlpmcpqeou7y9wcTFx8jJzc7P2Nvc3d7f4eLj5OXo7O3u7/Dy8/T19/n6/P21GvUAAAABuElEQVRIx62WbV8BQRTFz7J6RAmVjZ4flFBRWqRCpWJLEe73/yC9UKzdmdlZdV75rfnv7+6dmXMPYFcwns7X20Ttej4dD0JCy8lHmtBjMiQmlJhODOmawmfCReKoGOYg6vGAuBqkVBYTuCWhbgN2JtoiB7WiVma9Q47qrE8yEQmGqBMxM/4mSall+i5vhSRV8Y6gFEkrNdrTvjzU/9llpUwuVByeKM32R27Rt8FtpwYAuLY+PlMAbPMgHQBCTAar3AJXABwyGcS50BGAZybjf+VCDWCJzTQEDQxi0zVDCWRdM5RGwTVDl3iwMdASdh1Ux+vqaI9+33hERjV7P1r4gfEL9sX2tjteaYL2ZKEvU3m1OcnymuZG3C38eDmjETumRtQmWl4dUp4LccsLk5tbk6Ky2CLXVMJ6YH+pc+GBxQubyomuBo6ISfkM0SVcITZVFF136Exq5l1kLAwLq0eU+bzYwlhm+ckdimVleluebgBAlR81pnEdMOSYt+BfxycQ6zoz3Zj1Zq45Vmis/U/4ANQTUcw5VXmBqsRjSmFBdNPcRzdmSHxyCom/Fpa5rBq9nlG9yiRYcfQbUICBz3KWObkAAAAASUVORK5CYII="},235:function(e,t,n){},236:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"test",(function(){return re}));var o=n(0),i=n.n(o),r=n(6),s=n.n(r),l=n(1),c=n(3),u=n(4),d=n(72),p=n.n(d);p.a.defaults.timeout=1e4,p.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8";var h=p.a,m=n(10),f=n(51),v=n(5),g=n(34),y=n(9),b=n(12),M=n.n(b),A=function(){function e(t){Object(c.a)(this,e),this.sceneName=void 0,this.config=t,this.mixer=void 0;var n=t.sceneConfig.poseOfCamera;this.positionOfCamera=new l.Vector3(n.position.x,n.position.y,n.position.z),this.upOfCamera=new l.Vector3(n.up.x,n.up.y,n.up.z),this.lookatOfCamera=new l.Vector3(n.lookat.x,n.lookat.y,n.lookat.z);var a=t.sceneConfig.poseOfModel;this.positionOfModel=new l.Vector3(a.position.x,a.position.y,a.position.z),this.rotationOfModel=new l.Vector3(a.rotation.x,a.rotation.y,a.rotation.z),this.scaleOfModel=new l.Vector3(a.scale.x,a.scale.y,a.scale.z)}return Object(u.a)(e,[{key:"setup",value:function(){M.a.subscribe(this.sceneName+"animate",this.animate.bind(this)),M.a.subscribe(this.sceneName+"loaded",this.doWhenModelIsLoaded.bind(this)),M.a.subscribe(this.sceneName+"loadedFromCache",this.doWhenModelLoadedFromCache.bind(this))}},{key:"destory",value:function(){M.a.unsubscribe(this.sceneName+"animate"),M.a.unsubscribe(this.sceneName+"loaded")}},{key:"doWhenModelIsLoaded",value:function(e,t){}},{key:"doWhenModelLoadedFromCache",value:function(e,t){}},{key:"animate",value:function(e,t){null!==t.delta&&void 0!==t.delta&&(e.isLoaded?this.animateWhenModelLoaded(t.delta):this.animateWhenModelUnLoaded(t.delta))}},{key:"animateWhenModelUnLoaded",value:function(e){}},{key:"animateWhenModelLoaded",value:function(e){}},{key:"modelFilePath",value:function(){return"plugin/source/models/glb/"}},{key:"modelFileName",value:function(){return this.config.sceneConfig.model_list.count<=0&&console.log("model file count is 0 in config.json file"),this.config.sceneConfig.model_list[0]}},{key:"bgFilePath",value:function(){return"/source/textures/equirectangular/"}},{key:"bgFileName",value:function(){return"royal_esplanade_1k.hdr"}},{key:"lightMapPath",value:function(){return this.config.sceneConfig.lightMapPath.count<=0&&console.log("model file count is 0 in config.json file"),this.config.sceneConfig.lightMapPath[0]}},{key:"colorMapFilePath",value:function(){return null!==this.config.sceneConfig.colorMapFilePath?this.config.sceneConfig.Frame.colorMapFilePath:""}},{key:"metallicMapFilePath",value:function(){return null!==this.config.sceneConfig.metallicMapFilePath?this.config.sceneConfig.Frame.metallicMapFilePath:""}},{key:"roughnessMapFilePath",value:function(){return null!==this.config.sceneConfig.roughnessMapFilePath?this.config.sceneConfig.Frame.roughnessMapFilePath:""}}]),e}();A.path="baseScene";var T=A,E="Auto",w="single",x="Double",S=function(){function e(t){Object(c.a)(this,e),this.sceneName=void 0,this.triggerName=t.triggerName,this.triggerType=t.triggerType,this.funcName=t.funcName,this.param=t.param,this.node=void 0,this.scene=void 0}return Object(u.a)(e,[{key:"setup",value:function(){M.a.subscribe(this.sceneName+"pick",this.doWhenModelPicked.bind(this)),M.a.subscribe(this.sceneName+"loaded",this.doWhenModelIsLoaded.bind(this))}},{key:"destory",value:function(){M.a.unsubscribe(this.sceneName+"pick"),M.a.unsubscribe(this.sceneName+"loaded")}},{key:"doWhenModelIsLoaded",value:function(e,t){void 0!==this.triggerName&&(this.node=void 0),void 0!==this.node&&this.triggerType===E&&this.doWhenAutoExecute()}},{key:"doWhenModelPicked",value:function(e,t){if(t.name instanceof String)console.log("pick name error :: "+t.name);else if(t.type instanceof String)console.log("pick type error");else if(t.name===this.triggerName&&t.type===this.triggerType)switch(this.triggerType){case w:this.doWhenSingleClick(t);break;case x:this.doWhenDoubleClick(t);break;default:console.log("\u4f4d\u7f6e\u7684triggerType:: "+this.triggerType)}}},{key:"doWhenAutoExecute",value:function(e){}},{key:"doWhenSingleClick",value:function(e){}},{key:"doWhenDoubleClick",value:function(e){}}]),e}();S.path="BaseAction";var O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e))).sceneName=F.path,n.setup(),n}return Object(y.a)(t,e),Object(u.a)(t,[{key:"doWhenSingleClick",value:function(e){Object(g.a)(Object(v.a)(t.prototype),"doWhenSingleClick",this).call(this,e),this.funcName===this.pop_video.name?this.pop_video(this.param):console.log("There is no funcation name of "+this.funcName)}},{key:"pop_video",value:function(e){var t=e.id,n=e.src||"";M.a.publish(F.path+"pop_video",{id:t,src:n})}}]),t}(S);O.path="PlatformAction";var L=O,P={sceneManager:null,Application:null,EventDispatcher:null},_=function(e){return P[e]},R=function(e,t){P[e]=t},C="auto",k="custom",N=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e))).sceneName=F.path,n.action_Half_N=void 0,n.action_Half_S=void 0,n.node_Half_N=void 0,n.node_Half_S=void 0,n.time=60,n.timeOfAnimation=23.67,n.timeMax=n.time,n.timeWillEnter=10,n.setup(),n}return Object(y.a)(t,e),Object(u.a)(t,[{key:"doWhenModelLoaded",value:function(e,n){Object(g.a)(Object(v.a)(t.prototype),"doWhenModelLoaded",this).call(this,e,n),this.node_Half_N=this.scene.getObjectByName("North_Tr_Dummy"),this.node_Half_N.visible=!1,this.node_Half_S=this.scene.getObjectByName("South_Tr_Dummy"),this.node_Half_S.visible=!1,this.play()}},{key:"paserWhenCustom",value:function(e,t){console.log("");var n=e.name,a=t.action;"Half_N"===n?(a.setLoop(l.LoopOnce),this.action_Half_N=a):"Half_S"===n&&(a.setLoop(l.LoopOnce),this.action_Half_S=a)}},{key:"updateWhenModelLoaded",value:function(e){this.time>=0?this.time=this.time-e:(this.play(),this.time=this.timeMax);var t="";this.time<=this.timeMax&&this.time>this.timeMax-this.timeOfAnimation?t+="\u5df2\u8fdb\u7ad9":this.time<=this.timeWillEnter?t+="\u5373\u5c06\u8fdb\u7ad9":t+="\u7b49\u5f85"+Math.ceil(this.time/60)+"\u5206\u949f";var n=Math.ceil((this.timeMax+this.time)/60);M.a.publish(F.path+"report",{current:t,next:n})}},{key:"play",value:function(){this.node_Half_S.visible=!0,this.playActionOnce(this.action_Half_S)}},{key:"finished",value:function(e){e.action===this.action_Half_S?(this.node_Half_S.visible=!1,this.node_Half_N.visible=!0,this.playActionOnce(this.action_Half_N)):e.action===this.action_Half_N&&(this.node_Half_N.visible=!1)}},{key:"playActionOnce",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];void 0!==e?(e.reset(),e.setLoop(l.LoopOnce,void 0),e.play()):console.log("action is undefined")}},{key:"playActionRepeat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;void 0!==e?(e.setLoop(l.LoopRepeat,1/0),e.startAt(t),e.play()):console.log("action is undefined")}}]),t}(function(){function e(t){Object(c.a)(this,e),this.config=t,this.sceneName=void 0,this.clipsAndActions=[],this.scene=void 0}return Object(u.a)(e,[{key:"doWhenModelLoaded",value:function(e,t){var n=_("sceneManager");this.scene=n.currentGltf.scene;var a=this,o=this.config;o instanceof Array&&o.forEach((function(e,t){a.parser(e)})),this.mixer=n.mixer,this.mixer.addEventListener("loop",(function(e){a.loop(e)})),this.mixer.addEventListener("finished",(function(e){console.log("\u5e27\u52a8\u753b\u7ed3\u675f\u56de\u8c03\uff1a",e),a.finished(e)}))}},{key:"paserWhenCustom",value:function(e,t){}},{key:"animate",value:function(e,t){null!==t.delta&&void 0!==t.delta?t.isLoaded?this.updateWhenModelLoaded(t.delta):this.updateWhenModelUnLoaded(t.delta):console.log("BaseAniamtion.animate delta is null or undefined")}},{key:"updateWhenModelLoaded",value:function(e){}},{key:"updateWhenModelUnLoaded",value:function(e){}},{key:"setup",value:function(){void 0===this.sceneName&&console.error("BaseAnimation.sceneName is undefined"),M.a.subscribe(this.sceneName+"loaded",this.doWhenModelLoaded.bind(this)),M.a.subscribe(this.sceneName+"animate",this.animate.bind(this))}},{key:"parser",value:function(e){var t=_("sceneManager").getAnimationClipAndActionBy(e.name);void 0!==t&&void 0!==t.action&&(t.action.stop(),e.type===C?t.action.play():e.type===k?this.paserWhenCustom(e,t):console.log("unknow AnimationsType :: "+e.type))}},{key:"play",value:function(){}},{key:"finished",value:function(e){}},{key:"loop",value:function(e){}}]),e}()),j=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e))).sceneName=t.path,n.platformActions=[];var a=Object(f.a)(n),o=e.sceneConfig.triggers.actions;return o instanceof Array&&o.forEach((function(e,t){var n=new L(e);a.platformActions.push(n)})),n.sceneAniamtion=new N(n.config.sceneConfig.animations),n.setup(),n}return Object(y.a)(t,e),Object(u.a)(t,[{key:"doWhenModelIsLoaded",value:function(e,n){Object(g.a)(Object(v.a)(t.prototype),"doWhenModelIsLoaded",this).call(this,e,n)}},{key:"animate",value:function(e,t){}},{key:"animateWhenModelLoaded",value:function(e){}},{key:"animateWhenModelUnLoaded",value:function(e){}}]),t}(T);j.path="platform.";var F=j,U=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e))).sceneName=t.path,n.setup(),n}return Object(y.a)(t,e),Object(u.a)(t,[{key:"doWhenModelIsLoaded",value:function(e,n){Object(g.a)(Object(v.a)(t.prototype),"doWhenModelIsLoaded",this).call(this,e,n);var a=_("sceneManager");a.animateCamera(a.camera.position,a.controls.position0,{x:.12,y:.58627,z:5.5},{x:0,y:0,z:1},{x:0,y:0,z:0}),a.hideUnitWithOut("frame_unit")}},{key:"doWhenModelLoadedFromCache",value:function(e,t){var n=_("sceneManager");n.animateCamera(n.camera.position,n.controls.position0,{x:.12,y:.58627,z:5.5},{x:0,y:0,z:1},{x:0,y:0,z:0}),n.hideUnitWithOut("frame_unit")}},{key:"animateWhenModelLoaded",value:function(e){}},{key:"animateWhenModelUnLoaded",value:function(e){}}]),t}(T);U.path="deviceTVM.";var D=U,I=n(117),B=function(){function e(){Object(c.a)(this,e),this.sceneModels=[],this.config=void 0,this.platform=void 0,this.deviceTVM=void 0,this.configParser(),M.a.immediateExceptions=!0}return Object(u.a)(e,[{key:"configParser",value:function(){this.config=I.pages,this.parser(this.config),console.log("config.json \u89e3\u6790\u6210\u529f\uff1a\uff1a\n"+this.config)}},{key:"parser",value:function(e){var t=new F(e.platform),n=new D(e.device_tvm);this.platform=t,this.deviceTVM=n,this.sceneModels.push(this.platform,this.deviceTVM)}}]),e}();B.path="application";var H=B,z=function(){function e(e){l.Loader.call(this,e),this.dracoLoader=null,this.ddsLoader=null}function t(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype=Object.assign(Object.create(l.Loader.prototype),{constructor:e,load:function(e,t,n,a){var o,i=this;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:l.LoaderUtils.extractUrlBase(e),i.manager.itemStart(e);var r=function(t){a?a(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},s=new l.FileLoader(i.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),"use-credentials"===i.crossOrigin&&s.setWithCredentials(!0),s.load(e,(function(n){try{i.parse(n,o,(function(n){t(n),i.manager.itemEnd(e)}),r)}catch(a){r(a)}}),n,r)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},parse:function(e,t,s,c){var h,v={};if("string"===typeof e)h=e;else if(l.LoaderUtils.decodeText(new Uint8Array(e,0,4))===r){try{v[n.KHR_BINARY_GLTF]=new u(e)}catch(A){return void(c&&c(A))}h=v[n.KHR_BINARY_GLTF].content}else h=l.LoaderUtils.decodeText(new Uint8Array(e));var g=JSON.parse(h);if(void 0===g.asset||g.asset.version[0]<2)c&&c(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(g.extensionsUsed)for(var y=0;y<g.extensionsUsed.length;++y){var b=g.extensionsUsed[y],M=g.extensionsRequired||[];switch(b){case n.KHR_LIGHTS_PUNCTUAL:v[b]=new o(g);break;case n.KHR_MATERIALS_UNLIT:v[b]=new i;break;case n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:v[b]=new m;break;case n.KHR_DRACO_MESH_COMPRESSION:v[b]=new d(g,this.dracoLoader);break;case n.MSFT_TEXTURE_DDS:v[b]=new a(this.ddsLoader);break;case n.KHR_TEXTURE_TRANSFORM:v[b]=new p;break;case n.KHR_MESH_QUANTIZATION:v[b]=new f;break;default:M.indexOf(b)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+b+'".')}}new B(g,v,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(s,c)}}});var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function a(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=n.MSFT_TEXTURE_DDS,this.ddsLoader=e}function o(e){this.name=n.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[n.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function i(){this.name=n.KHR_MATERIALS_UNLIT}o.prototype.loadLight=function(e){var t,n=this.lightDefs[e],a=new l.Color(16777215);void 0!==n.color&&a.fromArray(n.color);var o=void 0!==n.range?n.range:0;switch(n.type){case"directional":(t=new l.DirectionalLight(a)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new l.PointLight(a)).distance=o;break;case"spot":(t=new l.SpotLight(a)).distance=o,n.spot=n.spot||{},n.spot.innerConeAngle=void 0!==n.spot.innerConeAngle?n.spot.innerConeAngle:0,n.spot.outerConeAngle=void 0!==n.spot.outerConeAngle?n.spot.outerConeAngle:Math.PI/4,t.angle=n.spot.outerConeAngle,t.penumbra=1-n.spot.innerConeAngle/n.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+n.type+'".')}return t.position.set(0,0,0),t.decay=2,void 0!==n.intensity&&(t.intensity=n.intensity),t.name=n.name||"light_"+e,Promise.resolve(t)},i.prototype.getMaterialType=function(){return l.MeshBasicMaterial},i.prototype.extendParams=function(e,t,n){var a=[];e.color=new l.Color(1,1,1),e.opacity=1;var o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){var i=o.baseColorFactor;e.color.fromArray(i),e.opacity=i[3]}void 0!==o.baseColorTexture&&a.push(n.assignTexture(e,"map",o.baseColorTexture))}return Promise.all(a)};var r="glTF",s=1313821514,c=5130562;function u(e){this.name=n.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,12);if(this.header={magic:l.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==r)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var a=new DataView(e,12),o=0;o<a.byteLength;){var i=a.getUint32(o,!0);o+=4;var u=a.getUint32(o,!0);if(o+=4,u===s){var d=new Uint8Array(e,12+o,i);this.content=l.LoaderUtils.decodeText(d)}else if(u===c){var p=12+o;this.body=e.slice(p,p+i)}o+=i}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function d(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=n.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}function p(){this.name=n.KHR_TEXTURE_TRANSFORM}function h(e){l.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),a=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),o=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),i=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),r={specular:{value:(new l.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=r,this.onBeforeCompile=function(e){for(var s in r)e.uniforms[s]=r[s];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),e.fragmentShader=e.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),e.fragmentShader=e.fragmentShader.replace("#include <roughnessmap_pars_fragment>",t),e.fragmentShader=e.fragmentShader.replace("#include <metalnessmap_pars_fragment>",n),e.fragmentShader=e.fragmentShader.replace("#include <roughnessmap_fragment>",a),e.fragmentShader=e.fragmentShader.replace("#include <metalnessmap_fragment>",o),e.fragmentShader=e.fragmentShader.replace("#include <lights_physical_fragment>",i)},Object.defineProperties(this,{specular:{get:function(){return r.specular.value},set:function(e){r.specular.value=e}},specularMap:{get:function(){return r.specularMap.value},set:function(e){r.specularMap.value=e}},glossiness:{get:function(){return r.glossiness.value},set:function(e){r.glossiness.value=e}},glossinessMap:{get:function(){return r.glossinessMap.value},set:function(e){r.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}function m(){return{name:n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return h},extendParams:function(e,t,n){var a=t.extensions[this.name];e.color=new l.Color(1,1,1),e.opacity=1;var o=[];if(Array.isArray(a.diffuseFactor)){var i=a.diffuseFactor;e.color.fromArray(i),e.opacity=i[3]}if(void 0!==a.diffuseTexture&&o.push(n.assignTexture(e,"map",a.diffuseTexture)),e.emissive=new l.Color(0,0,0),e.glossiness=void 0!==a.glossinessFactor?a.glossinessFactor:1,e.specular=new l.Color(1,1,1),Array.isArray(a.specularFactor)&&e.specular.fromArray(a.specularFactor),void 0!==a.specularGlossinessTexture){var r=a.specularGlossinessTexture;o.push(n.assignTexture(e,"glossinessMap",r)),o.push(n.assignTexture(e,"specularMap",r))}return Promise.all(o)},createMaterial:function(e){var t=new h(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=l.TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}}function f(){this.name=n.KHR_MESH_QUANTIZATION}function v(e,t,n,a){l.Interpolant.call(this,e,t,n,a)}d.prototype.decodePrimitive=function(e,t){var n=this.json,a=this.dracoLoader,o=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,r={},s={},l={};for(var c in i){var u=L[c]||c.toLowerCase();r[u]=i[c]}for(c in e.attributes){u=L[c]||c.toLowerCase();if(void 0!==i[c]){var d=n.accessors[e.attributes[c]],p=w[d.componentType];l[u]=p,s[u]=!0===d.normalized}}return t.getDependency("bufferView",o).then((function(e){return new Promise((function(t){a.decodeDracoFile(e,(function(e){for(var n in e.attributes){var a=e.attributes[n],o=s[n];void 0!==o&&(a.normalized=o)}t(e)}),r,l)}))}))},p.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},h.prototype=Object.create(l.MeshStandardMaterial.prototype),h.prototype.constructor=h,h.prototype.copy=function(e){return l.MeshStandardMaterial.prototype.copy.call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},v.prototype=Object.create(l.Interpolant.prototype),v.prototype.constructor=v,v.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,a=this.valueSize,o=e*a*3+a,i=0;i!==a;i++)t[i]=n[o+i];return t},v.prototype.beforeStart_=v.prototype.copySampleValue_,v.prototype.afterEnd_=v.prototype.copySampleValue_,v.prototype.interpolate_=function(e,t,n,a){for(var o=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=2*r,l=3*r,c=a-t,u=(n-t)/c,d=u*u,p=d*u,h=e*l,m=h-l,f=-2*p+3*d,v=p-d,g=1-f,y=v-d+u,b=0;b!==r;b++){var M=i[m+b+r],A=i[m+b+s]*c,T=i[h+b+r],E=i[h+b]*c;o[b]=g*M+y*A+f*T+v*E}return o};var g=0,y=1,b=2,M=3,A=4,T=5,E=6,w={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},x={9728:l.NearestFilter,9729:l.LinearFilter,9984:l.NearestMipmapNearestFilter,9985:l.LinearMipmapNearestFilter,9986:l.NearestMipmapLinearFilter,9987:l.LinearMipmapLinearFilter},S={33071:l.ClampToEdgeWrapping,33648:l.MirroredRepeatWrapping,10497:l.RepeatWrapping},O={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},L={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},P={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},_={CUBICSPLINE:void 0,LINEAR:l.InterpolateLinear,STEP:l.InterpolateDiscrete},R="MASK",C="BLEND",k={"image/png":l.RGBAFormat,"image/jpeg":l.RGBFormat};function N(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e)}function j(e,t,n){for(var a in n.extensions)void 0===e[a]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[a]=n.extensions[a])}function F(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function U(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,a=t.weights.length;n<a;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var o=t.extras.targetNames;if(e.morphTargetInfluences.length===o.length){e.morphTargetDictionary={};for(n=0,a=o.length;n<a;n++)e.morphTargetDictionary[o[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function D(e){var t=e.extensions&&e.extensions[n.KHR_DRACO_MESH_COMPRESSION];return t?"draco:"+t.bufferView+":"+t.indices+":"+I(t.attributes):e.indices+":"+I(e.attributes)+":"+e.mode}function I(e){for(var t="",n=Object.keys(e).sort(),a=0,o=n.length;a<o;a++)t+=n[a]+":"+e[n[a]]+";";return t}function B(e,n,a){this.json=e||{},this.extensions=n||{},this.options=a||{},this.cache=new t,this.primitiveCache={},this.textureLoader=new l.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new l.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function H(e,t,n){var a=t.attributes,o=[];function i(t,a){return n.getDependency("accessor",t).then((function(t){e.setAttribute(a,t)}))}for(var r in a){var s=L[r]||r.toLowerCase();s in e.attributes||o.push(i(a[r],s))}if(void 0!==t.indices&&!e.index){var c=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));o.push(c)}return F(e,t),function(e,t,n){var a=t.attributes,o=new l.Box3;if(void 0!==a.POSITION){var i=(h=n.json.accessors[a.POSITION]).min,r=h.max;if(void 0!==i&&void 0!==r){o.set(new l.Vector3(i[0],i[1],i[2]),new l.Vector3(r[0],r[1],r[2]));var s=t.targets;if(void 0!==s)for(var c=new l.Vector3,u=0,d=s.length;u<d;u++){var p=s[u];if(void 0!==p.POSITION){var h;i=(h=n.json.accessors[p.POSITION]).min,r=h.max;void 0!==i&&void 0!==r?(c.setX(Math.max(Math.abs(i[0]),Math.abs(r[0]))),c.setY(Math.max(Math.abs(i[1]),Math.abs(r[1]))),c.setZ(Math.max(Math.abs(i[2]),Math.abs(r[2]))),o.expandByVector(c)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}e.boundingBox=o;var m=new l.Sphere;o.getCenter(m.center),m.radius=o.min.distanceTo(o.max)/2,e.boundingSphere=m}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(o).then((function(){return void 0!==t.targets?function(e,t,n){for(var a=!1,o=!1,i=0,r=t.length;i<r;i++){if(void 0!==(c=t[i]).POSITION&&(a=!0),void 0!==c.NORMAL&&(o=!0),a&&o)break}if(!a&&!o)return Promise.resolve(e);var s=[],l=[];for(i=0,r=t.length;i<r;i++){var c=t[i];if(a){var u=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):e.attributes.position;s.push(u)}if(o){u=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):e.attributes.normal;l.push(u)}}return Promise.all([Promise.all(s),Promise.all(l)]).then((function(t){var n=t[0],i=t[1];return a&&(e.morphAttributes.position=n),o&&(e.morphAttributes.normal=i),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function z(e,t){var n=e.getIndex();if(null===n){var a=[],o=e.getAttribute("position");if(void 0===o)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var i=0;i<o.count;i++)a.push(i);e.setIndex(a),n=e.getIndex()}var r=n.count-2,s=[];if(t===l.TriangleFanDrawMode)for(i=1;i<=r;i++)s.push(n.getX(0)),s.push(n.getX(i)),s.push(n.getX(i+1));else for(i=0;i<r;i++)i%2===0?(s.push(n.getX(i)),s.push(n.getX(i+1)),s.push(n.getX(i+2))):(s.push(n.getX(i+2)),s.push(n.getX(i+1)),s.push(n.getX(i)));s.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(s),c}return B.prototype.parse=function(e,t){var n=this,a=this.json,o=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(t){var i={scene:t[0][a.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:a.asset,parser:n,userData:{}};j(o,i,a),F(i,a),e(i)})).catch(t)},B.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],a={},o={},i=0,r=t.length;i<r;i++)for(var s=t[i].joints,l=0,c=s.length;l<c;l++)e[s[l]].isBone=!0;for(var u=0,d=e.length;u<d;u++){var p=e[u];void 0!==p.mesh&&(void 0===a[p.mesh]&&(a[p.mesh]=o[p.mesh]=0),a[p.mesh]++,void 0!==p.skin&&(n[p.mesh].isSkinnedMesh=!0))}this.json.meshReferences=a,this.json.meshUses=o},B.prototype.getDependency=function(e,t){var a=e+":"+t,o=this.cache.get(a);if(!o){switch(e){case"scene":o=this.loadScene(t);break;case"node":o=this.loadNode(t);break;case"mesh":o=this.loadMesh(t);break;case"accessor":o=this.loadAccessor(t);break;case"bufferView":o=this.loadBufferView(t);break;case"buffer":o=this.loadBuffer(t);break;case"material":o=this.loadMaterial(t);break;case"texture":o=this.loadTexture(t);break;case"skin":o=this.loadSkin(t);break;case"animation":o=this.loadAnimation(t);break;case"camera":o=this.loadCamera(t);break;case"light":o=this.extensions[n.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(a,o)}return o},B.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,a=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(a.map((function(t,a){return n.getDependency(e,a)}))),this.cache.add(e,t)}return t},B.prototype.loadBuffer=function(e){var t=this.json.buffers[e],a=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);var o=this.options;return new Promise((function(e,n){a.load(N(t.uri,o.path),e,void 0,(function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},B.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,a=t.byteOffset||0;return e.slice(a,a+n)}))},B.prototype.loadAccessor=function(e){var t=this,n=this.json,a=this.json.accessors[e];if(void 0===a.bufferView&&void 0===a.sparse)return Promise.resolve(null);var o=[];return void 0!==a.bufferView?o.push(this.getDependency("bufferView",a.bufferView)):o.push(null),void 0!==a.sparse&&(o.push(this.getDependency("bufferView",a.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",a.sparse.values.bufferView))),Promise.all(o).then((function(e){var o,i,r=e[0],s=O[a.type],c=w[a.componentType],u=c.BYTES_PER_ELEMENT,d=u*s,p=a.byteOffset||0,h=void 0!==a.bufferView?n.bufferViews[a.bufferView].byteStride:void 0,m=!0===a.normalized;if(h&&h!==d){var f=Math.floor(p/h),v="InterleavedBuffer:"+a.bufferView+":"+a.componentType+":"+f+":"+a.count,g=t.cache.get(v);g||(o=new c(r,f*h,a.count*h/u),g=new l.InterleavedBuffer(o,h/u),t.cache.add(v,g)),i=new l.InterleavedBufferAttribute(g,s,p%h/u,m)}else o=null===r?new c(a.count*s):new c(r,p,a.count*s),i=new l.BufferAttribute(o,s,m);if(void 0!==a.sparse){var y=O.SCALAR,b=w[a.sparse.indices.componentType],M=a.sparse.indices.byteOffset||0,A=a.sparse.values.byteOffset||0,T=new b(e[1],M,a.sparse.count*y),E=new c(e[2],A,a.sparse.count*s);null!==r&&(i=new l.BufferAttribute(i.array.slice(),i.itemSize,i.normalized));for(var x=0,S=T.length;x<S;x++){var L=T[x];if(i.setX(L,E[x*s]),s>=2&&i.setY(L,E[x*s+1]),s>=3&&i.setZ(L,E[x*s+2]),s>=4&&i.setW(L,E[x*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return i}))},B.prototype.loadTexture=function(e){var t,a=this,o=this.json,i=this.options,r=this.textureLoader,s=window.URL||window.webkitURL,c=o.textures[e],u=c.extensions||{},d=(t=u[n.MSFT_TEXTURE_DDS]?o.images[u[n.MSFT_TEXTURE_DDS].source]:o.images[c.source]).uri,p=!1;return void 0!==t.bufferView&&(d=a.getDependency("bufferView",t.bufferView).then((function(e){p=!0;var n=new Blob([e],{type:t.mimeType});return d=s.createObjectURL(n)}))),Promise.resolve(d).then((function(e){var t=i.manager.getHandler(e);return t||(t=u[n.MSFT_TEXTURE_DDS]?a.extensions[n.MSFT_TEXTURE_DDS].ddsLoader:r),new Promise((function(n,a){t.load(N(e,i.path),n,void 0,a)}))})).then((function(e){!0===p&&s.revokeObjectURL(d),e.flipY=!1,c.name&&(e.name=c.name),t.mimeType in k&&(e.format=k[t.mimeType]);var n=(o.samplers||{})[c.sampler]||{};return e.magFilter=x[n.magFilter]||l.LinearFilter,e.minFilter=x[n.minFilter]||l.LinearMipmapLinearFilter,e.wrapS=S[n.wrapS]||l.RepeatWrapping,e.wrapT=S[n.wrapT]||l.RepeatWrapping,e}))},B.prototype.assignTexture=function(e,t,a){var o=this;return this.getDependency("texture",a.index).then((function(i){if(!i.isCompressedTexture)switch(t){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":i.format=l.RGBFormat}if(void 0===a.texCoord||0==a.texCoord||"aoMap"===t&&1==a.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+a.texCoord+" for texture "+t+" not yet supported."),o.extensions[n.KHR_TEXTURE_TRANSFORM]){var r=void 0!==a.extensions?a.extensions[n.KHR_TEXTURE_TRANSFORM]:void 0;r&&(i=o.extensions[n.KHR_TEXTURE_TRANSFORM].extendTexture(i,r))}e[t]=i}))},B.prototype.assignFinalMaterial=function(e){var t=e.geometry,n=e.material,a=(this.extensions,void 0!==t.attributes.tangent),o=void 0!==t.attributes.color,i=void 0===t.attributes.normal,r=!0===e.isSkinnedMesh,s=Object.keys(t.morphAttributes).length>0,c=s&&void 0!==t.morphAttributes.normal;if(e.isPoints){var u="PointsMaterial:"+n.uuid,d=this.cache.get(u);d||(d=new l.PointsMaterial,l.Material.prototype.copy.call(d,n),d.color.copy(n.color),d.map=n.map,d.sizeAttenuation=!1,this.cache.add(u,d)),n=d}else if(e.isLine){u="LineBasicMaterial:"+n.uuid;var p=this.cache.get(u);p||(p=new l.LineBasicMaterial,l.Material.prototype.copy.call(p,n),p.color.copy(n.color),this.cache.add(u,p)),n=p}if(a||o||i||r||s){u="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(u+="specular-glossiness:"),r&&(u+="skinning:"),a&&(u+="vertex-tangents:"),o&&(u+="vertex-colors:"),i&&(u+="flat-shading:"),s&&(u+="morph-targets:"),c&&(u+="morph-normals:");var h=this.cache.get(u);h||(h=n.clone(),r&&(h.skinning=!0),a&&(h.vertexTangents=!0),o&&(h.vertexColors=!0),i&&(h.flatShading=!0),s&&(h.morphTargets=!0),c&&(h.morphNormals=!0),this.cache.add(u,h)),n=h}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",new l.BufferAttribute(t.attributes.uv.array,2)),n.normalScale&&!a&&(n.normalScale.y=-n.normalScale.y),e.material=n},B.prototype.loadMaterial=function(e){var t,a=this.json,o=this.extensions,i=a.materials[e],r={},s=i.extensions||{},c=[];if(s[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var u=o[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=u.getMaterialType(),c.push(u.extendParams(r,i,this))}else if(s[n.KHR_MATERIALS_UNLIT]){var d=o[n.KHR_MATERIALS_UNLIT];t=d.getMaterialType(),c.push(d.extendParams(r,i,this))}else{t=l.MeshStandardMaterial;var p=i.pbrMetallicRoughness||{};if(r.color=new l.Color(1,1,1),r.opacity=1,Array.isArray(p.baseColorFactor)){var m=p.baseColorFactor;r.color.fromArray(m),r.opacity=m[3]}void 0!==p.baseColorTexture&&c.push(this.assignTexture(r,"map",p.baseColorTexture)),r.metalness=void 0!==p.metallicFactor?p.metallicFactor:1,r.roughness=void 0!==p.roughnessFactor?p.roughnessFactor:1,void 0!==p.metallicRoughnessTexture&&(c.push(this.assignTexture(r,"metalnessMap",p.metallicRoughnessTexture)),c.push(this.assignTexture(r,"roughnessMap",p.metallicRoughnessTexture)))}!0===i.doubleSided&&(r.side=l.DoubleSide);var f=i.alphaMode;return f===C?r.transparent=!0:f===R&&(r.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5),void 0!==i.normalTexture&&t!==l.MeshBasicMaterial&&(c.push(this.assignTexture(r,"normalMap",i.normalTexture)),r.normalScale=new l.Vector2(1,1),void 0!==i.normalTexture.scale&&r.normalScale.set(i.normalTexture.scale,i.normalTexture.scale)),void 0!==i.occlusionTexture&&t!==l.MeshBasicMaterial&&(c.push(this.assignTexture(r,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(r.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&t!==l.MeshBasicMaterial&&(r.emissive=(new l.Color).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&t!==l.MeshBasicMaterial&&c.push(this.assignTexture(r,"emissiveMap",i.emissiveTexture)),Promise.all(c).then((function(){var e;return e=t===h?o[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(r):new t(r),i.name&&(e.name=i.name),e.map&&(e.map.encoding=l.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=l.sRGBEncoding),F(e,i),i.extensions&&j(o,e,i),e}))},B.prototype.loadGeometries=function(e){var t=this,a=this.extensions,o=this.primitiveCache;function i(e){return a[n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return H(n,e,t)}))}for(var r=[],s=0,c=e.length;s<c;s++){var u,d=e[s],p=D(d),h=o[p];if(h)r.push(h.promise);else u=d.extensions&&d.extensions[n.KHR_DRACO_MESH_COMPRESSION]?i(d):H(new l.BufferGeometry,d,t),o[p]={primitive:d,promise:u},r.push(u)}return Promise.all(r)},B.prototype.loadMesh=function(e){for(var t,n=this,a=this.json.meshes[e],o=a.primitives,i=[],r=0,s=o.length;r<s;r++){var c=void 0===o[r].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new l.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:l.FrontSide})),t.DefaultMaterial):this.getDependency("material",o[r].material);i.push(c)}return i.push(n.loadGeometries(o)),Promise.all(i).then((function(t){for(var i=t.slice(0,t.length-1),r=t[t.length-1],s=[],c=0,u=r.length;c<u;c++){var d,p=r[c],h=o[c],m=i[c];if(h.mode===A||h.mode===T||h.mode===E||void 0===h.mode)!0!==(d=!0===a.isSkinnedMesh?new l.SkinnedMesh(p,m):new l.Mesh(p,m)).isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),h.mode===T?d.geometry=z(d.geometry,l.TriangleStripDrawMode):h.mode===E&&(d.geometry=z(d.geometry,l.TriangleFanDrawMode));else if(h.mode===y)d=new l.LineSegments(p,m);else if(h.mode===M)d=new l.Line(p,m);else if(h.mode===b)d=new l.LineLoop(p,m);else{if(h.mode!==g)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+h.mode);d=new l.Points(p,m)}Object.keys(d.geometry.morphAttributes).length>0&&U(d,a),d.name=a.name||"mesh_"+e,r.length>1&&(d.name+="_"+c),F(d,a),n.assignFinalMaterial(d),s.push(d)}if(1===s.length)return s[0];var f=new l.Group;for(c=0,u=s.length;c<u;c++)f.add(s[c]);return f}))},B.prototype.loadCamera=function(e){var t,n=this.json.cameras[e],a=n[n.type];if(a)return"perspective"===n.type?t=new l.PerspectiveCamera(l.MathUtils.radToDeg(a.yfov),a.aspectRatio||1,a.znear||1,a.zfar||2e6):"orthographic"===n.type&&(t=new l.OrthographicCamera(a.xmag/-2,a.xmag/2,a.ymag/2,a.ymag/-2,a.znear,a.zfar)),n.name&&(t.name=n.name),F(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},B.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))},B.prototype.loadAnimation=function(e){for(var t=this.json.animations[e],n=[],a=[],o=[],i=[],r=[],s=0,c=t.channels.length;s<c;s++){var u=t.channels[s],d=t.samplers[u.sampler],p=u.target,h=void 0!==p.node?p.node:p.id,m=void 0!==t.parameters?t.parameters[d.input]:d.input,f=void 0!==t.parameters?t.parameters[d.output]:d.output;n.push(this.getDependency("node",h)),a.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",f)),i.push(d),r.push(p)}return Promise.all([Promise.all(n),Promise.all(a),Promise.all(o),Promise.all(i),Promise.all(r)]).then((function(n){for(var a=n[0],o=n[1],i=n[2],r=n[3],s=n[4],c=[],u=0,d=a.length;u<d;u++){var p=a[u],h=o[u],m=i[u],f=r[u],g=s[u];if(void 0!==p){var y;switch(p.updateMatrix(),p.matrixAutoUpdate=!0,P[g.path]){case P.weights:y=l.NumberKeyframeTrack;break;case P.rotation:y=l.QuaternionKeyframeTrack;break;case P.position:case P.scale:default:y=l.VectorKeyframeTrack}var b=p.name?p.name:p.uuid,M=void 0!==f.interpolation?_[f.interpolation]:l.InterpolateLinear,A=[];P[g.path]===P.weights?p.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&A.push(e.name?e.name:e.uuid)})):A.push(b);var T=m.array;if(m.normalized){var E;if(T.constructor===Int8Array)E=1/127;else if(T.constructor===Uint8Array)E=1/255;else if(T.constructor==Int16Array)E=1/32767;else{if(T.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");E=1/65535}for(var w=new Float32Array(T.length),x=0,S=T.length;x<S;x++)w[x]=T[x]*E;T=w}for(x=0,S=A.length;x<S;x++){var O=new y(A[x]+"."+P[g.path],h.array,T,M);"CUBICSPLINE"===f.interpolation&&(O.createInterpolant=function(e){return new v(this.times,this.values,this.getValueSize()/3,e)},O.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(O)}}}var L=t.name?t.name:"animation_"+e;return new l.AnimationClip(L,void 0,c)}))},B.prototype.loadNode=function(e){var t=this.json,a=this.extensions,o=this,i=t.meshReferences,r=t.meshUses,s=t.nodes[e];return function(){var e=[];return void 0!==s.mesh&&e.push(o.getDependency("mesh",s.mesh).then((function(e){var t;if(i[s.mesh]>1){var n=r[s.mesh]++;(t=e.clone()).name+="_instance_"+n}else t=e;return void 0!==s.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=s.weights.length;t<n;t++)e.morphTargetInfluences[t]=s.weights[t]})),t}))),void 0!==s.camera&&e.push(o.getDependency("camera",s.camera)),s.extensions&&s.extensions[n.KHR_LIGHTS_PUNCTUAL]&&void 0!==s.extensions[n.KHR_LIGHTS_PUNCTUAL].light&&e.push(o.getDependency("light",s.extensions[n.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(e)}().then((function(e){var t;if((t=!0===s.isBone?new l.Bone:e.length>1?new l.Group:1===e.length?e[0]:new l.Object3D)!==e[0])for(var n=0,o=e.length;n<o;n++)t.add(e[n]);if(s.name&&(t.userData.name=s.name,t.name=l.PropertyBinding.sanitizeNodeName(s.name)),F(t,s),s.extensions&&j(a,t,s),void 0!==s.matrix){var i=new l.Matrix4;i.fromArray(s.matrix),t.applyMatrix4(i)}else void 0!==s.translation&&t.position.fromArray(s.translation),void 0!==s.rotation&&t.quaternion.fromArray(s.rotation),void 0!==s.scale&&t.scale.fromArray(s.scale);return t}))},B.prototype.loadScene=function(){function e(t,n,a,o){var i=a.nodes[t];return o.getDependency("node",t).then((function(e){return void 0===i.skin?e:o.getDependency("skin",i.skin).then((function(e){for(var n=[],a=0,i=(t=e).joints.length;a<i;a++)n.push(o.getDependency("node",t.joints[a]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var a=[],o=[],i=0,r=n.length;i<r;i++){var s=n[i];if(s){a.push(s);var c=new l.Matrix4;void 0!==t.inverseBindMatrices&&c.fromArray(t.inverseBindMatrices.array,16*i),o.push(c)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[i])}e.bind(new l.Skeleton(a,o),e.matrixWorld)}})),e}));var t})).then((function(t){n.add(t);var r=[];if(i.children)for(var s=i.children,l=0,c=s.length;l<c;l++){var u=s[l];r.push(e(u,t,a,o))}return Promise.all(r)}))}return function(t){var n=this.json,a=this.extensions,o=this.json.scenes[t],i=new l.Group;o.name&&(i.name=o.name),F(i,o),o.extensions&&j(a,i,o);for(var r=o.nodes||[],s=[],c=0,u=r.length;c<u;c++)s.push(e(r[c],i,n,this));return Promise.all(s).then((function(){return i}))}}(),e}(),G=function(e){l.DataTextureLoader.call(this,e),this.type=l.UnsignedByteType};G.prototype=Object.assign(Object.create(l.DataTextureLoader.prototype),{constructor:G,parse:function(e){var t,n,a,o=function(e,t){switch(e){case 1:console.error("RGBELoader Read Error: "+(t||""));break;case 2:console.error("RGBELoader Write Error: "+(t||""));break;case 3:console.error("RGBELoader Bad File Format: "+(t||""));break;default:case 4:console.error("RGBELoader: Error: "+(t||""))}return-1},i=function(e,t,n){t=t||1024;for(var a=e.pos,o=-1,i=0,r="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(a,a+128)));0>(o=s.indexOf("\n"))&&i<t&&a<e.byteLength;)r+=s,i+=s.length,a+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(a,a+128)));return-1<o&&(!1!==n&&(e.pos+=i+o+1),r+s.slice(0,o))},r=function(e,t,n,a){var o=e[t+3],i=Math.pow(2,o-128)/255;n[a+0]=e[t+0]*i,n[a+1]=e[t+1]*i,n[a+2]=e[t+2]*i},s=function(){var e=new Float32Array(1),t=new Int32Array(e.buffer);function n(n){e[0]=n;var a=t[0],o=a>>16&32768,i=a>>12&2047,r=a>>23&255;return r<103?o:r>142?(o|=31744,o|=(255===r?0:1)&&8388607&a):r<113?o|=((i|=2048)>>114-r)+(i>>113-r&1):(o|=r-112<<10|i>>1,o+=1&i)}return function(e,t,a,o){var i=e[t+3],r=Math.pow(2,i-128)/255;a[o+0]=n(e[t+0]*r),a[o+1]=n(e[t+1]*r),a[o+2]=n(e[t+2]*r)}}(),c=new Uint8Array(e);c.pos=0;var u=function(e){var t,n,a=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,r=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,c={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(t=i(e)))return o(1,"no header found");if(!(n=t.match(/^#\?(\S+)$/)))return o(3,"bad initial token");for(c.valid|=1,c.programtype=n[1],c.string+=t+"\n";!1!==(t=i(e));)if(c.string+=t+"\n","#"!==t.charAt(0)){if((n=t.match(a))&&(c.gamma=parseFloat(n[1],10)),(n=t.match(r))&&(c.exposure=parseFloat(n[1],10)),(n=t.match(s))&&(c.valid|=2,c.format=n[1]),(n=t.match(l))&&(c.valid|=4,c.height=parseInt(n[1],10),c.width=parseInt(n[2],10)),2&c.valid&&4&c.valid)break}else c.comments+=t+"\n";return 2&c.valid?4&c.valid?c:o(3,"missing image size specifier"):o(3,"missing format specifier")}(c);if(-1!==u){var d=u.width,p=u.height,h=function(e,t,n){var a,i,r,s,l,c,u,d,p,h,m,f,v,g=t,y=n;if(g<8||g>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(g!==(e[2]<<8|e[3]))return o(3,"wrong scanline width");if(!(a=new Uint8Array(4*t*n))||!a.length)return o(4,"unable to allocate buffer space");for(i=0,r=0,d=4*g,v=new Uint8Array(4),c=new Uint8Array(d);y>0&&r<e.byteLength;){if(r+4>e.byteLength)return o(1);if(v[0]=e[r++],v[1]=e[r++],v[2]=e[r++],v[3]=e[r++],2!==v[0]||2!==v[1]||(v[2]<<8|v[3])!==g)return o(3,"bad rgbe scanline format");for(u=0;u<d&&r<e.byteLength;){if((f=(s=e[r++])>128)&&(s-=128),0===s||u+s>d)return o(3,"bad scanline data");if(f)for(l=e[r++],p=0;p<s;p++)c[u++]=l;else c.set(e.subarray(r,r+s),u),u+=s,r+=s}for(h=g,p=0;p<h;p++)m=0,a[i]=c[p+m],m+=g,a[i+1]=c[p+m],m+=g,a[i+2]=c[p+m],m+=g,a[i+3]=c[p+m],i+=4;y--}return a}(c.subarray(c.pos),d,p);if(-1!==h){switch(this.type){case l.UnsignedByteType:a=h,n=l.RGBEFormat,t=l.UnsignedByteType;break;case l.FloatType:for(var m=h.length/4*3,f=new Float32Array(m),v=0;v<m;v++)r(h,4*v,f,3*v);a=f,n=l.RGBFormat,t=l.FloatType;break;case l.HalfFloatType:m=h.length/4*3;var g=new Uint16Array(m);for(v=0;v<m;v++)s(h,4*v,g,3*v);a=g,n=l.RGBFormat,t=l.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:d,height:p,data:a,header:u.string,gamma:u.gamma,exposure:u.exposure,format:n,type:t}}}return null},setDataType:function(e){return this.type=e,this},load:function(e,t,n,a){return l.DataTextureLoader.prototype.load.call(this,e,(function(e,n){switch(e.type){case l.UnsignedByteType:e.encoding=l.RGBEEncoding,e.minFilter=l.NearestFilter,e.magFilter=l.NearestFilter,e.generateMipmaps=!1,e.flipY=!0;break;case l.FloatType:case l.HalfFloatType:e.encoding=l.LinearEncoding,e.minFilter=l.LinearFilter,e.magFilter=l.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),n,a)}});var V=function(){var e=function(){var e=new l.RawShaderMaterial({uniforms:{roughnessMap:{value:null},normalMap:{value:null},texelSize:{value:new l.Vector2(1,1)}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nvarying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = vec4( position, 1.0 );\n}\n              ",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec2 vUv;\nuniform sampler2D roughnessMap;\nuniform sampler2D normalMap;\nuniform vec2 texelSize;\n\n#define ENVMAP_TYPE_CUBE_UV\nvec4 envMapTexelToLinear(vec4 a){return a;}\n#include <cube_uv_reflection_fragment>\n\nfloat roughnessToVariance(float roughness) {\n  float variance = 0.0;\n  if (roughness >= r1) {\n    variance = (r0 - roughness) * (v1 - v0) / (r0 - r1) + v0;\n  } else if (roughness >= r4) {\n    variance = (r1 - roughness) * (v4 - v1) / (r1 - r4) + v1;\n  } else if (roughness >= r5) {\n    variance = (r4 - roughness) * (v5 - v4) / (r4 - r5) + v4;\n  } else {\n    float roughness2 = roughness * roughness;\n    variance = 1.79 * roughness2 * roughness2;\n  }\n  return variance;\n}\nfloat varianceToRoughness(float variance) {\n  float roughness = 0.0;\n  if (variance >= v1) {\n    roughness = (v0 - variance) * (r1 - r0) / (v0 - v1) + r0;\n  } else if (variance >= v4) {\n    roughness = (v1 - variance) * (r4 - r1) / (v1 - v4) + r1;\n  } else if (variance >= v5) {\n    roughness = (v4 - variance) * (r5 - r4) / (v4 - v5) + r4;\n  } else {\n    roughness = pow(0.559 * variance, 0.25);// 0.559 = 1.0 / 1.79\n  }\n  return roughness;\n}\n\nvoid main() {\n    gl_FragColor = texture2D(roughnessMap, vUv, -1.0);\n    if (texelSize.x == 0.0) return;\n    float roughness = gl_FragColor.g;\n    float variance = roughnessToVariance(roughness);\n    vec3 avgNormal;\n    for (float x = -1.0; x < 2.0; x += 2.0) {\n    for (float y = -1.0; y < 2.0; y += 2.0) {\n        vec2 uv = vUv + vec2(x, y) * 0.25 * texelSize;\n        avgNormal += normalize(texture2D(normalMap, uv, -1.0).xyz - 0.5);\n    }\n    }\n    variance += 1.0 - 0.25 * length(avgNormal);\n    gl_FragColor.g = varianceToRoughness(variance);\n}\n              ",blending:l.NoBlending,depthTest:!1,depthWrite:!1});return e.type="RoughnessMipmapper",e}(),t=new l.Scene;t.add(new l.Mesh(new l.PlaneBufferGeometry(2,2),e));var n=new l.OrthographicCamera(0,1,0,1,0,1),a=null,o=null,i=function(e){(o=e).compile(t,n)};return i.prototype={constructor:i,generateMipmaps:function(i){var r=i.roughnessMap,s=i.normalMap;if(null!=r&&null!=s&&r.generateMipmaps&&!i.userData.roughnessUpdated){i.userData.roughnessUpdated=!0;var c=Math.max(r.image.width,s.image.width),u=Math.max(r.image.height,s.image.height);if(l.MathUtils.isPowerOfTwo(c)&&l.MathUtils.isPowerOfTwo(u)){var d=o.getRenderTarget(),p=o.autoClear;if(o.autoClear=!1,null!=a&&a.width===c&&a.height===u||(null!=a&&a.dispose(),(a=new l.WebGLRenderTarget(c,u,{depthBuffer:!1,stencilBuffer:!1})).scissorTest=!0),c!==r.image.width||u!==r.image.height){var h=new l.WebGLRenderTarget(c,u,{minFilter:l.LinearMipMapLinearFilter,depthBuffer:!1,stencilBuffer:!1});h.texture.generateMipmaps=!0,o.setRenderTarget(h),i.roughnessMap=h.texture,i.metalnessMap==r&&(i.metalnessMap=i.roughnessMap),i.aoMap==r&&(i.aoMap=i.roughnessMap)}e.uniforms.roughnessMap.value=r,e.uniforms.normalMap.value=s;for(var m=new l.Vector2(0,0),f=e.uniforms.texelSize.value,v=0;c>=1&&u>=1;++v,c/=2,u/=2)f.set(1/c,1/u),0==v&&f.set(0,0),a.viewport.set(m.x,m.y,c,u),a.scissor.set(m.x,m.y,c,u),o.setRenderTarget(a),o.render(t,n),o.copyFramebufferToTexture(m,i.roughnessMap,v),e.uniforms.roughnessMap.value=i.roughnessMap;r!==i.roughnessMap&&r.dispose(),o.setRenderTarget(d),o.autoClear=p}}},dispose:function(){e.dispose(),t.children[0].geometry.dispose(),null!=a&&a.dispose()}},i}(),W=n(118),X=n.n(W),K=n(119),Y=n.n(K),Z=n(120);function Q(e,t,n,a){var o={keyframe:0,time:0,timeScale:1,repetitions:1/0,warpStartTimeScale:1,warpEndTimeScale:1,warpDurationInSeconds:2,warp:function(){n.warp(o.warpStartTimeScale,o.warpEndTimeScale,o.warpDurationInSeconds)},fadeDurationInSeconds:2,fadeIn:function(){n.fadeIn(o.fadeDurationInSeconds)},fadeOut:function(){n.fadeOut(o.fadeDurationInSeconds)},effectiveWeight:0,effectiveTimeScale:0},i=t.addFolder(e);return i.add(n,"clampWhenFinished").listen(),i.add(n,"enabled").listen(),i.add(n,"paused").listen(),i.add(n,"loop",{LoopRepeat:l.LoopRepeat,LoopOnce:l.LoopOnce,LoopPingPong:l.LoopPingPong}).onChange((function(e){e==l.LoopOnce||e==l.LoopPingPong?(n.reset(),n.repetitions=void 0,n.setLoop(parseInt(e),void 0)):n.setLoop(parseInt(e),o.repetitions)})),i.add(o,"repetitions",0,100).listen().onChange((function(e){n.loop==l.LoopOnce||n.loop==l.LoopPingPong?(n.reset(),n.repetitions=void 0,n.setLoop(parseInt(n.loop),void 0)):n.setLoop(parseInt(e),o.repetitions)})),i.add(n,"time",0,a.duration,.001).listen(),i.add(n,"timeScale",0,5,.1).listen(),i.add(n,"weight",0,1,.01).listen(),i.add(o,"effectiveWeight",0,1,.01).listen(),i.add(o,"effectiveTimeScale",0,5,.01).listen(),i.add(n,"zeroSlopeAtEnd").listen(),i.add(n,"zeroSlopeAtStart").listen(),i.add(n,"stop"),i.add(n,"play"),i.add(n,"reset"),i.add(o,"warpStartTimeScale",0,10,.01),i.add(o,"warpEndTimeScale",0,10,.01),i.add(o,"warpDurationInSeconds",0,10,.01),i.add(o,"warp"),i.add(o,"fadeDurationInSeconds",0,10,.01),i.add(o,"fadeIn"),i.add(o,"fadeOut"),o}n(237);var q=n(160),J=function(){function e(){var t=this;Object(c.a)(this,e),this.loadModelWithBg=function(n,a,o,i){if(t.group.children.forEach((function(e){return e.visible=!1})),0!==t.bufferPool.length){for(var r=0;r<t.bufferPool.length;r++)if(t.bufferPool[r].modelPath===o&&t.bufferPool[r].modelName===i)return t.currentGltf=t.bufferPool[r].model,t.group.children[r].visible=!0,t.mixer=new l.AnimationMixer(t.bufferPool[r].model.scene),t.bufferPool[r].model.animations.forEach((function(e){t.mixer.clipAction(e).stop()})),t.isLoaded=!0,t.adjustControl(),M.a.publish(e.path+"loaded",{modelName:i}),t.render(),void M.a.publish(e.path+"loadedFromCache",{modelName:i});(new z).setPath(o).load(i,(function(n){t.currentGltf=n;var a=n.scene;a.position.set(t.defaultPositionOfModel.x,t.defaultPositionOfModel.y,t.defaultPositionOfModel.z),a.rotation.setFromVector3(new l.Vector3(t.defaultRotationOfModel.x,t.defaultRotationOfModel.y,t.defaultRotationOfModel.z)),a.scale.set(t.defaultScaleOfModel.x,t.defaultScaleOfModel.y,t.defaultScaleOfModel.z),t.setPMREM(),t.setTextureTo(a),a.name=t.bufferPool.length;var r={modelPath:o,modelName:i,model:n};t.bufferPool.push(r),t.group.add(a),t.mixer=new l.AnimationMixer(a),n.animations.forEach((function(e){t.mixer.clipAction(e).stop()})),t.adjustControl(),t.render(),t.isLoaded=!0,M.a.publish(e.path+"loaded",{modelName:i})}))}else{(new z).setPath(o).load(i,(function(n){t.currentGltf=n;var a=n.scene;a.position.set(t.defaultPositionOfModel.x,t.defaultPositionOfModel.y,t.defaultPositionOfModel.z),a.rotation.setFromVector3(new l.Vector3(t.defaultRotationOfModel.x,t.defaultRotationOfModel.y,t.defaultRotationOfModel.z)),a.scale.set(t.defaultScaleOfModel.x,t.defaultScaleOfModel.y,t.defaultScaleOfModel.z),t.setPMREM(),t.setTextureTo(a),a.name=t.bufferPool.length;var r={modelPath:o,modelName:i,model:n};t.bufferPool.push(r),t.mixer=new l.AnimationMixer(a),n.animations.forEach((function(e){t.mixer.clipAction(e).stop()})),t.group.add(a),t.adjustControl(),t.render(),t.isLoaded=!0,M.a.publish(e.path+"loaded",{modelName:i})}))}},this.pick=function(n,a,o){var i=new l.Vector2;i.x=(a-n.x)/t.width*2-1,i.y=-(o-n.y)/t.height*2+1,console.log(n.x+" "+n.y+" "+i.x+" "+i.y);var r=t.camera.position,s=new l.Vector3(i.x,i.y,.5).unproject(t.camera).sub(t.camera.position).normalize(),c=new l.Raycaster(r,s).intersectObjects(t.scene.children,!0);return c.length>0?(M.a.publish(e.path+"pick",{name:c[0].object.name,type:w}),c[0]):null},this.animate=function(n){if(q.default.update(n),t.ifInit){var a=t.clock.getDelta();t.mixer.update(a),t.controls.update(a),t.render(),t.stats.update(),t.mixer&&t.animationControls.length>0&&(t.mixer.update(a),t.animationControls.forEach((function(e,n){e.time=t.mixer.time,e.effectiveTimeScale=t.clipAndActions[n].action.getEffectiveTimeScale(),e.effectiveWeight=t.clipAndActions[n].action.getEffectiveWeight()}))),M.a.publish(e.path+"animate",{delta:a,isLoaded:t.isLoaded})}requestAnimationFrame(t.animate.bind(t))},this.animateCamera=function(e,n,a,o,i){void 0!==t.currentGltf&&t.currentGltf.scene.rotation.setFromVector3(new l.Vector3),t.controls.enabled=!1;var r=t,s={x:e.x,y:e.y,z:e.z};t.tweenP=new q.default.Tween(s).to({x:a.x,y:a.y,z:a.z},1500).onComplete((function(){r.controls.enabled=!0})),t.tweenP.easing(q.default.Easing.Cubic.InOut);t.tweenP.onUpdate((function(){r.camera.position.set(s.x,s.y,s.z)})),r.camera.lookAt(new l.Vector3(i.x,i.y,i.z)),r.controls.target.set(i.x,i.y,i.z),t.tweenP.start()},this.render=function(){t.renderer.render(t.scene,t.camera)},this.onWindowResize=function(){t.camera.aspect=t.container.offsetWidth/t.container.offsetHeight,t.camera.updateProjectionMatrix(),t.renderer.setSize(t.width,t.height)},this.init=function(){t.raycaster=new l.Raycaster,t.scene=new l.Scene,t.scene.add(t.group),t.camera=new l.PerspectiveCamera(60,t.width/t.height,1,2e3),t.camera.position.x=t.defaultPositionOfCamera.x,t.camera.position.y=t.defaultPositionOfCamera.y,t.camera.position.z=t.defaultPositionOfCamera.z,t.camera.lookAt(t.defaultLookAtOfCamera),t.renderer=new l.WebGLRenderer({antialias:!0,alpha:!0}),t.pmremGenerator=new l.PMREMGenerator(t.renderer),t.pmremGenerator.compileEquirectangularShader(),t.renderer.setClearColor(15658734,0),t.renderer.setPixelRatio(window.devicePixelRatio),t.renderer.setSize(t.width,t.height),t.renderer.toneMapping=l.ACESFilmicToneMapping,t.renderer.toneMappingExposure=.8,t.renderer.outputEncoding=l.sRGBEncoding;var e=new l.AmbientLight(6842472);t.scene.add(e);var n=new l.DirectionalLight(16777215);n.position.set(550,100,550),n.intensity=.6,t.scene.add(n),t.controls=new X.a(t.camera,t.renderer.domElement),t.controls.addEventListener("change",t.render),t.controls.minDistance=.1,t.controls.maxDistance=13,t.controls.screenSpacePanning=!0,t.controls.target.set(0,0,0),t.stats=new Y.a,t.stats.dom.hidden=!0,t.animate()},this.appendChild=function(e){var n=document.getElementById(e);n&&(n!==t.container&&(null!==t.container&&(t.stats.dom in t.container.children&&t.container.removeChild(t.stats.dom),t.renderer.domElement in t.container.children&&t.container.removeChild(t.renderer.domElement),window.removeEventListener("resize",t.onWindowResize,!1),t.ifInit=!1),t.container=n,t.width=n.offsetWidth,t.height=n.offsetHeight,console.log(t.width,t.height),t.camera.aspect=t.width/t.height,t.renderer.setSize(t.width,t.height),t.container.appendChild(t.stats.dom),t.mixer=new l.AnimationMixer,t.container.appendChild(t.renderer.domElement),t.ifInit=!0),window.addEventListener("resize",t.onWindowResize,!1))},this.getAnimationClipAndActionBy=function(e){var n=l.AnimationClip.findByName(t.currentGltf.animations,e);if(null===n)return!0;var a=t.mixer.clipAction(n);return null===a||{clip:n,action:a}},this.animationControls=[],this.clipAndActions=[],this.mixerControls={time:0,timeScale:1,stopAllAction:function(){_("sceneManager").mixer.stopAllAction()}},this.container=null,this.scene=null,this.camera=null,this.renderer=null,this.stats=null,this.pmremGenerator=null,this.mixer=null,this.controls=null,this.width=400,this.height=300,this.clock=new l.Clock,this.raycaster=null,this.ifInit=!1,this.isLoaded=!1,this.bufferPool=[],this.currentGltf=void 0,this.group=new l.Group,this.gltfs=[],this.tweenP=null,this.tweenT=null,this.sceneModel=void 0,this.arrowHelper=void 0,this.defaultPositionOfCamera=new l.Vector3(-1,3,5),this.defaultLookAtOfCamera=new l.Vector3(0,0,0),this.defaultPositionOfModel=new l.Vector3(0,0,0),this.defaultRotationOfModel=new l.Vector3(0,0,0),this.defaultScaleOfModel=new l.Vector3(1,1,1)}return Object(u.a)(e,[{key:"setCameraPos",value:function(e,t,n){null!==e?(this.camera.position.x=e.x,this.camera.position.y=e.y,this.camera.position.z=e.z):console.log("position is null"),null!==n?this.camera.lookAt(n):console.log("lookat is null"),this.camera.lookAt(new l.Vector3)}},{key:"setModelPos",value:function(e,t,n){null!==e?this.defaultPositionOfModel.set(e.x,e.y,e.z):console.log("position is null"),null!==t?this.defaultRotationOfModel.set(t.x,t.y,t.z):console.log("rotation is null"),null!==n?this.defaultScaleOfModel.set(n.x,n.y,n.z):console.log("scale is null"),void 0!==this.currentGltf&&(this.currentGltf.scene.position.set(this.defaultPositionOfModel.x,this.defaultPositionOfModel.y,this.defaultPositionOfModel.z),this.currentGltf.scene.rotation.setFromVector3(new l.Vector3(this.defaultRotationOfModel.x,this.defaultRotationOfModel.y,this.defaultRotationOfModel.z)),this.currentGltf.scene.scale.set(this.defaultScaleOfModel.x,this.defaultScaleOfModel.y,this.defaultScaleOfModel.z))}},{key:"adjustControl",value:function(){this.setCameraPos(this.sceneModel.positionOfCamera,this.sceneModel.upOfCamera,this.sceneModel.lookatOfCamera),this.setModelPos(this.sceneModel.positionOfModel,this.sceneModel.rotationOfModel,this.sceneModel.scaleOfModel);var e=this.currentGltf.scene,t=(new l.Box3).setFromObject(e).getSize(new l.Vector3).length();this.controls.reset(),this.controls.maxDistance=10*t,this.camera.near=t/100,this.camera.far=100*t,this.camera.updateProjectionMatrix(),this.controls.saveState()}},{key:"setPMREM",value:function(){var t=this;e.path===D.path&&this.getPmremTexture().then((function(e){var n=e.envMap;t.scene.environment=n}))}},{key:"getPmremTexture",value:function(){var e=this,t="/source/textures/equirectangular/venice_sunset_1k.hdr";return new Promise((function(n,a){(new G).setDataType(l.UnsignedByteType).load(t,(function(t){var a=e.pmremGenerator.fromEquirectangular(t).texture;e.pmremGenerator.dispose(),n({envMap:a})}),void 0,a)}))}},{key:"setTextureTo",value:function(t){var n=new V(this.renderer),a=new l.TextureLoader;if(e.path===F.path){var o=null,i=this.sceneModel.lightMapPath();return"string"===typeof i&&i.length>0&&(o=a.load(i)),t.traverse((function(e){e instanceof l.Mesh&&e.isMesh&&(n.generateMipmaps(e.material),e.material.lightMap=o,e.material.needsUpdate=!0)})),void n.dispose()}t.traverse((function(t){t instanceof l.Mesh&&t.isMesh&&(n.generateMipmaps(t.material),e.path===D.path&&("Render_unit"===t.name||t.name),t.material.needsUpdate=!0)})),n.dispose()}},{key:"hideUnitWithOut",value:function(t){var n=this;if(e.path!==D.path)return null;["Distribution_Unit","UPS","Render_unit","Banknote_unit","coin_unit","frame_unit"].forEach((function(e,a){n.currentGltf.scene.getObjectByName(e).visible=e===t||"frame_unit"===t}))}},{key:"enableControls",value:function(t,n){if(e.path===F.path){var a=this,o=new Z.a,i=o.addFolder("AnimationMixer");i.add(this.mixerControls,"time").listen(),i.add(this.mixerControls,"timeScale",0,5).onChange((function(e){a.mixer.timeScale=e})),i.add(this.mixerControls,"stopAllAction").listen();var r=null,s=null;s=Q("Half_N",o,(r=e.getAnimationClipAndActionByNameWithMixerAndGltfs("Half_N",[n],t)).action,r.clip),this.animationControls.push(s),this.clipAndActions.push(r),s=Q("Half_S",o,(r=e.getAnimationClipAndActionByNameWithMixerAndGltfs("Half_S",[n],t)).action,r.clip),this.animationControls.push(s),this.clipAndActions.push(r)}}}]),e}();J.path=F.path,J.getAnimationClipAndActionByNameWithMixerAndGltfs=function(e,t,n){var a=void 0,o=void 0;return t.forEach((function(t,i){var r=l.AnimationClip.findByName(t.animations,e);if(null===r)return!0;var s=n.clipAction(r);if(null===s)return!0;a=r,o=s})),{clip:a,action:o}};var $=J,ee=(n(161),n(135)),te=n(35),ne=n(122),ae=n(123),oe=n(124);var ie=function(e){var t={};return e.forEach((function(e){t[e]=e})),t}(["TEST"]);function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{testDate:1,test:2,t:3},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie.TEST:return Object(oe.a)({},e,{t:4});default:return e}}var se=Object(te.c)(Object.assign({},a)),le=n(45),ce=(n(166),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).handlePick=function(e){var t=_("sceneManager"),n=t.pick(new l.Vector2(200,0),e.clientX,e.clientY);null!==n&&t.animateCamera(t.camera.position,t.controls.position0,n.object.position,n.object.position)},n}return Object(y.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=_("sceneManager");e.scenePath=F.path,e.appendChild("device"),e.loadModelWithBg("/source/textures/equirectangular/","royal_esplanade_1k.hdr","/source/models/test/","Station.glb"),e.container.addEventListener("click",this.handlePick,!1)}},{key:"componentWillUnmount",value:function(){var e=_("sceneManager");null!==e.container&&e.container.removeEventListener("click",this.handlePick,!1)}},{key:"render",value:function(){return i.a.createElement("div",{id:"device"})}}]),t}(o.Component)),ue=(n(167),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={list:[],selected:-1},n.errorJudjement=function(e){for(var t=0;t<e.length;t++)if("error"===e[t].status)return!1;return!0},n.handleClick=function(e){var t=_("sceneManager"),a={x:.7,y:.35,z:1.6},o={x:0,y:0,z:0},i="";switch(e){case 0:i="frame_unit",a={x:.12,y:.58627,z:5.5},o={x:0,y:0,z:0};break;case 1:i="Banknote_unit",a={x:-1.9524789679123824,y:-.17753405117771476,z:2.9963349371220436},o={x:.5108138866892379,y:-.3429119959990824,z:.5340557086551816};break;case 2:i="coin_unit",a={x:-2.1019016186189075,y:-.6410775169220737,z:2.922886865182427},o={x:.0630504553140941,y:-.7882444661038277,z:-.03731093237479279};break;case 3:i="Distribution_Unit",a={x:2.376620357977175,y:-.09920244780879667,z:-.004236099526651743},o={x:-.0349794605003186,y:-.4282042984837279,z:-.07555937145275725};break;case 4:i="UPS",a={x:1.1525563776335424,y:-1.5962918241672834,z:-.2946352996746073},o={x:-.37367151436281076,y:-1.7364980079953276,z:-.21646172177968243};break;case 5:i="Render_unit",a={x:.8931672573320442,y:1.396145436359538,z:-.08890383748009252},o={x:.15497381567892415,y:1.2365884815192894,z:-.08348527499470576}}t.hideUnitWithOut(i),t.animateCamera(t.camera.position,t.controls.position0,a,{x:0,y:0,z:0},o),n.setState({selected:e})},n}return Object(y.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){this.setState({list:e.list||[]})}},{key:"render",value:function(){var e=this,t=this.state,a=t.list,o=t.selected;return i.a.createElement("div",{className:"status"},a.map((function(t,a){return i.a.createElement("div",{className:o===a?"item-selected":"item",style:{background:"url(".concat(n(o===a?168:169),")")},key:a,onClick:function(){return e.handleClick(a)}},i.a.createElement("div",{className:e.errorJudjement(t.list)?"left":"left-err"},t.title),i.a.createElement("div",{className:"line"}),i.a.createElement("div",{className:"right"},t.list.map((function(e,t){return i.a.createElement("div",{className:"error"===e.status?"tip-err":"tip",key:t},i.a.createElement("div",{className:"key"},e.key),i.a.createElement("div",{className:"value"},e.value))}))))})))}}]),t}(o.PureComponent)),de=(n(170),function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"networkError"},"\u7f51\u7edc\u6545\u969c\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5...")}}]),t}(o.PureComponent)),pe=n(17),he=(n(171),n(172),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={statusList:[],showError:!1,needRepair:!1},n.handleShow=function(){Object(pe.b)().push("/map")},n.getStatus=function(){var e="";n.props.history.location.state&&1===n.props.history.location.state.id?(e="/virtualData/status.json",n.setState({needRepair:!1})):(e="/virtualData/status-east.json",n.setState({needRepair:!0})),e="plugin"+e,h.get(e).then((function(e){n.setState({statusList:e.data.data||[]})}))},n}return Object(y.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){var n=this,a="";console.log(e);var o="Tvm_third_bad_GLB.glb";e.history.location.state&&1===e.history.location.state.id?(a="/virtualData/status.json",o="Tvm_third_normal_GLB.glb",this.setState({needRepair:!1})):(a="/virtualData/status-east.json",o="Tvm_third_bad_GLB.glb",this.setState({needRepair:!0})),a="plugin"+a,h.get(a).then((function(e){n.setState({statusList:e.data.data||[]}),console.log(e.data.data)}));setTimeout((function(){var e=_("sceneManager"),t=_("Application").deviceTVM;$.path=D.path,e.sceneModel=t,e.appendChild("model"),e.loadModelWithBg(t.bgFilePath(),t.bgFileName(),t.modelFilePath(),o)}),10)}},{key:"componentWillMount",value:function(){this.getStatus()}},{key:"componentDidMount",value:function(){var e="";e="/device/east"===this.props.location.pathname?"Tvm_third_bad_GLB.glb":"Tvm_third_normal_GLB.glb",console.log(this.props),setTimeout((function(){var t=_("sceneManager"),n=_("Application").deviceTVM;$.path=D.path,t.sceneModel=n,t.appendChild("model"),t.loadModelWithBg(n.bgFilePath(),n.bgFileName(),n.modelFilePath(),e)}),10)}},{key:"componentWillUnmount",value:function(){clearTimeout()}},{key:"render",value:function(){var e=this.state,t=e.statusList,a=e.showError,o=e.needRepair;return i.a.createElement("div",{className:"device"},i.a.createElement("div",{className:"left"},i.a.createElement("div",{id:"model"},a?i.a.createElement(de,null):""),o?i.a.createElement("div",{className:"repair-btn",onClick:this.handleShow},i.a.createElement("div",{className:"icon"}),i.a.createElement("div",{className:"text"},"\u4e00\u952e\u62a5\u4fee")):""),i.a.createElement("div",{className:"right"},i.a.createElement("div",{className:"position",style:{background:"url(".concat(n(173),")")}},i.a.createElement("div",{className:"title"},"\u8bbe\u5907\u4f4d\u7f6e: \u7ad9\u53f0\u4e1c\u4fa7A\u8fdb\u53e3\uff0c\u8bbe\u59073"),i.a.createElement("div",{className:"title"},"\u8bbe\u5907ID: 030B0603   IP\u5730\u5740\uff1a172.3.62.103")),i.a.createElement(ue,{list:t})))}}]),t}(o.PureComponent)),me=(n(174),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={show:!1,width:859,height:608,title:""},n}return Object(y.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){this.setState({show:e.show})}},{key:"componentWillMount",value:function(){var e=this.props,t=e.show,n=e.width,a=e.height,o=e.title;this.setState({show:t||!1,width:n||859,height:a||608,title:o||""})}},{key:"render",value:function(){var e=this.state,t=e.show,a=e.width,o=e.height,r=e.title,s=this.props.children;return t?i.a.createElement("div",{className:"modal"},i.a.createElement("div",{className:"body",style:{width:a,height:o}},i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"title"},r),i.a.createElement("img",{className:"icon",src:[n(175)],onClick:this.props.onCancel||null,alt:"\u5173\u95ed"})),i.a.createElement("div",{className:"content"},s))):null}}]),t}(o.PureComponent)),fe=(n(176),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).handlePick=function(e){_("sceneManager").pick(new l.Vector2(224,44),e.clientX,e.clientY)},n.handleOpenVideo=function(){n.setState({show:!0})},n.handleCancelModal=function(){n.setState({show:!1})},n.state={show:!1,video:"/source/video/bg_video.mp4",currentReport:"\u672c\u6b21\u5217\u8f66\uff1a\u5f00\u5f80\u4f1a\u8bae\u4e2d\u5fc3",nextReport:"2",sceneManager:null},n.setVideo=function(e){n.setState({video:e})},n}return Object(y.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){M.a.subscribe(F.path+"pop_video",this.showVideo.bind(this)),M.a.subscribe(F.path+"report",this.report.bind(this))}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){var t=_("sceneManager"),n=_("Application").platform;$.path=F.path,t.sceneModel=n,t.appendChild("platform-demo"),t.loadModelWithBg(n.bgFilePath(),n.bgFileName(),n.modelFilePath(),n.modelFileName()),t.container.addEventListener("click",e.handlePick,!1)}),10)}},{key:"componentWillUnmount",value:function(){var e=_("sceneManager");null!==e.container&&e.container.removeEventListener("click",this.handlePick,!1)}},{key:"showVideo",value:function(e,t){this.setVideo(t.src),this.handleOpenVideo()}},{key:"render",value:function(){var e=this.state,t=e.show,n=e.video,a=e.currentReport,o=e.nextReport;return i.a.createElement("div",{className:"platform"},i.a.createElement(me,{show:t,onCancel:this.handleCancelModal,title:"XXXj \u76d1\u63a7\u5b9e\u65f6\u6548\u679c"},i.a.createElement("video",{className:"video",controls:!1,autoPlay:!0,loop:!0,src:n},"\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301video\u6807\u7b7e\uff0c\u5efa\u8bae\u66f4\u6362\u73b0\u4ee3\u6d4f\u89c8\u5668")),i.a.createElement("div",{id:"model"},i.a.createElement("div",{id:"platform-demo",className:"platform-demo"}),i.a.createElement("div",{className:"info-card"},i.a.createElement("div",{className:"info-container"},i.a.createElement("span",{className:"title"},"\u672c\u6b21\u5217\u8f66\uff1a"),i.a.createElement("span",{className:"info"},"\u5f00\u5f80\u4f1a\u8bae\u4e2d\u5fc3"),i.a.createElement("span",{className:"status"},a)),i.a.createElement("div",{className:"info-container"},i.a.createElement("span",{className:"title"},"\u4e0b\u4e00\u73ed\u5217\u8f66\u8fd8\u9700\u7b49\u5f85\uff1a"),i.a.createElement("span",{className:"info"},o,"\u5206\u949f")))))}},{key:"report",value:function(e,t){this.setState({currentReport:t.current,nextReport:t.next})}}]),t}(o.Component)),ve=(n(177),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={sceneManager:null},n.handlePick=function(e){var t=_("sceneManager"),n=t.pick(new l.Vector2(200,0),e.clientX,e.clientY);null!==n&&t.animateCamera(t.camera.position,t.controls.position0,n.object.position,n.object.position),console.log(n)},n}return Object(y.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=_("sceneManager");e.appendChild("sceneDemo"),e.loadModelWithBg("/source/textures/equirectangular/","royal_esplanade_1k.hdr","/source/models/glb/","CesiumMan.glb"),e.container.addEventListener("click",this.handlePick,!1)}},{key:"componentWillUnmount",value:function(){var e=_("sceneManager");null!==e.container&&e.container.removeEventListener("click",this.handlePick,!1)}},{key:"render",value:function(){return i.a.createElement("div",{id:"sceneDemo"})}}]),t}(o.PureComponent)),ge=(n(178),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).navigateBack=function(){Object(pe.b)().goBack()},n.renderMap=function(){var e=window.BMapGL,t=new e.Map("myMap"),n=new e.Point(116.404,39.915);t.centerAndZoom(n,15);var a=new e.Marker(n);t.addOverlay(a);var o=new e.InfoWindow("\n                \u59d3\u540d\uff1a\u5f20\u4e09\u4e30\n                \u7535\u8bdd\uff1a1730000111\n                \u90e8\u95e8\uff1a\u8bbe\u5907\u7ef4\u4fee\u90e8\u4e8c\u7ec4\n                \u5de5\u53f7\uff1a0035\n            ",{width:300,height:100,title:"\u7ef4\u4fee\u4eba\u5458\u4fe1\u606f",message:"\u7ef4\u4fee\u4eba\u5458\u4fe1\u606f"});a.addEventListener("click",(function(){t.openInfoWindow(o,n)}))},n}return Object(y.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.renderMap()}},{key:"render",value:function(){return i.a.createElement("div",{className:"map"},i.a.createElement("div",{className:"bar"},i.a.createElement("img",{className:"back",onClick:this.navigateBack,src:[n(179)]}),i.a.createElement("div",{className:"title"},"\u7ef4\u4fee\u8fdb\u5ea6\uff1a"),i.a.createElement("div",{className:"status forRepair"},"\u5f85\u7ef4\u4fee")),i.a.createElement("div",{className:"container"},i.a.createElement("div",{id:"myMap"})))}}]),t}(o.Component)),ye=n(240),be=n(241),Me=n(242),Ae=n(37),Te=ye.a.Content,Ee=ye.a.Sider,we=be.a.SubMenu,xe=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={collapsed:!1},n.onCollapse=function(e){n.setState({collapsed:e})},n}return Object(y.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement(ye.a,{style:{minHeight:"100vh"}},i.a.createElement(le.b,null,i.a.createElement(Ee,{collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse},i.a.createElement(be.a,{theme:"dark",defaultSelectedKeys:["platform"],mode:"inline"},i.a.createElement(be.a.Item,{key:"platform"},i.a.createElement(le.c,{to:{pathname:"/",state:{id:0}}},"\u7ad9\u53f0\u76d1\u63a7")),i.a.createElement(we,{key:"device",title:i.a.createElement("span",null,"\u8bbe\u5907\u76d1\u63a7")},i.a.createElement(we,{key:"AGM",title:i.a.createElement("span",null,"AGM")},i.a.createElement(be.a.Item,{key:"AGM-1"},i.a.createElement(le.c,{to:{pathname:"/device",state:{id:1}}},"\u897f\u4fa7\u8bbe\u5907")),i.a.createElement(be.a.Item,{key:"AGM-2"},i.a.createElement(le.c,{to:{pathname:"/device/east",state:{id:2}}},"\u4e1c\u4fa7\u8bbe\u5907",i.a.createElement(Me.a,{style:{marginLeft:"15px"},count:2}))))))),i.a.createElement(ye.a,null,i.a.createElement(Te,null,i.a.createElement(Ae.a,{exact:!0,path:"/",component:fe}),i.a.createElement(Ae.a,{exact:!0,path:"/example",component:ce}),i.a.createElement(Ae.a,{exact:!0,path:"/device",component:he}),i.a.createElement(Ae.a,{exact:!0,path:"/device/east",component:he}),i.a.createElement(Ae.a,{exact:!0,path:"/sceneManager",component:ve}),i.a.createElement(Ae.a,{exact:!0,path:"/map",component:ge})))))}}]),t}(o.Component),Se=(n(234),n(235),Object(ae.createLogger)());var Oe=function(e){var t=Object(te.d)(Object(te.a)(ne.a,Se));return Object(te.e)(se,e,t)}({test:{}}),Le=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={collapsed:!1},n}return Object(y.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement(ee.a,{store:Oe},i.a.createElement(le.a,null,i.a.createElement(xe,null)))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));R("EventDispatcher",new l.EventDispatcher),R("Application",new H),R("sceneManager",new $),_("sceneManager").init(),s.a.render(i.a.createElement(Le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[138,1,2]]]);
//# sourceMappingURL=main.746b2e61.chunk.js.map